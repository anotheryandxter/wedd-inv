(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,51974,e=>{"use strict";var t,a=e.i(84362),n=e.i(10858),r=e.i(99175),s=e.i(23332);let i=(0,s.default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var l=e.i(55871);let o=(0,s.default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),c=(0,s.default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),d=(0,s.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),u=(0,s.default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);function m({user:e,activeTab:t,onTabChange:n,onLogout:r,stats:s}){let m=[{id:"settings",label:"Pengaturan",icon:i},{id:"guests",label:"Daftar Tamu",icon:l.Users,badge:s.guests},{id:"gallery",label:"Galeri",icon:o,badge:s.gallery},{id:"comments",label:"Komentar",icon:c,badge:s.comments}];return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-border",children:[(0,a.jsx)("h1",{className:"font-serif text-xl text-gold-gradient",children:"Wedding Admin"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1 truncate",children:e.email})]}),(0,a.jsx)("div",{className:"p-4 border-b border-border",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"glass rounded-xl p-3 text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-serif text-gold",children:s.attending}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Hadir"})]}),(0,a.jsxs)("div",{className:"glass rounded-xl p-3 text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-serif text-gold",children:s.guests}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total Tamu"})]})]})}),(0,a.jsx)("nav",{className:"flex-1 p-4 space-y-2",children:m.map(e=>(0,a.jsxs)("button",{onClick:()=>n(e.id),className:`w-full flex items-center justify-between px-4 py-3 rounded-xl transition-all ${t===e.id?"bg-gold/10 text-gold":"text-muted-foreground hover:bg-muted hover:text-foreground"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(e.icon,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:e.label})]}),void 0!==e.badge&&(0,a.jsx)("span",{className:`text-xs px-2 py-0.5 rounded-full ${t===e.id?"bg-gold text-white":"bg-muted"}`,children:e.badge})]},e.id))}),(0,a.jsxs)("div",{className:"p-4 border-t border-border space-y-2",children:[(0,a.jsxs)("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-muted-foreground hover:bg-muted hover:text-foreground transition-all",children:[(0,a.jsx)(u,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Lihat Undangan"})]}),(0,a.jsxs)("button",{onClick:r,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-muted-foreground hover:bg-destructive/10 hover:text-destructive transition-all",children:[(0,a.jsx)(d,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Keluar"})]})]})]})}var p=e.i(78645),h=e.i(37492),f=e.i(34498),g=e.i(17135),x=e.i(27527),v=e.i(19206);function y({className:e,...t}){return(0,a.jsx)("textarea",{"data-slot":"textarea",className:(0,v.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}let b=(0,s.default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),j=(0,s.default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var w=e.i(89397),N=(0,w.createServerReference)("60c6d9fad2be1c62c0d4f097b0b339b8d50a8d1d0b",w.callServer,void 0,w.findSourceMapURL,"updateWeddingSettings"),_=(0,w.createServerReference)("405756fe12822bd8c51c3f2d7dccf35ff0b77607a0",w.callServer,void 0,w.findSourceMapURL,"changeAdminPassword"),k=e.i(63198);function C({settings:e,onUpdate:t}){let[r,s]=(0,n.useState)(e||{}),[i,l]=(0,n.useState)(!1),[o,c]=(0,n.useTransition)(),[d,u]=(0,n.useState)(null),m=e=>{let{name:t,value:a}=e.target;s(e=>({...e,[t]:a}))},v=async a=>{a.preventDefault(),e?.id&&(u(null),c(async()=>{let a={...r};void 0!==a.place_query&&delete a.place_query,""===a.venue_lat||void 0===a.venue_lat?a.venue_lat=null:"string"==typeof a.venue_lat&&(a.venue_lat=Number(a.venue_lat)),""===a.venue_lng||void 0===a.venue_lng?a.venue_lng=null:"string"==typeof a.venue_lng&&(a.venue_lng=Number(a.venue_lng)),a.venue_map_url&&"string"!=typeof a.venue_map_url&&(a.venue_map_url=String(a.venue_map_url));let n=await N(e.id,a);n.success&&n.data?(u({type:"success",text:"Pengaturan berhasil disimpan"}),t(n.data)):u({type:"error",text:n.error||"Gagal menyimpan pengaturan"})}))},[w,C]=(0,n.useState)(""),[S,L]=(0,n.useState)(""),[R,T]=(0,n.useTransition)(),[E,P]=(0,n.useState)(null),A=async e=>{(e.preventDefault(),P(null),!w||w.length<8)?P({type:"error",text:"Password harus minimal 8 karakter"}):w!==S?P({type:"error",text:"Password dan konfirmasi tidak cocok"}):T(async()=>{let e=await _(w);e.success?(P({type:"success",text:"Password berhasil diubah"}),C(""),L("")):P({type:"error",text:e.error||"Gagal mengubah password"})})};p.default.env.NEXT_PUBLIC_SUPABASE_BUCKET;let[M,O]=(0,n.useState)(!1),[I,B]=(0,n.useState)(!1),[F,U]=(0,n.useState)(null),D=async e=>{try{let t=new FormData;return t.append("file",e),t.append("filename",e.name),t.append("folder","wedding"),(await fetch("/api/upload",{method:"POST",body:t})).json()}catch(e){return{success:!1,error:e?.message||String(e)}}},z=async a=>{let n=a.target.files?.[0];if(!n||!e?.id)return;U(null),O(!0);let r=await D(n);if(O(!1),!r.success)return U({type:"error",text:r.error||"Gagal mengunggah gambar"});c(async()=>{let a=await N(e.id,{hero_image:r.publicUrl});a.success&&a.data?(U({type:"success",text:"Gambar cover berhasil diperbarui"}),t(a.data)):U({type:"error",text:a.error||"Gagal menyimpan URL gambar"})})},G=async a=>{let n=a.target.files?.[0];if(!n||!e?.id)return;U(null);let r=await D(n);if(!r.success)return U({type:"error",text:r.error||"Gagal mengunggah gambar"});c(async()=>{let a=await N(e.id,{groom_photo:r.publicUrl});a.success&&a.data?(U({type:"success",text:"Foto mempelai pria berhasil diperbarui"}),s(e=>({...e,groom_photo:r.publicUrl})),t(a.data)):U({type:"error",text:a.error||"Gagal menyimpan URL gambar"})})},H=async a=>{let n=a.target.files?.[0];if(!n||!e?.id)return;U(null);let r=await D(n);if(!r.success)return U({type:"error",text:r.error||"Gagal mengunggah gambar"});c(async()=>{let a=await N(e.id,{bride_photo:r.publicUrl});a.success&&a.data?(U({type:"success",text:"Foto mempelai wanita berhasil diperbarui"}),s(e=>({...e,bride_photo:r.publicUrl})),t(a.data)):U({type:"error",text:a.error||"Gagal menyimpan URL gambar"})})},W=async a=>{let n=a.target.files?.[0];if(!n||!e?.id)return;U(null),B(!0);let r=await D(n);if(B(!1),!r.success)return U({type:"error",text:r.error||"Gagal mengunggah audio"});c(async()=>{let a=await N(e.id,{music_url:r.publicUrl});a.success&&a.data?(U({type:"success",text:"Musik berhasil diperbarui"}),t(a.data)):U({type:"error",text:a.error||"Gagal menyimpan URL musik"})})},[$,q]=(0,n.useState)(!1),K=async a=>{let n=a.target.files?.[0];if(!n||!e?.id)return;U(null),q(!0);let r=await D(n);if(q(!1),!r.success)return U({type:"error",text:r.error||"Gagal mengunggah gambar latar"});c(async()=>{let a=await N(e.id,{background_image:r.publicUrl});a.success&&a.data?(U({type:"success",text:"Gambar latar berhasil diperbarui"}),s(e=>({...e,background_image:r.publicUrl})),t(a.data)):U({type:"error",text:a.error||"Gagal menyimpan URL gambar latar"})})},[V,Y]=(0,n.useState)(!1),X=async a=>{let n=a.target.files?.[0];if(!n||!e?.id)return;U(null),Y(!0);let r=await D(n);if(Y(!1),!r.success)return U({type:"error",text:r.error||"Gagal mengunggah gambar splash"});c(async()=>{let a=await N(e.id,{splash_image:r.publicUrl});a.success&&a.data?(U({type:"success",text:"Gambar splash berhasil diperbarui"}),s(e=>({...e,splash_image:r.publicUrl})),t(a.data)):U({type:"error",text:a.error||"Gagal menyimpan URL gambar splash"})})},J=async(a,n)=>{e?.id&&(U(null),c(async()=>{if(!n||""===n.trim())return void U({type:"error",text:"URL kosong — unggah file terlebih dahulu atau isi URL."});let r={};r[a]=n;let i=await N(e.id,r);i.success&&i.data?(U({type:"success",text:"URL berhasil disimpan"}),s(e=>({...e,[a]:n})),t(i.data)):U({type:"error",text:i.error||"Gagal menyimpan URL"})}))},Q=p.default.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY,[Z,ee]=(0,n.useState)([]),et=(0,n.useRef)(null),ea=(0,n.useRef)(null),en=(0,n.useRef)(null),er=(0,n.useRef)(null);return(0,n.useEffect)(()=>{(()=>{if(window.google?.maps?.places||!Q)return;let e=`https://maps.googleapis.com/maps/api/js?key=${Q}&libraries=places`;if(document.querySelector('script[src^="https://maps.googleapis.com/maps/api/js"]'))return;let t=document.createElement("script");t.src=e,t.async=!0,t.defer=!0,document.head.appendChild(t)})();let e=setInterval(()=>{if(window.google?.maps?.places&&!et.current)try{et.current=new window.google.maps.places.AutocompleteService,ea.current=new window.google.maps.places.PlacesService(document.createElement("div"))}catch(e){}},300);return()=>clearInterval(e)},[]),(0,n.useEffect)(()=>{let e=r.place_query||"";if(!e||e.length<3)return ee([]);let t=et.current;t&&t.getPlacePredictions({input:e},(e,t)=>{"OK"===t&&Array.isArray(e)?ee(e):ee([])})},[r.place_query]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"max-w-4xl",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"font-serif text-2xl text-foreground",children:"Pengaturan Undangan"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Kelola informasi pernikahan Anda"})]}),(0,a.jsxs)("form",{onSubmit:v,className:"space-y-8",children:[(0,a.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"font-medium text-foreground mb-4",children:"Informasi Mempelai"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{htmlFor:"groom_name",children:"Nama Mempelai Pria"}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-4",children:[(0,a.jsx)("div",{className:"w-24 h-24 rounded-full overflow-hidden border-2 border-gold/30 flex-shrink-0 bg-muted flex items-center justify-center",children:e?.groom_photo?(0,a.jsx)("img",{src:e.groom_photo,alt:"Groom",className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full","aria-hidden":!0})}),(0,a.jsxs)("div",{className:"flex-1 w-full",children:[(0,a.jsx)(g.Input,{id:"groom_name",name:"groom_name",value:r.groom_name||"",onChange:m,className:"bg-white/50"}),(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[(0,a.jsx)("input",{ref:en,type:"file",accept:"image/*",onChange:G,className:"hidden"}),(0,a.jsx)(h.Button,{size:"sm",onClick:()=>en.current?.click(),children:"Pilih Foto"}),(0,a.jsx)(h.Button,{size:"sm",onClick:()=>J("groom_photo",r.groom_photo||e?.groom_photo||""),children:"Simpan Foto"}),(0,a.jsx)(h.Button,{size:"sm",variant:"ghost",onClick:async()=>{e?.id&&(U(null),c(async()=>{let a=await N(e.id,{groom_photo:null});a.success&&a.data?(U({type:"success",text:"Foto mempelai pria dihapus"}),t(a.data)):U({type:"error",text:a.error||"Gagal menghapus foto"})}))},children:"Hapus Foto"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{htmlFor:"bride_name",children:"Nama Mempelai Wanita"}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-4",children:[(0,a.jsx)("div",{className:"w-24 h-24 rounded-full overflow-hidden border-2 border-gold/30 flex-shrink-0 bg-muted flex items-center justify-center",children:e?.bride_photo?(0,a.jsx)("img",{src:e.bride_photo,alt:"Bride",className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full","aria-hidden":!0})}),(0,a.jsxs)("div",{className:"flex-1 w-full",children:[(0,a.jsx)(g.Input,{id:"bride_name",name:"bride_name",value:r.bride_name||"",onChange:m,className:"bg-white/50"}),(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[(0,a.jsx)("input",{ref:er,type:"file",accept:"image/*",onChange:H,className:"hidden"}),(0,a.jsx)(h.Button,{size:"sm",onClick:()=>er.current?.click(),children:"Pilih Foto"}),(0,a.jsx)(h.Button,{size:"sm",onClick:()=>J("bride_photo",r.bride_photo||e?.bride_photo||""),children:"Simpan Foto"}),(0,a.jsx)(h.Button,{size:"sm",variant:"ghost",onClick:async()=>{e?.id&&(U(null),c(async()=>{let a=await N(e.id,{bride_photo:null});a.success&&a.data?(U({type:"success",text:"Foto mempelai wanita dihapus"}),t(a.data)):U({type:"error",text:a.error||"Gagal menghapus foto"})}))},children:"Hapus Foto"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{htmlFor:"groom_father",children:"Ayah Mempelai Pria"}),(0,a.jsx)(g.Input,{id:"groom_father",name:"groom_father",value:r.groom_father||"",onChange:m,className:"bg-white/50"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{htmlFor:"bride_father",children:"Ayah Mempelai Wanita"}),(0,a.jsx)(g.Input,{id:"bride_father",name:"bride_father",value:r.bride_father||"",onChange:m,className:"bg-white/50"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{htmlFor:"groom_mother",children:"Ibu Mempelai Pria"}),(0,a.jsx)(g.Input,{id:"groom_mother",name:"groom_mother",value:r.groom_mother||"",onChange:m,className:"bg-white/50"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{htmlFor:"bride_mother",children:"Ibu Mempelai Wanita"}),(0,a.jsx)(g.Input,{id:"bride_mother",name:"bride_mother",value:r.bride_mother||"",onChange:m,className:"bg-white/50"})]})]})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"font-medium text-foreground mb-4",children:"Informasi Acara"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,a.jsx)(x.Label,{htmlFor:"wedding_date",children:"Tanggal Pernikahan"}),(0,a.jsx)(g.Input,{id:"wedding_date",name:"wedding_date",type:"datetime-local",value:r.wedding_date?.slice(0,16)||"",onChange:m,className:"bg-white/50"})]}),(0,a.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,a.jsx)(x.Label,{htmlFor:"countdown_target_date",children:"Waktu Target Countdown (GMT+7)"}),(0,a.jsx)(g.Input,{id:"countdown_target_date",name:"countdown_target_date",type:"datetime-local",value:r.countdown_target_date?.slice(0,16)||"",onChange:m,placeholder:"Kosongkan untuk menggunakan tanggal pernikahan",className:"bg-white/50"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Atur waktu spesifik untuk countdown. Kosongkan jika ingin menggunakan tanggal pernikahan."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{htmlFor:"akad_time",children:"Waktu Akad (Mulai)"}),(0,a.jsx)(g.Input,{id:"akad_time",name:"akad_time",value:r.akad_time||"",onChange:m,placeholder:"08:00",className:"bg-white/50"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{htmlFor:"akad_time_end",children:"Waktu Akad (Selesai)"}),(0,a.jsx)(g.Input,{id:"akad_time_end",name:"akad_time_end",value:r.akad_time_end||"",onChange:m,placeholder:"10:00",className:"bg-white/50"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{htmlFor:"reception_time",children:"Waktu Resepsi (Mulai)"}),(0,a.jsx)(g.Input,{id:"reception_time",name:"reception_time",value:r.reception_time||"",onChange:m,placeholder:"11:00",className:"bg-white/50"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{htmlFor:"reception_time_end",children:"Waktu Resepsi (Selesai)"}),(0,a.jsx)(g.Input,{id:"reception_time_end",name:"reception_time_end",value:r.reception_time_end||"",onChange:m,placeholder:"14:00",className:"bg-white/50"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{htmlFor:"akad_location",children:"Lokasi Akad"}),(0,a.jsx)(g.Input,{id:"akad_location",name:"akad_location",value:r.akad_location||"",onChange:m,className:"bg-white/50"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{htmlFor:"reception_location",children:"Lokasi Resepsi"}),(0,a.jsx)(g.Input,{id:"reception_location",name:"reception_location",value:r.reception_location||"",onChange:m,className:"bg-white/50"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{htmlFor:"akad_address",children:"Alamat Akad"}),(0,a.jsx)(g.Input,{id:"akad_address",name:"akad_address",value:r.akad_address||"",onChange:m,className:"bg-white/50"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{htmlFor:"reception_address",children:"Alamat Resepsi"}),(0,a.jsx)(g.Input,{id:"reception_address",name:"reception_address",value:r.reception_address||"",onChange:m,className:"bg-white/50"})]})]})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"font-medium text-foreground mb-4",children:"Lokasi di Peta"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{htmlFor:"map_input",children:"Input Lokasi Google Maps"}),(0,a.jsx)(y,{id:"map_input",placeholder:"Masukkan salah satu: 1. Latitude, Longitude (contoh: -7.395261, 109.244876) 2. Google Maps URL (contoh: https://maps.app.goo.gl/...) 3. Iframe embed code",rows:4,onChange:e=>{let t=e.target.value,a=(0,k.extractCoordinatesFromMapInput)(t);a&&s(e=>({...e,venue_lat:a.lat,venue_lng:a.lng}))},className:"bg-white/50 font-mono text-sm"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Paste koordinat, URL Google Maps, atau kode iframe embed. Koordinat akan otomatis terdeteksi."})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{htmlFor:"venue_lat",children:"Latitude (Terdeteksi)"}),(0,a.jsx)(g.Input,{id:"venue_lat",name:"venue_lat",type:"number",step:"any",value:r.venue_lat||"",onChange:m,placeholder:"-6.2088",className:"bg-white/50",readOnly:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{htmlFor:"venue_lng",children:"Longitude (Terdeteksi)"}),(0,a.jsx)(g.Input,{id:"venue_lng",name:"venue_lng",type:"number",step:"any",value:r.venue_lng||"",onChange:m,placeholder:"106.8456",className:"bg-white/50",readOnly:!0})]})]})]})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"font-medium text-foreground mb-4",children:"Kutipan"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{htmlFor:"quote",children:"Kutipan"}),(0,a.jsx)(y,{id:"quote",name:"quote",value:r.quote||"",onChange:m,rows:3,className:"bg-white/50"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{htmlFor:"quote_source",children:"Sumber Kutipan"}),(0,a.jsx)(g.Input,{id:"quote_source",name:"quote_source",value:r.quote_source||"",onChange:m,placeholder:"QS. Ar-Rum: 21",className:"bg-white/50"})]})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"font-medium text-foreground mb-4",children:"Pengaturan Halaman (Cover & Musik)"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:"Cover Image"}),e?.hero_image?(0,a.jsx)("img",{src:e.hero_image,alt:"Cover",className:"w-full h-48 object-cover rounded-md mb-2"}):(0,a.jsx)("div",{className:"w-full h-48 bg-muted rounded-md flex items-center justify-center text-sm",children:"No cover image"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:z}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(g.Input,{placeholder:"Atau masukkan URL gambar",value:r.hero_image||e?.hero_image||"",onChange:e=>s(t=>({...t,hero_image:e.target.value}))}),(0,a.jsx)(h.Button,{size:"sm",onClick:()=>J("hero_image",r.hero_image||e?.hero_image||""),children:"Simpan"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:"Section Background (Pattern)"}),e?.background_image?(0,a.jsx)("img",{src:e.background_image,alt:"Background pattern",className:"w-full h-48 object-cover rounded-md mb-2"}):(0,a.jsx)("div",{className:"w-full h-48 bg-muted rounded-md flex items-center justify-center text-sm",children:"No background pattern"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:K}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(g.Input,{placeholder:"Atau masukkan URL gambar pattern",value:r.background_image||e?.background_image||"",onChange:e=>s(t=>({...t,background_image:e.target.value}))}),(0,a.jsx)(h.Button,{size:"sm",onClick:()=>J("background_image",r.background_image||e?.background_image||""),children:"Simpan"}),(0,a.jsx)(h.Button,{size:"sm",variant:"ghost",onClick:async()=>{e?.id&&(U(null),c(async()=>{let a=await N(e.id,{background_image:null});a.success&&a.data?(U({type:"success",text:"Gambar latar dihapus"}),s(e=>({...e,background_image:null})),t(a.data)):U({type:"error",text:a.error||"Gagal menghapus gambar latar"})}))},children:"Hapus"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:"Musik Latar"}),e?.music_url?(0,a.jsx)("audio",{controls:!0,src:e.music_url,className:"w-full mb-2"}):(0,a.jsx)("div",{className:"w-full h-12 bg-muted rounded-md flex items-center justify-center text-sm",children:"No music set"}),(0,a.jsx)("input",{type:"file",accept:"audio/*",onChange:W}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(g.Input,{placeholder:"Atau masukkan URL audio",value:r.music_url||e?.music_url||"",onChange:e=>s(t=>({...t,music_url:e.target.value}))}),(0,a.jsx)(h.Button,{size:"sm",onClick:()=>J("music_url",r.music_url||e?.music_url||""),children:"Simpan"})]})]})]}),F&&(0,a.jsx)("div",{className:`p-3 mt-3 rounded-lg ${"success"===F.type?"bg-green-50 text-green-700":"bg-destructive/10 text-destructive"}`,children:F.text}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(x.Label,{children:"Template Pesan WhatsApp"}),(0,a.jsx)(y,{placeholder:"Gunakan {{name}} dan {{link}} sebagai placeholder. Contoh: Halo <b>{{name}}</b>!",value:r.whatsapp_template||e?.whatsapp_template||"",onChange:e=>s(t=>({...t,whatsapp_template:e.target.value})),rows:3,className:"bg-white/50"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:["Anda dapat menggunakan tag HTML sederhana atau markdown-like untuk memformat pesan: ",(0,a.jsx)("b",{children:"<b>bold</b>"})," → ",(0,a.jsx)("code",{children:"*bold*"}),", ",(0,a.jsx)("b",{children:"<i>italic</i>"})," → ",(0,a.jsx)("code",{children:"_italic_"}),", ",(0,a.jsx)("b",{children:"<s>strike</s>"})," → ",(0,a.jsx)("code",{children:"~strike~"}),", dan ",(0,a.jsx)("b",{children:"<code>"})," untuk monospace. (Catatan: underline tidak didukung oleh WhatsApp; akan dikonversi ke italic.)"]}),(0,a.jsx)("div",{className:"flex justify-end mt-2",children:(0,a.jsx)(h.Button,{size:"sm",onClick:()=>J("whatsapp_template",r.whatsapp_template||e?.whatsapp_template||""),children:"Simpan Template"})})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-6 mt-6",children:[(0,a.jsx)("h3",{className:"font-medium text-foreground mb-4",children:"Pengaturan Situs"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:"Nama Situs"}),(0,a.jsx)(g.Input,{value:r.site_name||e?.site_name||"",onChange:e=>s(t=>({...t,site_name:e.target.value})),placeholder:"Nama situs, mis. Undangan Ahmad & Fatimah",className:"bg-white/50"}),(0,a.jsx)("div",{className:"flex justify-end mt-2",children:(0,a.jsx)(h.Button,{size:"sm",onClick:()=>J("site_name",r.site_name||e?.site_name||""),children:"Simpan Nama Situs"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:"Favicon"}),e?.favicon?(0,a.jsx)("img",{src:e.favicon,alt:"favicon",className:"w-12 h-12 object-contain rounded"}):(0,a.jsx)("div",{className:"w-12 h-12 bg-muted rounded flex items-center justify-center text-sm",children:"No favicon"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{let t=e.target.files?.[0];if(!t)return;U(null);let a=new FormData;a.append("file",t),a.append("filename",t.name),a.append("folder","site");let n=await fetch("/api/upload",{method:"POST",body:a}),r=await n.json();if(!r.success)return U({type:"error",text:r.error||"Gagal mengunggah favicon"});let s=r.publicUrl||r.publicURL||r.public_url;s&&J("favicon",s)}}),(0,a.jsx)("div",{className:"flex justify-end mt-2",children:(0,a.jsx)(h.Button,{size:"sm",onClick:()=>J("favicon",r.favicon||e?.favicon||""),children:"Simpan Favicon"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium text-foreground mb-2",children:"Splash Screen"}),(0,a.jsx)(x.Label,{children:"Splash Background"}),e?.splash_image?(0,a.jsx)("img",{src:e.splash_image,alt:"Splash",className:"w-full h-48 object-cover rounded-md mb-2"}):(0,a.jsx)("div",{className:"w-full h-48 bg-muted rounded-md flex items-center justify-center text-sm",children:"No splash image"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:X}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,a.jsx)(g.Input,{placeholder:"Atau masukkan URL gambar splash",value:r.splash_image||e?.splash_image||"",onChange:e=>s(t=>({...t,splash_image:e.target.value}))}),(0,a.jsx)(h.Button,{size:"sm",onClick:()=>J("splash_image",r.splash_image||e?.splash_image||""),children:"Simpan"}),(0,a.jsx)(h.Button,{size:"sm",variant:"outline",onClick:()=>l(!0),children:"Preview Splash"}),(0,a.jsx)(h.Button,{size:"sm",variant:"ghost",onClick:async()=>{e?.id&&(U(null),c(async()=>{let a=await N(e.id,{splash_image:null});a.success&&a.data?(U({type:"success",text:"Gambar splash dihapus"}),s(e=>({...e,splash_image:null})),t(a.data)):U({type:"error",text:a.error||"Gagal menghapus gambar splash"})}))},children:"Hapus"})]}),(0,a.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,a.jsx)(x.Label,{children:"Overlay Mode & Opacity"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"radio",name:"splash_overlay_mode",value:"light",checked:"light"===(r.splash_overlay_mode||e?.splash_overlay_mode||"light"),onChange:()=>s(e=>({...e,splash_overlay_mode:"light"}))}),(0,a.jsx)("span",{className:"text-sm",children:"Light"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"radio",name:"splash_overlay_mode",value:"dark",checked:"dark"===(r.splash_overlay_mode||e?.splash_overlay_mode||"light"),onChange:()=>s(e=>({...e,splash_overlay_mode:"dark"}))}),(0,a.jsx)("span",{className:"text-sm",children:"Dark"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"radio",name:"splash_overlay_mode",value:"custom",checked:"custom"===(r.splash_overlay_mode||e?.splash_overlay_mode||"light"),onChange:()=>s(e=>({...e,splash_overlay_mode:"custom"}))}),(0,a.jsx)("span",{className:"text-sm",children:"Custom"})]})]}),(r.splash_overlay_mode??e?.splash_overlay_mode??"light")==="custom"&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.Input,{type:"color",value:r.splash_overlay_color||e?.splash_overlay_color||"#000000",onChange:e=>s(t=>({...t,splash_overlay_color:e.target.value})),className:"w-12 h-10 p-0"}),(0,a.jsx)(g.Input,{value:r.splash_overlay_color||e?.splash_overlay_color||"#000000",onChange:e=>s(t=>({...t,splash_overlay_color:e.target.value})),className:"w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(x.Label,{children:["Overlay Opacity (",String(r.splash_overlay_opacity??e?.splash_overlay_opacity??.8),")"]}),(0,a.jsx)("input",{type:"range",min:0,max:100,value:Math.round((r.splash_overlay_opacity??e?.splash_overlay_opacity??.8)*100),onChange:e=>{let t=Number(e.target.value)/100;s(e=>({...e,splash_overlay_opacity:t}))},className:"w-full"})]}),(0,a.jsx)("div",{className:"flex justify-end mt-2",children:(0,a.jsx)(h.Button,{size:"sm",onClick:async()=>{if(!e?.id)return;let a={};a.splash_overlay_mode=r.splash_overlay_mode??e?.splash_overlay_mode??"light",a.splash_overlay_color=r.splash_overlay_color??e?.splash_overlay_color??null,a.splash_overlay_opacity=Number(r.splash_overlay_opacity??e?.splash_overlay_opacity??.8),U(null),c(async()=>{let n=await N(e.id,a);n.success&&n.data?(U({type:"success",text:"Pengaturan overlay splash disimpan"}),s(e=>({...e,...a})),t(n.data)):U({type:"error",text:n.error||"Gagal menyimpan pengaturan overlay"})})},children:"Simpan Overlay"})})]})]})]})]})]}),d&&(0,a.jsx)("div",{className:`p-4 rounded-xl ${"success"===d.type?"bg-green-500/10 border border-green-500/20 text-green-600":"bg-destructive/10 border border-destructive/20 text-destructive"}`,children:d.text}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(h.Button,{type:"submit",disabled:o,className:"bg-gold hover:bg-gold/90 text-white",children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j,{className:"w-4 h-4 mr-2 animate-spin"}),"Menyimpan..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b,{className:"w-4 h-4 mr-2"}),"Simpan Pengaturan"]})})})]}),(0,a.jsxs)("div",{className:"mt-8 glass rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"font-medium text-foreground mb-4",children:"Ganti Password Admin"}),(0,a.jsxs)("form",{onSubmit:A,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(x.Label,{htmlFor:"new_password",children:"Password baru"}),(0,a.jsx)(g.Input,{id:"new_password",type:"password",value:w,onChange:e=>C(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x.Label,{htmlFor:"confirm_password",children:"Konfirmasi password"}),(0,a.jsx)(g.Input,{id:"confirm_password",type:"password",value:S,onChange:e=>L(e.target.value)})]}),E&&(0,a.jsx)("div",{className:`p-3 rounded-lg ${"success"===E.type?"bg-green-50 text-green-700":"bg-destructive/10 text-destructive"}`,children:E.text}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(h.Button,{type:"submit",className:"bg-red-600 hover:bg-red-700 text-white",disabled:R,children:R?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j,{className:"w-4 h-4 mr-2 animate-spin"}),"Mengubah..."]}):"Ganti Password"})})]})]})]}),i&&(0,a.jsx)(f.SplashScreen,{groomName:r.groom_name||e?.groom_name||"",brideName:r.bride_name||e?.bride_name||"",onOpen:()=>l(!1),splashImage:r.splash_image||e?.splash_image||null,overlayOpacity:r.splash_overlay_opacity??e?.splash_overlay_opacity??.8,overlayMode:r.splash_overlay_mode??e?.splash_overlay_mode??"light",overlayColor:(r.splash_overlay_color??e?.splash_overlay_color)||null})]})}let S=(0,s.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),L=(0,s.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),R=(0,s.default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),T=(0,s.default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),E=(0,s.default)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),P=(0,s.default)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var A=e.i(65199),M=e.i(61581);function O(e,t,{checkForDefaultPrevented:a=!0}={}){return function(n){if(e?.(n),!1===a||!n.defaultPrevented)return t?.(n)}}var I=e.i(73552);function B(e,t=[]){let r=[],s=()=>{let t=r.map(e=>n.createContext(e));return function(a){let r=a?.[e]||t;return n.useMemo(()=>({[`__scope${e}`]:{...a,[e]:r}}),[a,r])}};return s.scopeName=e,[function(t,s){let i=n.createContext(s),l=r.length;r=[...r,s];let o=t=>{let{scope:r,children:s,...o}=t,c=r?.[e]?.[l]||i,d=n.useMemo(()=>o,Object.values(o));return(0,a.jsx)(c.Provider,{value:d,children:s})};return o.displayName=t+"Provider",[o,function(a,r){let o=r?.[e]?.[l]||i,c=n.useContext(o);if(c)return c;if(void 0!==s)return s;throw Error(`\`${a}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=a.reduce((t,{useScope:a,scopeName:n})=>{let r=a(e)[`__scope${n}`];return{...t,...r}},{});return n.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return a.scopeName=t.scopeName,a}(s,...t)]}var F=e.i(39408);function U(e){let t=n.useRef(e);return n.useEffect(()=>{t.current=e}),n.useMemo(()=>(...e)=>t.current?.(...e),[])}var D="dismissableLayer.update",z=n.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),G=n.forwardRef((e,r)=>{let{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:o,onInteractOutside:c,onDismiss:d,...u}=e,m=n.useContext(z),[p,h]=n.useState(null),f=p?.ownerDocument??globalThis?.document,[,g]=n.useState({}),x=(0,I.useComposedRefs)(r,e=>h(e)),v=Array.from(m.layers),[y]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),b=v.indexOf(y),j=p?v.indexOf(p):-1,w=m.layersWithOutsidePointerEventsDisabled.size>0,N=j>=b,_=function(e,t=globalThis?.document){let a=U(e),r=n.useRef(!1),s=n.useRef(()=>{});return n.useEffect(()=>{let e=e=>{if(e.target&&!r.current){let n=function(){W("dismissableLayer.pointerDownOutside",a,r,{discrete:!0})},r={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",s.current),s.current=n,t.addEventListener("click",s.current,{once:!0})):n()}else t.removeEventListener("click",s.current);r.current=!1},n=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(n),t.removeEventListener("pointerdown",e),t.removeEventListener("click",s.current)}},[t,a]),{onPointerDownCapture:()=>r.current=!0}}(e=>{let t=e.target,a=[...m.branches].some(e=>e.contains(t));N&&!a&&(l?.(e),c?.(e),e.defaultPrevented||d?.())},f),k=function(e,t=globalThis?.document){let a=U(e),r=n.useRef(!1);return n.useEffect(()=>{let e=e=>{e.target&&!r.current&&W("dismissableLayer.focusOutside",a,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,a]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}(e=>{let t=e.target;![...m.branches].some(e=>e.contains(t))&&(o?.(e),c?.(e),e.defaultPrevented||d?.())},f);return!function(e,t=globalThis?.document){let a=U(e);n.useEffect(()=>{let e=e=>{"Escape"===e.key&&a(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[a,t])}(e=>{j===m.layers.size-1&&(i?.(e),!e.defaultPrevented&&d&&(e.preventDefault(),d()))},f),n.useEffect(()=>{if(p)return s&&(0===m.layersWithOutsidePointerEventsDisabled.size&&(t=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(p)),m.layers.add(p),H(),()=>{s&&1===m.layersWithOutsidePointerEventsDisabled.size&&(f.body.style.pointerEvents=t)}},[p,f,s,m]),n.useEffect(()=>()=>{p&&(m.layers.delete(p),m.layersWithOutsidePointerEventsDisabled.delete(p),H())},[p,m]),n.useEffect(()=>{let e=()=>g({});return document.addEventListener(D,e),()=>document.removeEventListener(D,e)},[]),(0,a.jsx)(F.Primitive.div,{...u,ref:x,style:{pointerEvents:w?N?"auto":"none":void 0,...e.style},onFocusCapture:O(e.onFocusCapture,k.onFocusCapture),onBlurCapture:O(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:O(e.onPointerDownCapture,_.onPointerDownCapture)})});function H(){let e=new CustomEvent(D);document.dispatchEvent(e)}function W(e,t,a,{discrete:n}){let r=a.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:a});t&&r.addEventListener(e,t,{once:!0}),n?(0,F.dispatchDiscreteCustomEvent)(r,s):r.dispatchEvent(s)}G.displayName="DismissableLayer",n.forwardRef((e,t)=>{let r=n.useContext(z),s=n.useRef(null),i=(0,I.useComposedRefs)(t,s);return n.useEffect(()=>{let e=s.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),(0,a.jsx)(F.Primitive.div,{...e,ref:i})}).displayName="DismissableLayerBranch";var $=globalThis?.document?n.useLayoutEffect:()=>{},q=n["useId".toString()]||(()=>void 0),K=0;let V=["top","right","bottom","left"],Y=Math.min,X=Math.max,J=Math.round,Q=Math.floor,Z=e=>({x:e,y:e}),ee={left:"right",right:"left",bottom:"top",top:"bottom"},et={start:"end",end:"start"};function ea(e,t){return"function"==typeof e?e(t):e}function en(e){return e.split("-")[0]}function er(e){return e.split("-")[1]}function es(e){return"x"===e?"y":"x"}function ei(e){return"y"===e?"height":"width"}let el=new Set(["top","bottom"]);function eo(e){return el.has(en(e))?"y":"x"}function ec(e){return e.replace(/start|end/g,e=>et[e])}let ed=["left","right"],eu=["right","left"],em=["top","bottom"],ep=["bottom","top"];function eh(e){return e.replace(/left|right|bottom|top/g,e=>ee[e])}function ef(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function eg(e){let{x:t,y:a,width:n,height:r}=e;return{width:n,height:r,top:a,left:t,right:t+n,bottom:a+r,x:t,y:a}}function ex(e,t,a){let n,{reference:r,floating:s}=e,i=eo(t),l=es(eo(t)),o=ei(l),c=en(t),d="y"===i,u=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,p=r[o]/2-s[o]/2;switch(c){case"top":n={x:u,y:r.y-s.height};break;case"bottom":n={x:u,y:r.y+r.height};break;case"right":n={x:r.x+r.width,y:m};break;case"left":n={x:r.x-s.width,y:m};break;default:n={x:r.x,y:r.y}}switch(er(t)){case"start":n[l]-=p*(a&&d?-1:1);break;case"end":n[l]+=p*(a&&d?-1:1)}return n}let ev=async(e,t,a)=>{let{placement:n="bottom",strategy:r="absolute",middleware:s=[],platform:i}=a,l=s.filter(Boolean),o=await (null==i.isRTL?void 0:i.isRTL(t)),c=await i.getElementRects({reference:e,floating:t,strategy:r}),{x:d,y:u}=ex(c,n,o),m=n,p={},h=0;for(let a=0;a<l.length;a++){let{name:s,fn:f}=l[a],{x:g,y:x,data:v,reset:y}=await f({x:d,y:u,initialPlacement:n,placement:m,strategy:r,middlewareData:p,rects:c,platform:i,elements:{reference:e,floating:t}});d=null!=g?g:d,u=null!=x?x:u,p={...p,[s]:{...p[s],...v}},y&&h<=50&&(h++,"object"==typeof y&&(y.placement&&(m=y.placement),y.rects&&(c=!0===y.rects?await i.getElementRects({reference:e,floating:t,strategy:r}):y.rects),{x:d,y:u}=ex(c,m,o)),a=-1)}return{x:d,y:u,placement:m,strategy:r,middlewareData:p}};async function ey(e,t){var a;void 0===t&&(t={});let{x:n,y:r,platform:s,rects:i,elements:l,strategy:o}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:m=!1,padding:p=0}=ea(t,e),h=ef(p),f=l[m?"floating"===u?"reference":"floating":u],g=eg(await s.getClippingRect({element:null==(a=await (null==s.isElement?void 0:s.isElement(f)))||a?f:f.contextElement||await (null==s.getDocumentElement?void 0:s.getDocumentElement(l.floating)),boundary:c,rootBoundary:d,strategy:o})),x="floating"===u?{x:n,y:r,width:i.floating.width,height:i.floating.height}:i.reference,v=await (null==s.getOffsetParent?void 0:s.getOffsetParent(l.floating)),y=await (null==s.isElement?void 0:s.isElement(v))&&await (null==s.getScale?void 0:s.getScale(v))||{x:1,y:1},b=eg(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:v,strategy:o}):x);return{top:(g.top-b.top+h.top)/y.y,bottom:(b.bottom-g.bottom+h.bottom)/y.y,left:(g.left-b.left+h.left)/y.x,right:(b.right-g.right+h.right)/y.x}}function eb(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ej(e){return V.some(t=>e[t]>=0)}let ew=new Set(["left","top"]);async function eN(e,t){let{placement:a,platform:n,elements:r}=e,s=await (null==n.isRTL?void 0:n.isRTL(r.floating)),i=en(a),l=er(a),o="y"===eo(a),c=ew.has(i)?-1:1,d=s&&o?-1:1,u=ea(t,e),{mainAxis:m,crossAxis:p,alignmentAxis:h}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return l&&"number"==typeof h&&(p="end"===l?-1*h:h),o?{x:p*d,y:m*c}:{x:m*c,y:p*d}}function e_(){return"undefined"!=typeof window}function ek(e){return eL(e)?(e.nodeName||"").toLowerCase():"#document"}function eC(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function eS(e){var t;return null==(t=(eL(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function eL(e){return!!e_()&&(e instanceof Node||e instanceof eC(e).Node)}function eR(e){return!!e_()&&(e instanceof Element||e instanceof eC(e).Element)}function eT(e){return!!e_()&&(e instanceof HTMLElement||e instanceof eC(e).HTMLElement)}function eE(e){return!!e_()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof eC(e).ShadowRoot)}let eP=new Set(["inline","contents"]);function eA(e){let{overflow:t,overflowX:a,overflowY:n,display:r}=eW(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+a)&&!eP.has(r)}let eM=new Set(["table","td","th"]),eO=[":popover-open",":modal"];function eI(e){return eO.some(t=>{try{return e.matches(t)}catch(e){return!1}})}let eB=["transform","translate","scale","rotate","perspective"],eF=["transform","translate","scale","rotate","perspective","filter"],eU=["paint","layout","strict","content"];function eD(e){let t=ez(),a=eR(e)?eW(e):e;return eB.some(e=>!!a[e]&&"none"!==a[e])||!!a.containerType&&"normal"!==a.containerType||!t&&!!a.backdropFilter&&"none"!==a.backdropFilter||!t&&!!a.filter&&"none"!==a.filter||eF.some(e=>(a.willChange||"").includes(e))||eU.some(e=>(a.contain||"").includes(e))}function ez(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let eG=new Set(["html","body","#document"]);function eH(e){return eG.has(ek(e))}function eW(e){return eC(e).getComputedStyle(e)}function e$(e){return eR(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function eq(e){if("html"===ek(e))return e;let t=e.assignedSlot||e.parentNode||eE(e)&&e.host||eS(e);return eE(t)?t.host:t}function eK(e,t,a){var n;void 0===t&&(t=[]),void 0===a&&(a=!0);let r=function e(t){let a=eq(t);return eH(a)?t.ownerDocument?t.ownerDocument.body:t.body:eT(a)&&eA(a)?a:e(a)}(e),s=r===(null==(n=e.ownerDocument)?void 0:n.body),i=eC(r);if(s){let e=eV(i);return t.concat(i,i.visualViewport||[],eA(r)?r:[],e&&a?eK(e):[])}return t.concat(r,eK(r,[],a))}function eV(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function eY(e){let t=eW(e),a=parseFloat(t.width)||0,n=parseFloat(t.height)||0,r=eT(e),s=r?e.offsetWidth:a,i=r?e.offsetHeight:n,l=J(a)!==s||J(n)!==i;return l&&(a=s,n=i),{width:a,height:n,$:l}}function eX(e){return eR(e)?e:e.contextElement}function eJ(e){let t=eX(e);if(!eT(t))return Z(1);let a=t.getBoundingClientRect(),{width:n,height:r,$:s}=eY(t),i=(s?J(a.width):a.width)/n,l=(s?J(a.height):a.height)/r;return i&&Number.isFinite(i)||(i=1),l&&Number.isFinite(l)||(l=1),{x:i,y:l}}let eQ=Z(0);function eZ(e){let t=eC(e);return ez()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:eQ}function e0(e,t,a,n){var r;void 0===t&&(t=!1),void 0===a&&(a=!1);let s=e.getBoundingClientRect(),i=eX(e),l=Z(1);t&&(n?eR(n)&&(l=eJ(n)):l=eJ(e));let o=(void 0===(r=a)&&(r=!1),n&&(!r||n===eC(i))&&r)?eZ(i):Z(0),c=(s.left+o.x)/l.x,d=(s.top+o.y)/l.y,u=s.width/l.x,m=s.height/l.y;if(i){let e=eC(i),t=n&&eR(n)?eC(n):n,a=e,r=eV(a);for(;r&&n&&t!==a;){let e=eJ(r),t=r.getBoundingClientRect(),n=eW(r),s=t.left+(r.clientLeft+parseFloat(n.paddingLeft))*e.x,i=t.top+(r.clientTop+parseFloat(n.paddingTop))*e.y;c*=e.x,d*=e.y,u*=e.x,m*=e.y,c+=s,d+=i,r=eV(a=eC(r))}}return eg({width:u,height:m,x:c,y:d})}function e1(e,t){let a=e$(e).scrollLeft;return t?t.left+a:e0(eS(e)).left+a}function e2(e,t){let a=e.getBoundingClientRect();return{x:a.left+t.scrollLeft-e1(e,a),y:a.top+t.scrollTop}}let e4=new Set(["absolute","fixed"]);function e5(e,t,a){var n;let r;if("viewport"===t)r=function(e,t){let a=eC(e),n=eS(e),r=a.visualViewport,s=n.clientWidth,i=n.clientHeight,l=0,o=0;if(r){s=r.width,i=r.height;let e=ez();(!e||e&&"fixed"===t)&&(l=r.offsetLeft,o=r.offsetTop)}let c=e1(n);if(c<=0){let e=n.ownerDocument,t=e.body,a=getComputedStyle(t),r="CSS1Compat"===e.compatMode&&parseFloat(a.marginLeft)+parseFloat(a.marginRight)||0,i=Math.abs(n.clientWidth-t.clientWidth-r);i<=25&&(s-=i)}else c<=25&&(s+=c);return{width:s,height:i,x:l,y:o}}(e,a);else if("document"===t){let t,a,s,i,l,o,c;n=eS(e),t=eS(n),a=e$(n),s=n.ownerDocument.body,i=X(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),l=X(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight),o=-a.scrollLeft+e1(n),c=-a.scrollTop,"rtl"===eW(s).direction&&(o+=X(t.clientWidth,s.clientWidth)-i),r={width:i,height:l,x:o,y:c}}else if(eR(t)){let e,n,s,i,l,o;n=(e=e0(t,!0,"fixed"===a)).top+t.clientTop,s=e.left+t.clientLeft,i=eT(t)?eJ(t):Z(1),l=t.clientWidth*i.x,o=t.clientHeight*i.y,r={width:l,height:o,x:s*i.x,y:n*i.y}}else{let a=eZ(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return eg(r)}function e3(e){return"static"===eW(e).position}function e6(e,t){if(!eT(e)||"fixed"===eW(e).position)return null;if(t)return t(e);let a=e.offsetParent;return eS(e)===a&&(a=a.ownerDocument.body),a}function e8(e,t){var a;let n=eC(e);if(eI(e))return n;if(!eT(e)){let t=eq(e);for(;t&&!eH(t);){if(eR(t)&&!e3(t))return t;t=eq(t)}return n}let r=e6(e,t);for(;r&&(a=r,eM.has(ek(a)))&&e3(r);)r=e6(r,t);return r&&eH(r)&&e3(r)&&!eD(r)?n:r||function(e){let t=eq(e);for(;eT(t)&&!eH(t);){if(eD(t))return t;if(eI(t))break;t=eq(t)}return null}(e)||n}let e7=async function(e){let t=this.getOffsetParent||e8,a=this.getDimensions,n=await a(e.floating);return{reference:function(e,t,a){let n=eT(t),r=eS(t),s="fixed"===a,i=e0(e,!0,s,t),l={scrollLeft:0,scrollTop:0},o=Z(0);if(n||!n&&!s)if(("body"!==ek(t)||eA(r))&&(l=e$(t)),n){let e=e0(t,!0,s,t);o.x=e.x+t.clientLeft,o.y=e.y+t.clientTop}else r&&(o.x=e1(r));s&&!n&&r&&(o.x=e1(r));let c=!r||n||s?Z(0):e2(r,l);return{x:i.left+l.scrollLeft-o.x-c.x,y:i.top+l.scrollTop-o.y-c.y,width:i.width,height:i.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},e9={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:a,offsetParent:n,strategy:r}=e,s="fixed"===r,i=eS(n),l=!!t&&eI(t.floating);if(n===i||l&&s)return a;let o={scrollLeft:0,scrollTop:0},c=Z(1),d=Z(0),u=eT(n);if((u||!u&&!s)&&(("body"!==ek(n)||eA(i))&&(o=e$(n)),eT(n))){let e=e0(n);c=eJ(n),d.x=e.x+n.clientLeft,d.y=e.y+n.clientTop}let m=!i||u||s?Z(0):e2(i,o);return{width:a.width*c.x,height:a.height*c.y,x:a.x*c.x-o.scrollLeft*c.x+d.x+m.x,y:a.y*c.y-o.scrollTop*c.y+d.y+m.y}},getDocumentElement:eS,getClippingRect:function(e){let{element:t,boundary:a,rootBoundary:n,strategy:r}=e,s=[..."clippingAncestors"===a?eI(t)?[]:function(e,t){let a=t.get(e);if(a)return a;let n=eK(e,[],!1).filter(e=>eR(e)&&"body"!==ek(e)),r=null,s="fixed"===eW(e).position,i=s?eq(e):e;for(;eR(i)&&!eH(i);){let t=eW(i),a=eD(i);a||"fixed"!==t.position||(r=null),(s?!a&&!r:!a&&"static"===t.position&&!!r&&e4.has(r.position)||eA(i)&&!a&&function e(t,a){let n=eq(t);return!(n===a||!eR(n)||eH(n))&&("fixed"===eW(n).position||e(n,a))}(e,i))?n=n.filter(e=>e!==i):r=t,i=eq(i)}return t.set(e,n),n}(t,this._c):[].concat(a),n],i=s[0],l=s.reduce((e,a)=>{let n=e5(t,a,r);return e.top=X(n.top,e.top),e.right=Y(n.right,e.right),e.bottom=Y(n.bottom,e.bottom),e.left=X(n.left,e.left),e},e5(t,i,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:e8,getElementRects:e7,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:a}=eY(e);return{width:t,height:a}},getScale:eJ,isElement:eR,isRTL:function(e){return"rtl"===eW(e).direction}};function te(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}let tt=e=>({name:"arrow",options:e,async fn(t){let{x:a,y:n,placement:r,rects:s,platform:i,elements:l,middlewareData:o}=t,{element:c,padding:d=0}=ea(e,t)||{};if(null==c)return{};let u=ef(d),m={x:a,y:n},p=es(eo(r)),h=ei(p),f=await i.getDimensions(c),g="y"===p,x=g?"clientHeight":"clientWidth",v=s.reference[h]+s.reference[p]-m[p]-s.floating[h],y=m[p]-s.reference[p],b=await (null==i.getOffsetParent?void 0:i.getOffsetParent(c)),j=b?b[x]:0;j&&await (null==i.isElement?void 0:i.isElement(b))||(j=l.floating[x]||s.floating[h]);let w=j/2-f[h]/2-1,N=Y(u[g?"top":"left"],w),_=Y(u[g?"bottom":"right"],w),k=j-f[h]-_,C=j/2-f[h]/2+(v/2-y/2),S=X(N,Y(C,k)),L=!o.arrow&&null!=er(r)&&C!==S&&s.reference[h]/2-(C<N?N:_)-f[h]/2<0,R=L?C<N?C-N:C-k:0;return{[p]:m[p]+R,data:{[p]:S,centerOffset:C-S-R,...L&&{alignmentOffset:R}},reset:L}}});var ta=e.i(58636),tn="undefined"!=typeof document?n.useLayoutEffect:function(){};function tr(e,t){let a,n,r;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((a=e.length)!==t.length)return!1;for(n=a;0!=n--;)if(!tr(e[n],t[n]))return!1;return!0}if((a=(r=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(n=a;0!=n--;)if(!({}).hasOwnProperty.call(t,r[n]))return!1;for(n=a;0!=n--;){let a=r[n];if(("_owner"!==a||!e.$$typeof)&&!tr(e[a],t[a]))return!1}return!0}return e!=e&&t!=t}function ts(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ti(e,t){let a=ts(e);return Math.round(t*a)/a}function tl(e){let t=n.useRef(e);return tn(()=>{t.current=e}),t}var to=n.forwardRef((e,t)=>{let{children:n,width:r=10,height:s=5,...i}=e;return(0,a.jsx)(F.Primitive.svg,{...i,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:(0,a.jsx)("polygon",{points:"0,0 30,0 15,10"})})});to.displayName="Arrow";var tc="Popper",[td,tu]=B(tc),[tm,tp]=td(tc),th=e=>{let{__scopePopper:t,children:r}=e,[s,i]=n.useState(null);return(0,a.jsx)(tm,{scope:t,anchor:s,onAnchorChange:i,children:r})};th.displayName=tc;var tf="PopperAnchor",tg=n.forwardRef((e,t)=>{let{__scopePopper:r,virtualRef:s,...i}=e,l=tp(tf,r),o=n.useRef(null),c=(0,I.useComposedRefs)(t,o);return n.useEffect(()=>{l.onAnchorChange(s?.current||o.current)}),s?null:(0,a.jsx)(F.Primitive.div,{...i,ref:c})});tg.displayName=tf;var tx="PopperContent",[tv,ty]=td(tx),tb=n.forwardRef((e,t)=>{var r,s,i,l,o,c,d,u,m,p,h,f,g;let{__scopePopper:x,side:v="bottom",sideOffset:y=0,align:b="center",alignOffset:j=0,arrowPadding:w=0,avoidCollisions:N=!0,collisionBoundary:_=[],collisionPadding:k=0,sticky:C="partial",hideWhenDetached:S=!1,updatePositionStrategy:L="optimized",onPlaced:R,...T}=e,E=tp(tx,x),[P,A]=n.useState(null),M=(0,I.useComposedRefs)(t,e=>A(e)),[O,B]=n.useState(null),D=function(e){let[t,a]=n.useState(void 0);return $(()=>{if(e){a({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let n,r;if(!Array.isArray(t)||!t.length)return;let s=t[0];if("borderBoxSize"in s){let e=s.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,r=t.blockSize}else n=e.offsetWidth,r=e.offsetHeight;a({width:n,height:r})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}a(void 0)},[e]),t}(O),z=D?.width??0,G=D?.height??0,H="number"==typeof k?k:{top:0,right:0,bottom:0,left:0,...k},W=Array.isArray(_)?_:[_],q=W.length>0,K={padding:H,boundary:W.filter(t_),altBoundary:q},{refs:V,floatingStyles:J,placement:Z,isPositioned:ee,middlewareData:et}=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:a="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:l}={},transform:o=!0,whileElementsMounted:c,open:d}=e,[u,m]=n.useState({x:0,y:0,strategy:a,placement:t,middlewareData:{},isPositioned:!1}),[p,h]=n.useState(r);tr(p,r)||h(r);let[f,g]=n.useState(null),[x,v]=n.useState(null),y=n.useCallback(e=>{e!==N.current&&(N.current=e,g(e))},[]),b=n.useCallback(e=>{e!==_.current&&(_.current=e,v(e))},[]),j=i||f,w=l||x,N=n.useRef(null),_=n.useRef(null),k=n.useRef(u),C=null!=c,S=tl(c),L=tl(s),R=tl(d),T=n.useCallback(()=>{var e,n;let r,s,i;if(!N.current||!_.current)return;let l={placement:t,strategy:a,middleware:p};L.current&&(l.platform=L.current),(e=N.current,n=_.current,r=new Map,i={...(s={platform:e9,...l}).platform,_c:r},ev(e,n,{...s,platform:i})).then(e=>{let t={...e,isPositioned:!1!==R.current};E.current&&!tr(k.current,t)&&(k.current=t,ta.flushSync(()=>{m(t)}))})},[p,t,a,L,R]);tn(()=>{!1===d&&k.current.isPositioned&&(k.current.isPositioned=!1,m(e=>({...e,isPositioned:!1})))},[d]);let E=n.useRef(!1);tn(()=>(E.current=!0,()=>{E.current=!1}),[]),tn(()=>{if(j&&(N.current=j),w&&(_.current=w),j&&w){if(S.current)return S.current(j,w,T);T()}},[j,w,T,S,C]);let P=n.useMemo(()=>({reference:N,floating:_,setReference:y,setFloating:b}),[y,b]),A=n.useMemo(()=>({reference:j,floating:w}),[j,w]),M=n.useMemo(()=>{let e={position:a,left:0,top:0};if(!A.floating)return e;let t=ti(A.floating,u.x),n=ti(A.floating,u.y);return o?{...e,transform:"translate("+t+"px, "+n+"px)",...ts(A.floating)>=1.5&&{willChange:"transform"}}:{position:a,left:t,top:n}},[a,o,A.floating,u.x,u.y]);return n.useMemo(()=>({...u,update:T,refs:P,elements:A,floatingStyles:M}),[u,T,P,A,M])}({strategy:"fixed",placement:v+("center"!==b?"-"+b:""),whileElementsMounted:(...e)=>(function(e,t,a,n){let r;void 0===n&&(n={});let{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:l="function"==typeof ResizeObserver,layoutShift:o="function"==typeof IntersectionObserver,animationFrame:c=!1}=n,d=eX(e),u=s||i?[...d?eK(d):[],...eK(t)]:[];u.forEach(e=>{s&&e.addEventListener("scroll",a,{passive:!0}),i&&e.addEventListener("resize",a)});let m=d&&o?function(e,t){let a,n=null,r=eS(e);function s(){var e;clearTimeout(a),null==(e=n)||e.disconnect(),n=null}return!function i(l,o){void 0===l&&(l=!1),void 0===o&&(o=1),s();let c=e.getBoundingClientRect(),{left:d,top:u,width:m,height:p}=c;if(l||t(),!m||!p)return;let h={rootMargin:-Q(u)+"px "+-Q(r.clientWidth-(d+m))+"px "+-Q(r.clientHeight-(u+p))+"px "+-Q(d)+"px",threshold:X(0,Y(1,o))||1},f=!0;function g(t){let n=t[0].intersectionRatio;if(n!==o){if(!f)return i();n?i(!1,n):a=setTimeout(()=>{i(!1,1e-7)},1e3)}1!==n||te(c,e.getBoundingClientRect())||i(),f=!1}try{n=new IntersectionObserver(g,{...h,root:r.ownerDocument})}catch(e){n=new IntersectionObserver(g,h)}n.observe(e)}(!0),s}(d,a):null,p=-1,h=null;l&&(h=new ResizeObserver(e=>{let[n]=e;n&&n.target===d&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;null==(e=h)||e.observe(t)})),a()}),d&&!c&&h.observe(d),h.observe(t));let f=c?e0(e):null;return c&&function t(){let n=e0(e);f&&!te(f,n)&&a(),f=n,r=requestAnimationFrame(t)}(),a(),()=>{var e;u.forEach(e=>{s&&e.removeEventListener("scroll",a),i&&e.removeEventListener("resize",a)}),null==m||m(),null==(e=h)||e.disconnect(),h=null,c&&cancelAnimationFrame(r)}})(...e,{animationFrame:"always"===L}),elements:{reference:E.anchor},middleware:[{...{name:"offset",options:s=r={mainAxis:y+G,alignmentAxis:j},async fn(e){var t,a;let{x:n,y:r,placement:i,middlewareData:l}=e,o=await eN(e,s);return i===(null==(t=l.offset)?void 0:t.placement)&&null!=(a=l.arrow)&&a.alignmentOffset?{}:{x:n+o.x,y:r+o.y,data:{...o,placement:i}}}},options:[r,void 0]},N&&{...{name:"shift",options:o=l={mainAxis:!0,crossAxis:!1,limiter:"partial"===C?{...(i=void 0,{options:i={},fn(e){let{x:t,y:a,placement:n,rects:r,middlewareData:s}=e,{offset:l=0,mainAxis:o=!0,crossAxis:c=!0}=ea(i,e),d={x:t,y:a},u=eo(n),m=es(u),p=d[m],h=d[u],f=ea(l,e),g="number"==typeof f?{mainAxis:f,crossAxis:0}:{mainAxis:0,crossAxis:0,...f};if(o){let e="y"===m?"height":"width",t=r.reference[m]-r.floating[e]+g.mainAxis,a=r.reference[m]+r.reference[e]-g.mainAxis;p<t?p=t:p>a&&(p=a)}if(c){var x,v;let e="y"===m?"width":"height",t=ew.has(en(n)),a=r.reference[u]-r.floating[e]+(t&&(null==(x=s.offset)?void 0:x[u])||0)+(t?0:g.crossAxis),i=r.reference[u]+r.reference[e]+(t?0:(null==(v=s.offset)?void 0:v[u])||0)-(t?g.crossAxis:0);h<a?h=a:h>i&&(h=i)}return{[m]:p,[u]:h}}}),options:[void 0,void 0]}:void 0,...K},async fn(e){let{x:t,y:a,placement:n}=e,{mainAxis:r=!0,crossAxis:s=!1,limiter:i={fn:e=>{let{x:t,y:a}=e;return{x:t,y:a}}},...l}=ea(o,e),c={x:t,y:a},d=await ey(e,l),u=eo(en(n)),m=es(u),p=c[m],h=c[u];if(r){let e="y"===m?"top":"left",t="y"===m?"bottom":"right",a=p+d[e],n=p-d[t];p=X(a,Y(p,n))}if(s){let e="y"===u?"top":"left",t="y"===u?"bottom":"right",a=h+d[e],n=h-d[t];h=X(a,Y(h,n))}let f=i.fn({...e,[m]:p,[u]:h});return{...f,data:{x:f.x-t,y:f.y-a,enabled:{[m]:r,[u]:s}}}}},options:[l,void 0]},N&&{...{name:"flip",options:d=c={...K},async fn(e){var t,a,n,r,s,i,l,o;let c,u,m,{placement:p,middlewareData:h,rects:f,initialPlacement:g,platform:x,elements:v}=e,{mainAxis:y=!0,crossAxis:b=!0,fallbackPlacements:j,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:_=!0,...k}=ea(d,e);if(null!=(t=h.arrow)&&t.alignmentOffset)return{};let C=en(p),S=eo(g),L=en(g)===g,R=await (null==x.isRTL?void 0:x.isRTL(v.floating)),T=j||(L||!_?[eh(g)]:(c=eh(g),[ec(g),c,ec(c)])),E="none"!==N;!j&&E&&T.push(...(u=er(g),m=function(e,t,a){switch(e){case"top":case"bottom":if(a)return t?eu:ed;return t?ed:eu;case"left":case"right":return t?em:ep;default:return[]}}(en(g),"start"===N,R),u&&(m=m.map(e=>e+"-"+u),_&&(m=m.concat(m.map(ec)))),m));let P=[g,...T],A=await ey(e,k),M=[],O=(null==(a=h.flip)?void 0:a.overflows)||[];if(y&&M.push(A[C]),b){let e,t,a,n,r=(i=p,l=f,void 0===(o=R)&&(o=!1),e=er(i),a=ei(t=es(eo(i))),n="x"===t?e===(o?"end":"start")?"right":"left":"start"===e?"bottom":"top",l.reference[a]>l.floating[a]&&(n=eh(n)),[n,eh(n)]);M.push(A[r[0]],A[r[1]])}if(O=[...O,{placement:p,overflows:M}],!M.every(e=>e<=0)){let e=((null==(n=h.flip)?void 0:n.index)||0)+1,t=P[e];if(t&&("alignment"!==b||S===eo(t)||O.every(e=>eo(e.placement)!==S||e.overflows[0]>0)))return{data:{index:e,overflows:O},reset:{placement:t}};let a=null==(r=O.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:r.placement;if(!a)switch(w){case"bestFit":{let e=null==(s=O.filter(e=>{if(E){let t=eo(e.placement);return t===S||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:s[0];e&&(a=e);break}case"initialPlacement":a=g}if(p!==a)return{reset:{placement:a}}}return{}}},options:[c,void 0]},{...{name:"size",options:m=u={...K,apply:({elements:e,rects:t,availableWidth:a,availableHeight:n})=>{let{width:r,height:s}=t.reference,i=e.floating.style;i.setProperty("--radix-popper-available-width",`${a}px`),i.setProperty("--radix-popper-available-height",`${n}px`),i.setProperty("--radix-popper-anchor-width",`${r}px`),i.setProperty("--radix-popper-anchor-height",`${s}px`)}},async fn(e){var t,a;let n,r,{placement:s,rects:i,platform:l,elements:o}=e,{apply:c=()=>{},...d}=ea(m,e),u=await ey(e,d),p=en(s),h=er(s),f="y"===eo(s),{width:g,height:x}=i.floating;"top"===p||"bottom"===p?(n=p,r=h===(await (null==l.isRTL?void 0:l.isRTL(o.floating))?"start":"end")?"left":"right"):(r=p,n="end"===h?"top":"bottom");let v=x-u.top-u.bottom,y=g-u.left-u.right,b=Y(x-u[n],v),j=Y(g-u[r],y),w=!e.middlewareData.shift,N=b,_=j;if(null!=(t=e.middlewareData.shift)&&t.enabled.x&&(_=y),null!=(a=e.middlewareData.shift)&&a.enabled.y&&(N=v),w&&!h){let e=X(u.left,0),t=X(u.right,0),a=X(u.top,0),n=X(u.bottom,0);f?_=g-2*(0!==e||0!==t?e+t:X(u.left,u.right)):N=x-2*(0!==a||0!==n?a+n:X(u.top,u.bottom))}await c({...e,availableWidth:_,availableHeight:N});let k=await l.getDimensions(o.floating);return g!==k.width||x!==k.height?{reset:{rects:!0}}:{}}},options:[u,void 0]},O&&{...{name:"arrow",options:h=p={element:O,padding:w},fn(e){let{element:t,padding:a}="function"==typeof h?h(e):h;return t&&({}).hasOwnProperty.call(t,"current")?null!=t.current?tt({element:t.current,padding:a}).fn(e):{}:t?tt({element:t,padding:a}).fn(e):{}}},options:[p,void 0]},tk({arrowWidth:z,arrowHeight:G}),S&&{...{name:"hide",options:g=f={strategy:"referenceHidden",...K},async fn(e){let{rects:t}=e,{strategy:a="referenceHidden",...n}=ea(g,e);switch(a){case"referenceHidden":{let a=eb(await ey(e,{...n,elementContext:"reference"}),t.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:ej(a)}}}case"escaped":{let a=eb(await ey(e,{...n,altBoundary:!0}),t.floating);return{data:{escapedOffsets:a,escaped:ej(a)}}}default:return{}}}},options:[f,void 0]}]}),[el,ef]=tC(Z),eg=U(R);$(()=>{ee&&eg?.()},[ee,eg]);let ex=et.arrow?.x,e_=et.arrow?.y,ek=et.arrow?.centerOffset!==0,[eC,eL]=n.useState();return $(()=>{P&&eL(window.getComputedStyle(P).zIndex)},[P]),(0,a.jsx)("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:ee?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:eC,"--radix-popper-transform-origin":[et.transformOrigin?.x,et.transformOrigin?.y].join(" "),...et.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,a.jsx)(tv,{scope:x,placedSide:el,onArrowChange:B,arrowX:ex,arrowY:e_,shouldHideArrow:ek,children:(0,a.jsx)(F.Primitive.div,{"data-side":el,"data-align":ef,...T,ref:M,style:{...T.style,animation:ee?void 0:"none"}})})})});tb.displayName=tx;var tj="PopperArrow",tw={top:"bottom",right:"left",bottom:"top",left:"right"},tN=n.forwardRef(function(e,t){let{__scopePopper:n,...r}=e,s=ty(tj,n),i=tw[s.placedSide];return(0,a.jsx)("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:(0,a.jsx)(to,{...r,ref:t,style:{...r.style,display:"block"}})})});function t_(e){return null!==e}tN.displayName=tj;var tk=e=>({name:"transformOrigin",options:e,fn(t){let{placement:a,rects:n,middlewareData:r}=t,s=r.arrow?.centerOffset!==0,i=s?0:e.arrowWidth,l=s?0:e.arrowHeight,[o,c]=tC(a),d={start:"0%",center:"50%",end:"100%"}[c],u=(r.arrow?.x??0)+i/2,m=(r.arrow?.y??0)+l/2,p="",h="";return"bottom"===o?(p=s?d:`${u}px`,h=`${-l}px`):"top"===o?(p=s?d:`${u}px`,h=`${n.floating.height+l}px`):"right"===o?(p=`${-l}px`,h=s?d:`${m}px`):"left"===o&&(p=`${n.floating.width+l}px`,h=s?d:`${m}px`),{data:{x:p,y:h}}}});function tC(e){let[t,a="center"]=e.split("-");return[t,a]}var tS=n.forwardRef((e,t)=>{let{container:r,...s}=e,[i,l]=n.useState(!1);$(()=>l(!0),[]);let o=r||i&&globalThis?.document?.body;return o?ta.default.createPortal((0,a.jsx)(F.Primitive.div,{...s,ref:t}),o):null});tS.displayName="Portal";var tL=e=>{var t;let a,r,{present:s,children:i}=e,l=function(e){var t,a;let[r,s]=n.useState(),i=n.useRef({}),l=n.useRef(e),o=n.useRef("none"),[c,d]=(t=e?"mounted":"unmounted",a={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},n.useReducer((e,t)=>a[e][t]??e,t));return n.useEffect(()=>{let e=tR(i.current);o.current="mounted"===c?e:"none"},[c]),$(()=>{let t=i.current,a=l.current;if(a!==e){let n=o.current,r=tR(t);e?d("MOUNT"):"none"===r||t?.display==="none"?d("UNMOUNT"):a&&n!==r?d("ANIMATION_OUT"):d("UNMOUNT"),l.current=e}},[e,d]),$(()=>{if(r){let e,t=r.ownerDocument.defaultView??window,a=a=>{let n=tR(i.current).includes(a.animationName);if(a.target===r&&n&&(d("ANIMATION_END"),!l.current)){let a=r.style.animationFillMode;r.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===r.style.animationFillMode&&(r.style.animationFillMode=a)})}},n=e=>{e.target===r&&(o.current=tR(i.current))};return r.addEventListener("animationstart",n),r.addEventListener("animationcancel",a),r.addEventListener("animationend",a),()=>{t.clearTimeout(e),r.removeEventListener("animationstart",n),r.removeEventListener("animationcancel",a),r.removeEventListener("animationend",a)}}d("ANIMATION_END")},[r,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:n.useCallback(e=>{e&&(i.current=getComputedStyle(e)),s(e)},[])}}(s),o="function"==typeof i?i({present:l.isPresent}):n.Children.only(i),c=(0,I.useComposedRefs)(l.ref,(t=o,(r=(a=Object.getOwnPropertyDescriptor(t.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?t.ref:(r=(a=Object.getOwnPropertyDescriptor(t,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?t.props.ref:t.props.ref||t.ref));return"function"==typeof i||l.isPresent?n.cloneElement(o,{ref:c}):null};function tR(e){return e?.animationName||"none"}tL.displayName="Presence";var tT=e.i(30896),tE=n.forwardRef((e,t)=>(0,a.jsx)(F.Primitive.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));tE.displayName="VisuallyHidden";var[tP,tA]=B("Tooltip",[tu]),tM=tu(),tO="TooltipProvider",tI="tooltip.open",[tB,tF]=tP(tO),tU=e=>{let{__scopeTooltip:t,delayDuration:r=700,skipDelayDuration:s=300,disableHoverableContent:i=!1,children:l}=e,[o,c]=n.useState(!0),d=n.useRef(!1),u=n.useRef(0);return n.useEffect(()=>{let e=u.current;return()=>window.clearTimeout(e)},[]),(0,a.jsx)(tB,{scope:t,isOpenDelayed:o,delayDuration:r,onOpen:n.useCallback(()=>{window.clearTimeout(u.current),c(!1)},[]),onClose:n.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>c(!0),s)},[s]),isPointerInTransitRef:d,onPointerInTransitChange:n.useCallback(e=>{d.current=e},[]),disableHoverableContent:i,children:l})};tU.displayName=tO;var tD="Tooltip",[tz,tG]=tP(tD),tH=e=>{let{__scopeTooltip:t,children:r,open:s,defaultOpen:i=!1,onOpenChange:l,disableHoverableContent:o,delayDuration:c}=e,d=tF(tD,e.__scopeTooltip),u=tM(t),[m,p]=n.useState(null),h=function(e){let[t,a]=n.useState(q());return $(()=>{a(e=>e??String(K++))},[void 0]),t?`radix-${t}`:""}(),f=n.useRef(0),g=o??d.disableHoverableContent,x=c??d.delayDuration,v=n.useRef(!1),[y=!1,b]=function({prop:e,defaultProp:t,onChange:a=()=>{}}){let[r,s]=function({defaultProp:e,onChange:t}){let a=n.useState(e),[r]=a,s=n.useRef(r),i=U(t);return n.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),a}({defaultProp:t,onChange:a}),i=void 0!==e,l=i?e:r,o=U(a);return[l,n.useCallback(t=>{if(i){let a="function"==typeof t?t(e):t;a!==e&&o(a)}else s(t)},[i,e,s,o])]}({prop:s,defaultProp:i,onChange:e=>{e?(d.onOpen(),document.dispatchEvent(new CustomEvent(tI))):d.onClose(),l?.(e)}}),j=n.useMemo(()=>y?v.current?"delayed-open":"instant-open":"closed",[y]),w=n.useCallback(()=>{window.clearTimeout(f.current),f.current=0,v.current=!1,b(!0)},[b]),N=n.useCallback(()=>{window.clearTimeout(f.current),f.current=0,b(!1)},[b]),_=n.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{v.current=!0,b(!0),f.current=0},x)},[x,b]);return n.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),(0,a.jsx)(th,{...u,children:(0,a.jsx)(tz,{scope:t,contentId:h,open:y,stateAttribute:j,trigger:m,onTriggerChange:p,onTriggerEnter:n.useCallback(()=>{d.isOpenDelayed?_():w()},[d.isOpenDelayed,_,w]),onTriggerLeave:n.useCallback(()=>{g?N():(window.clearTimeout(f.current),f.current=0)},[N,g]),onOpen:w,onClose:N,disableHoverableContent:g,children:r})})};tH.displayName=tD;var tW="TooltipTrigger",t$=n.forwardRef((e,t)=>{let{__scopeTooltip:r,...s}=e,i=tG(tW,r),l=tF(tW,r),o=tM(r),c=n.useRef(null),d=(0,I.useComposedRefs)(t,c,i.onTriggerChange),u=n.useRef(!1),m=n.useRef(!1),p=n.useCallback(()=>u.current=!1,[]);return n.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),(0,a.jsx)(tg,{asChild:!0,...o,children:(0,a.jsx)(F.Primitive.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...s,ref:d,onPointerMove:O(e.onPointerMove,e=>{"touch"!==e.pointerType&&(m.current||l.isPointerInTransitRef.current||(i.onTriggerEnter(),m.current=!0))}),onPointerLeave:O(e.onPointerLeave,()=>{i.onTriggerLeave(),m.current=!1}),onPointerDown:O(e.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:O(e.onFocus,()=>{u.current||i.onOpen()}),onBlur:O(e.onBlur,i.onClose),onClick:O(e.onClick,i.onClose)})})});t$.displayName=tW;var tq="TooltipPortal",[tK,tV]=tP(tq,{forceMount:void 0}),tY=e=>{let{__scopeTooltip:t,forceMount:n,children:r,container:s}=e,i=tG(tq,t);return(0,a.jsx)(tK,{scope:t,forceMount:n,children:(0,a.jsx)(tL,{present:n||i.open,children:(0,a.jsx)(tS,{asChild:!0,container:s,children:r})})})};tY.displayName=tq;var tX="TooltipContent",tJ=n.forwardRef((e,t)=>{let n=tV(tX,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=e,l=tG(tX,e.__scopeTooltip);return(0,a.jsx)(tL,{present:r||l.open,children:l.disableHoverableContent?(0,a.jsx)(t1,{side:s,...i,ref:t}):(0,a.jsx)(tQ,{side:s,...i,ref:t})})}),tQ=n.forwardRef((e,t)=>{let r=tG(tX,e.__scopeTooltip),s=tF(tX,e.__scopeTooltip),i=n.useRef(null),l=(0,I.useComposedRefs)(t,i),[o,c]=n.useState(null),{trigger:d,onClose:u}=r,m=i.current,{onPointerInTransitChange:p}=s,h=n.useCallback(()=>{c(null),p(!1)},[p]),f=n.useCallback((e,t)=>{let a,n=e.currentTarget,r={x:e.clientX,y:e.clientY},s=function(e,t){let a=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(a,n,r,s)){case s:return"left";case r:return"right";case a:return"top";case n:return"bottom";default:throw Error("unreachable")}}(r,n.getBoundingClientRect());c(((a=[...function(e,t,a=5){let n=[];switch(t){case"top":n.push({x:e.x-a,y:e.y+a},{x:e.x+a,y:e.y+a});break;case"bottom":n.push({x:e.x-a,y:e.y-a},{x:e.x+a,y:e.y-a});break;case"left":n.push({x:e.x+a,y:e.y-a},{x:e.x+a,y:e.y+a});break;case"right":n.push({x:e.x-a,y:e.y-a},{x:e.x-a,y:e.y+a})}return n}(r,s),...function(e){let{top:t,right:a,bottom:n,left:r}=e;return[{x:r,y:t},{x:a,y:t},{x:a,y:n},{x:r,y:n}]}(t.getBoundingClientRect())].slice()).sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:1*!!(e.y>t.y)),function(e){if(e.length<=1)return e.slice();let t=[];for(let a=0;a<e.length;a++){let n=e[a];for(;t.length>=2;){let e=t[t.length-1],a=t[t.length-2];if((e.x-a.x)*(n.y-a.y)>=(e.y-a.y)*(n.x-a.x))t.pop();else break}t.push(n)}t.pop();let a=[];for(let t=e.length-1;t>=0;t--){let n=e[t];for(;a.length>=2;){let e=a[a.length-1],t=a[a.length-2];if((e.x-t.x)*(n.y-t.y)>=(e.y-t.y)*(n.x-t.x))a.pop();else break}a.push(n)}return(a.pop(),1===t.length&&1===a.length&&t[0].x===a[0].x&&t[0].y===a[0].y)?t:t.concat(a)}(a))),p(!0)},[p]);return n.useEffect(()=>()=>h(),[h]),n.useEffect(()=>{if(d&&m){let e=e=>f(e,m),t=e=>f(e,d);return d.addEventListener("pointerleave",e),m.addEventListener("pointerleave",t),()=>{d.removeEventListener("pointerleave",e),m.removeEventListener("pointerleave",t)}}},[d,m,f,h]),n.useEffect(()=>{if(o){let e=e=>{let t=e.target,a={x:e.clientX,y:e.clientY},n=d?.contains(t)||m?.contains(t),r=!function(e,t){let{x:a,y:n}=e,r=!1;for(let e=0,s=t.length-1;e<t.length;s=e++){let i=t[e].x,l=t[e].y,o=t[s].x,c=t[s].y;l>n!=c>n&&a<(o-i)*(n-l)/(c-l)+i&&(r=!r)}return r}(a,o);n?h():r&&(h(),u())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[d,m,o,u,h]),(0,a.jsx)(t1,{...e,ref:l})}),[tZ,t0]=tP(tD,{isInside:!1}),t1=n.forwardRef((e,t)=>{let{__scopeTooltip:r,children:s,"aria-label":i,onEscapeKeyDown:l,onPointerDownOutside:o,...c}=e,d=tG(tX,r),u=tM(r),{onClose:m}=d;return n.useEffect(()=>(document.addEventListener(tI,m),()=>document.removeEventListener(tI,m)),[m]),n.useEffect(()=>{if(d.trigger){let e=e=>{let t=e.target;t?.contains(d.trigger)&&m()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[d.trigger,m]),(0,a.jsx)(G,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:m,children:(0,a.jsxs)(tb,{"data-state":d.stateAttribute,...u,...c,ref:t,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,a.jsx)(tT.Slottable,{children:s}),(0,a.jsx)(tZ,{scope:r,isInside:!0,children:(0,a.jsx)(tE,{id:d.contentId,role:"tooltip",children:i||s})})]})})});tJ.displayName=tX;var t2="TooltipArrow",t4=n.forwardRef((e,t)=>{let{__scopeTooltip:n,...r}=e,s=tM(n);return t0(t2,n).isInside?null:(0,a.jsx)(tN,{...s,...r,ref:t})});function t5({delayDuration:e=0,...t}){return(0,a.jsx)(tU,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function t3({...e}){return(0,a.jsx)(t5,{children:(0,a.jsx)(tH,{"data-slot":"tooltip",...e})})}function t6({...e}){return(0,a.jsx)(t$,{"data-slot":"tooltip-trigger",...e})}function t8({className:e,sideOffset:t=0,children:n,...r}){return(0,a.jsx)(tY,{children:(0,a.jsxs)(tJ,{"data-slot":"tooltip-content",sideOffset:t,className:(0,v.cn)("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,(0,a.jsx)(t4,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}t4.displayName=t2;var t7=(0,w.createServerReference)("40e40abe093369af518851b45654c20d465faeba27",w.callServer,void 0,w.findSourceMapURL,"addGuest"),t9=(0,w.createServerReference)("40b1372df1f1867ad965ac2a10b5f6bca4ef6f6f0a",w.callServer,void 0,w.findSourceMapURL,"deleteGuest"),ae=(0,w.createServerReference)("60841a1a25e146b85dc925d84f0b2044a3e3f921b6",w.callServer,void 0,w.findSourceMapURL,"updateGuest");function at({guests:e,onUpdate:t,settings:r}){let[s,i]=(0,n.useState)(""),[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useTransition)(),[m,p]=(0,n.useState)({name:"",phone:"",address:"",guest_count:1}),[f,v]=(0,n.useState)({}),[y,b]=(0,n.useState)(!1),[w,N]=(0,n.useState)(null),[_,k]=(0,n.useState)({}),C=e.filter(e=>{let t=s.toLowerCase();return(e.name||"").toLowerCase().includes(t)||(e.phone||"").toLowerCase().includes(t)}),O=async()=>{m.name.trim()&&u(async()=>{let a=await t7(m);a.success&&a.data&&(t([a.data,...e]),p({name:"",phone:"",address:"",guest_count:1}),c(!1))})},I=async a=>{confirm("Yakin ingin menghapus tamu ini?")&&u(async()=>{(await t9(a)).success&&t(e.filter(e=>e.id!==a))})},B=async a=>{u(async()=>{let n={name:_.name,phone:_.phone,guest_count:_.guest_count,attendance_status:_.attendance_status},r=await ae(a,n);r.success&&r.data&&(t(e.map(e=>e.id===a?r.data:e)),N(null),k({}))})},F=async e=>{if(!e.phone)return alert("Nomor telepon tidak tersedia");let t=e.id??"",a=("string"==typeof t?t:String(t)).trim();if(!(a.length>0&&!/^\s*(undefined|null)\s*$/i.test(a))){let t=r?.whatsapp_template||"Halo {{name}}! Anda diundang ke acara kami. Lihat undangan: {{link}}",a=`${window.location.origin}?to=${e.unique_slug||e.slug||""}`,n=t.replace(/{{\s*name\s*}}/gi,e.name||"");n=n.replace(/{{\s*link\s*}}/gi,a);let s=(e=>{if(!e)return"";let t=e.replace(/[^0-9+]/g,"");return t.startsWith("+")&&(t=t.slice(1)),t.startsWith("0")&&(t="62"+t.slice(1)),t})(e.phone);if(!s)return alert("Nomor telepon tidak valid");let i=encodeURIComponent(n),l=`https://api.whatsapp.com/send?phone=${s}&text=${i}`;return void window.open(l,"_blank")}try{let e=await fetch(`/api/admin/blast/${encodeURIComponent(a)}`),t=await e.json();if(!t.success)return alert(t.error||"Gagal membuat pesan");let n=t.waLink||t.wa_link||t.data?.waLink;if(!n)return alert("Tidak ada link WhatsApp dihasilkan");window.open(n,"_blank")}catch(e){console.error(e),alert("Terjadi kesalahan saat membuat pesan")}},U=async()=>{let e=Object.keys(f).filter(e=>f[e]&&"undefined"!==e&&"null"!==e);if(0===e.length)return alert("Pilih minimal satu tamu");try{let t=await fetch("/api/admin/blast/batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:e})}),a=await t.json();if(!a.success)return alert(a.error||"Gagal membuat pesan batch");for(let e of a.results){let t=e.waLink||e.wa_link||e.data?.waLink;t&&window.open(t,"_blank")}}catch(e){console.error(e),alert("Terjadi kesalahan saat membuat pesan batch")}},D=e.filter(e=>"attending"===e.attendance_status),z=D.reduce((e,t)=>e+t.guest_count,0);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"font-serif text-2xl text-foreground",children:"Daftar Tamu"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Kelola tamu undangan"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(h.Button,{onClick:()=>c(!0),className:"bg-gold hover:bg-gold/90 text-white",children:[(0,a.jsx)(S,{className:"w-4 h-4 mr-2"}),"Tambah Tamu"]}),(0,a.jsxs)(t3,{children:[(0,a.jsx)(t6,{asChild:!0,children:(0,a.jsx)(h.Button,{onClick:U,className:"bg-gold hover:bg-gold/90 text-white",children:"Kirim WhatsApp (Dipilih)"})}),(0,a.jsx)(t8,{sideOffset:6,children:"Kirim pesan WhatsApp menggunakan template yang disimpan"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsx)("div",{className:"glass rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(l.Users,{className:"w-8 h-8 text-gold"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-serif text-foreground",children:e.length}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total Tamu"})]})]})}),(0,a.jsx)("div",{className:"glass rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(E,{className:"w-8 h-8 text-green-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-serif text-foreground",children:D.length}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Akan Hadir"})]})]})}),(0,a.jsx)("div",{className:"glass rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(P,{className:"w-8 h-8 text-red-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-serif text-foreground",children:e.filter(e=>"not_attending"===e.attendance_status).length}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Tidak Hadir"})]})]})}),(0,a.jsx)("div",{className:"glass rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(l.Users,{className:"w-8 h-8 text-blue-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-serif text-foreground",children:z}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total Orang"})]})]})})]}),(0,a.jsxs)("div",{className:"relative mb-6",children:[(0,a.jsx)(R,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),(0,a.jsx)(g.Input,{placeholder:"Cari tamu...",value:s,onChange:e=>i(e.target.value),className:"pl-10 bg-white/50"})]}),o&&(0,a.jsxs)("div",{className:"glass rounded-2xl p-6 mb-6",children:[(0,a.jsx)("h3",{className:"font-medium text-foreground mb-4",children:"Tambah Tamu Baru"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:"Nama *"}),(0,a.jsx)(g.Input,{value:m.name,onChange:e=>p(t=>({...t,name:e.target.value})),placeholder:"Nama tamu",className:"bg-white/50"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:"No. Telepon"}),(0,a.jsx)(g.Input,{value:m.phone,onChange:e=>p(t=>({...t,phone:e.target.value})),placeholder:"08xxxxxxxxxx",className:"bg-white/50"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:"Jumlah Tamu"}),(0,a.jsx)(g.Input,{type:"number",min:"1",value:m.guest_count,onChange:e=>p(t=>({...t,guest_count:Number.parseInt(e.target.value)||1})),className:"bg-white/50"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,a.jsx)(h.Button,{variant:"outline",onClick:()=>{c(!1),p({name:"",phone:"",address:"",guest_count:1})},children:"Batal"}),(0,a.jsx)(h.Button,{onClick:O,disabled:d||!m.name.trim(),className:"bg-gold hover:bg-gold/90 text-white",children:d?(0,a.jsx)(j,{className:"w-4 h-4 animate-spin"}):"Simpan"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[C.map(e=>(0,a.jsxs)("div",{className:"glass rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("input",{type:"checkbox",checked:!!f[e.id],onChange:t=>{let a={...f,[e.id]:t.target.checked};v(a),b(C.every(e=>a[e.id]))}}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("h4",{className:"font-medium text-foreground truncate",children:e.name}),(e=>{switch(e){case"attending":return(0,a.jsx)(E,{className:"w-4 h-4 text-green-500"});case"not_attending":return(0,a.jsx)(P,{className:"w-4 h-4 text-red-500"});default:return(0,a.jsx)(A.Clock,{className:"w-4 h-4 text-yellow-500"})}})(e.attendance_status),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",(e=>{switch(e){case"attending":return"Akan Hadir";case"not_attending":return"Tidak Hadir";default:return"Belum Konfirmasi"}})(e.attendance_status),")"]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-sm text-muted-foreground",children:[e.phone&&(0,a.jsx)("span",{children:e.phone}),(0,a.jsxs)("span",{children:[e.guest_count," orang"]}),e.unique_code&&(0,a.jsxs)("span",{className:"px-2 py-0.5 rounded bg-slate-100 text-xs",children:["Kode: ",e.unique_code]}),e.blast_status&&(0,a.jsxs)("span",{className:"px-2 py-0.5 rounded bg-slate-100 text-xs",children:["Status: ",e.blast_status]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>{var t;let a;return t=e.unique_slug||e.slug||"",a=`${window.location.origin}?to=${t}`,void(navigator.clipboard.writeText(a),alert("Link undangan disalin!"))},className:"text-muted-foreground hover:text-foreground",title:"Salin link undangan",children:(0,a.jsx)(T,{className:"w-4 h-4"})}),(0,a.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>{N(e.id),k({...e})},className:"text-muted-foreground",children:(0,a.jsx)(E,{className:"w-4 h-4"})}),(0,a.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>F(e),className:"bg-gold hover:bg-gold/90 text-white",title:"Kirim via WhatsApp",children:(0,a.jsx)(M.Send,{className:"w-4 h-4"})}),(0,a.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>I(e.id),disabled:d,className:"text-muted-foreground hover:text-destructive",children:(0,a.jsx)(L,{className:"w-4 h-4"})})]})]}),w===e.id&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-3",children:[(0,a.jsx)(g.Input,{value:_.name||"",onChange:e=>k(t=>({...t||{},name:e.target.value}))}),(0,a.jsx)(g.Input,{value:_.phone||"",onChange:e=>k(t=>({...t||{},phone:e.target.value}))}),(0,a.jsx)(g.Input,{type:"number",value:_.guest_count||1,onChange:e=>k(t=>({...t||{},guest_count:Number(e.target.value)}))})]}),(0,a.jsxs)("div",{className:"flex gap-2 justify-end mt-2",children:[(0,a.jsx)(h.Button,{variant:"outline",onClick:()=>{N(null),k({})},children:"Batal"}),(0,a.jsx)(h.Button,{onClick:()=>B(e.id),className:"bg-gold text-white",children:"Simpan"})]})]})]},e.id)),0===C.length&&(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:s?"Tidak ada tamu yang ditemukan":"Belum ada tamu. Tambahkan tamu pertama!"})]})]})}var aa=(0,w.createServerReference)("60f0bab6fcb4ce9700981c8d515f3fd4344770d285",w.callServer,void 0,w.findSourceMapURL,"addGalleryItem"),an=(0,w.createServerReference)("4052fb924ed8ef5fa8fce80ba1150751958f685baf",w.callServer,void 0,w.findSourceMapURL,"deleteGalleryItem"),ar=(0,w.createServerReference)("603dbd027d3f76fd1729eed008ef2f0af427df8cd1",w.callServer,void 0,w.findSourceMapURL,"updateGalleryItem");function as({gallery:e,onUpdate:t}){let[r,s]=(0,n.useState)(!1),[i,l]=(0,n.useTransition)(),[c,d]=(0,n.useState)({image_url:"",caption:""}),[u,m]=(0,n.useState)(!1),[p,f]=(0,n.useState)(null),v=async()=>{if(c.image_url.trim()){if(e.length>=50)return alert("Batas maksimal 50 foto");l(async()=>{let a=await aa(c.image_url,c.caption);a.success&&a.data&&(t([...e,a.data]),d({image_url:"",caption:""}),s(!1))})}},y=async a=>{if(!a)return;let n=Array.from(a);if(0===n.length)return;let r=50-e.length;if(r<=0)return alert("Batas maksimal 50 foto tercapai");let i=n;n.length>r&&(i=n.slice(0,r),alert(`Hanya ${r} file yang akan diunggah (batas 50 foto).`)),m(!0),f({done:0,total:i.length});let l=[...e];for(let e=0;e<i.length;e+=1){let a=i[e];try{let e=await b(a,15e5),n=new FormData;n.append("file",e,e.name||a.name),n.append("filename",e.name||a.name),n.append("folder","gallery");let r=await fetch("/api/upload",{method:"POST",body:n}),s=await r.json();if(!s.success)throw Error(s.error||"Upload gagal");let i=s.publicUrl||s.publicURL||s.public_url;if(!i)throw Error("No url returned");let o=await aa(i,"");o.success&&o.data&&(l.push(o.data),t(l.slice()))}catch(e){console.error("batch upload error",e)}finally{f(e=>({done:(e?.done||0)+1,total:e?.total||0}))}}m(!1),f(null),s(!1),d({image_url:"",caption:""})};async function b(e,t){if(e.size<=t)return e;let a=await createImageBitmap(e),n=document.createElement("canvas"),r=n.getContext("2d"),s=a.width,i=a.height,l=Math.max(s,i);if(l>1920){let e=1920/l;s=Math.round(s*e),i=Math.round(i*e)}n.width=s,n.height=i,r.drawImage(a,0,0,s,i);let o=.92;for(let a=0;a<6;a+=1){let a=await new Promise(e=>n.toBlob(e,"image/jpeg",o));if(!a)break;if(a.size<=t)return new File([a],e.name.replace(/\.[^.]+$/,".jpg"),{type:"image/jpeg"});o=Math.max(.5,o-.15),s=Math.round(.9*s),i=Math.round(.9*i);let l=document.createElement("canvas");l.width=s,l.height=i,l.getContext("2d").drawImage(n,0,0,s,i),n.width=s,n.height=i,r.drawImage(l,0,0)}return e}let w=async a=>{confirm("Yakin ingin menghapus gambar ini?")&&l(async()=>{(await an(a)).success&&t(e.filter(e=>e.id!==a))})};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"font-serif text-2xl text-foreground",children:"Galeri Foto"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Kelola foto-foto pernikahan"})]}),(0,a.jsxs)(h.Button,{onClick:()=>s(!0),className:"bg-gold hover:bg-gold/90 text-white",children:[(0,a.jsx)(S,{className:"w-4 h-4 mr-2"}),"Tambah Foto"]})]}),r&&(0,a.jsxs)("div",{className:"glass rounded-2xl p-6 mb-6",children:[(0,a.jsx)("h3",{className:"font-medium text-foreground mb-4",children:"Tambah Foto Baru"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:"Unggah / URL Gambar *"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>y(e.target.files)}),(0,a.jsx)(g.Input,{value:c.image_url,onChange:e=>d(t=>({...t,image_url:e.target.value})),placeholder:"https://example.com/image.jpg",className:"bg-white/50"})]}),u&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Mengunggah ",p?.done??0,"/",p?.total??"","..."]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:"Caption"}),(0,a.jsx)(g.Input,{value:c.caption,onChange:e=>d(t=>({...t,caption:e.target.value})),placeholder:"Deskripsi foto",className:"bg-white/50"})]}),c.image_url&&(0,a.jsx)("div",{className:"aspect-video w-full max-w-sm rounded-lg overflow-hidden bg-muted",children:(0,a.jsx)("img",{src:c.image_url||"/placeholder.svg",alt:"Preview",className:"w-full h-full object-cover",onError:e=>{e.target.src="/image-preview-concept.png"}})})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,a.jsx)(h.Button,{variant:"outline",onClick:()=>{s(!1),d({image_url:"",caption:""})},children:"Batal"}),(0,a.jsx)(h.Button,{onClick:v,disabled:i||!c.image_url.trim(),className:"bg-gold hover:bg-gold/90 text-white",children:i?(0,a.jsx)(j,{className:"w-4 h-4 animate-spin"}):"Simpan"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:e.map(n=>(0,a.jsxs)("div",{className:"group relative aspect-square rounded-xl overflow-hidden glass",children:[(0,a.jsx)("img",{src:n.image_url||"/placeholder.svg",alt:n.caption||"Gallery image",className:"w-full h-full object-cover"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(h.Button,{variant:"outline",size:"icon",onClick:()=>{let a=prompt("Edit caption:",n.caption||"");null!==a&&l(async()=>{let r=await ar(n.id,{caption:a});r.success&&r.data&&t(e.map(e=>e.id===n.id?r.data:e))})},children:"✏️"}),(0,a.jsx)(h.Button,{variant:"destructive",size:"icon",onClick:()=>w(n.id),disabled:i,children:(0,a.jsx)(L,{className:"w-4 h-4"})})]})}),n.caption&&(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-gradient-to-t from-black/70 to-transparent",children:(0,a.jsx)("p",{className:"text-white text-sm truncate",children:n.caption})})]},n.id))}),0===e.length&&!r&&(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)(o,{className:"w-16 h-16 mx-auto text-muted-foreground/50 mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Belum ada foto. Tambahkan foto pertama!"})]})]})}var ai=e.i(35939),al=e.i(41171),ao=(0,w.createServerReference)("6058b4ecc27b80df55e3349afb5e4c6bb71d2b0cb9",w.callServer,void 0,w.findSourceMapURL,"toggleCommentApproval"),ac=(0,w.createServerReference)("40e4fe203734786beac7bca0a25272925ae90531ff",w.callServer,void 0,w.findSourceMapURL,"deleteComment"),ad=(0,w.createServerReference)("007a837f4e957662238675a7b8bd6b712c5a45b576",w.callServer,void 0,w.findSourceMapURL,"getAllComments");function au({comments:e,onUpdate:t}){let[r,s]=(0,n.useState)(""),[i,l]=(0,n.useTransition)(),[o,d]=(0,n.useState)(!1),u=async()=>{d(!0),t(await ad()),d(!1)},m=e.filter(e=>e.guest_name.toLowerCase().includes(r.toLowerCase())||e.message.toLowerCase().includes(r.toLowerCase())),p=async(a,n)=>{l(async()=>{let r=await ao(a,n);r.success&&t(e.map(e=>e.id===a?{...e,is_approved:r.newStatus}:e))})},f=async a=>{confirm("Yakin ingin menghapus komentar ini?")&&l(async()=>{(await ac(a)).success&&t(e.filter(e=>e.id!==a))})},x=e.filter(e=>e.is_approved).length,v=e.filter(e=>!e.is_approved).length;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"font-serif text-2xl text-foreground",children:"Komentar & Ucapan"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Kelola ucapan dari tamu"})]}),(0,a.jsx)(h.Button,{variant:"outline",size:"icon",onClick:u,disabled:o,title:"Refresh komentar",children:(0,a.jsx)(al.RefreshCw,{className:`w-4 h-4 ${o?"animate-spin":""}`})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"glass rounded-xl p-4 text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-serif text-foreground",children:e.length}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total"})]}),(0,a.jsxs)("div",{className:"glass rounded-xl p-4 text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-serif text-green-500",children:x}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Disetujui"})]}),(0,a.jsxs)("div",{className:"glass rounded-xl p-4 text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-serif text-yellow-500",children:v}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Pending"})]})]}),(0,a.jsxs)("div",{className:"relative mb-6",children:[(0,a.jsx)(R,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),(0,a.jsx)(g.Input,{placeholder:"Cari komentar...",value:r,onChange:e=>s(e.target.value),className:"pl-10 bg-white/50"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[m.map(e=>(0,a.jsx)("div",{className:`glass rounded-xl p-4 ${!e.is_approved?"border-l-4 border-yellow-500":""}`,children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("h4",{className:"font-medium text-foreground",children:e.guest_name}),!e.is_approved&&(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full bg-yellow-500/20 text-yellow-600",children:"Pending"})]}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm mb-2",children:e.message}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>p(e.id,e.is_approved),disabled:i,className:e.is_approved?"text-green-500 hover:text-green-600":"text-muted-foreground hover:text-green-500",title:e.is_approved?"Batalkan persetujuan":"Setujui",children:(0,a.jsx)(ai.Check,{className:"w-4 h-4"})}),(0,a.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>f(e.id),disabled:i,className:"text-muted-foreground hover:text-destructive",children:(0,a.jsx)(L,{className:"w-4 h-4"})})]})]})},e.id)),0===m.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(c,{className:"w-12 h-12 mx-auto text-muted-foreground/50 mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:r?"Tidak ada komentar yang ditemukan":"Belum ada komentar"})]})]})]})}let am=(0,s.default)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);var ap=e.i(89236),ah=(0,w.createServerReference)("007689b614e6125ed65ac0d658f82bb07dd16ca96a",w.callServer,void 0,w.findSourceMapURL,"logoutAdmin");function af({user:e,initialSettings:t,initialGuests:s,initialGallery:i,initialComments:l}){let[o,c]=(0,n.useState)("settings"),[u,p]=(0,n.useState)(!1),[h,f]=(0,n.useState)(t),[g,x]=(0,n.useState)(s),[v,y]=(0,n.useState)(i),[b,j]=(0,n.useState)(l),[w,N]=(0,n.useTransition)();(0,r.useRouter)();let _=()=>{N(async()=>{await ah()})};return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("header",{className:"lg:hidden fixed top-0 left-0 right-0 z-50 glass border-b border-border",children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,a.jsx)("button",{onClick:()=>p(!0),className:"p-2 rounded-lg hover:bg-muted",children:(0,a.jsx)(am,{className:"w-6 h-6"})}),(0,a.jsx)("h1",{className:"font-serif text-lg",children:"Admin Dashboard"}),(0,a.jsx)("button",{onClick:_,disabled:w,className:"p-2 rounded-lg hover:bg-muted text-muted-foreground",children:(0,a.jsx)(d,{className:"w-5 h-5"})})]})}),u&&(0,a.jsx)("div",{className:"lg:hidden fixed inset-0 z-50 bg-black/50",onClick:()=>p(!1),children:(0,a.jsxs)("div",{className:"w-72 h-full bg-background",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[(0,a.jsx)("h2",{className:"font-serif text-lg",children:"Menu"}),(0,a.jsx)("button",{onClick:()=>p(!1),className:"p-2 rounded-lg hover:bg-muted",children:(0,a.jsx)(ap.X,{className:"w-5 h-5"})})]}),(0,a.jsx)(m,{user:e,activeTab:o,onTabChange:e=>{c(e),p(!1)},onLogout:_,stats:{guests:g.length,attending:g.filter(e=>"attending"===e.attendance_status).length,gallery:v.length,comments:b.length}})]})}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("aside",{className:"hidden lg:block w-72 h-screen fixed left-0 top-0 glass border-r border-border",children:(0,a.jsx)(m,{user:e,activeTab:o,onTabChange:c,onLogout:_,stats:{guests:g.length,attending:g.filter(e=>"attending"===e.attendance_status).length,gallery:v.length,comments:b.length}})}),(0,a.jsx)("main",{className:"flex-1 lg:ml-72 pt-16 lg:pt-0",children:(0,a.jsx)("div",{className:"p-4 lg:p-8",children:(()=>{switch(o){case"settings":return(0,a.jsx)(C,{settings:h,onUpdate:f});case"guests":return(0,a.jsx)(at,{guests:g,onUpdate:x,settings:h});case"gallery":return(0,a.jsx)(as,{gallery:v,onUpdate:y});case"comments":return(0,a.jsx)(au,{comments:b,onUpdate:j});default:return null}})()})})]})]})}e.s(["AdminDashboard",()=>af],51974)}]);