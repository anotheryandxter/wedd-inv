{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/chiio/VSCode/wedd-inv/components/splash-screen.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\n\ninterface SplashScreenProps {\n  groomName: string\n  brideName: string\n  guestName?: string\n  onOpen: () => void\n}\ninterface SplashExtra {\n  splashImage?: string | null\n  overlayOpacity?: number | null\n  overlayMode?: 'light' | 'dark' | 'custom' | null\n  overlayColor?: string | null\n}\n\nexport function SplashScreen({ groomName, brideName, guestName, onOpen, splashImage, overlayOpacity, overlayMode, overlayColor }: SplashScreenProps & SplashExtra) {\n  const [isVisible, setIsVisible] = useState(true)\n  const [guestCode, setGuestCode] = useState(\"\")\n\n  return (\n    <AnimatePresence>\n      {isVisible && (\n        <motion.div\n          initial={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          transition={{ duration: 0.8 }}\n          className=\"fixed inset-0 z-50 flex items-center justify-center overflow-hidden\"\n        >\n          {/* Background with overlay (use an <img> to avoid background-repeat/tiling issues in some browsers) */}\n          <div className=\"absolute inset-0 bg-[#FAF8F5]\">\n            {/* eslint-disable-next-line @next/next/no-img-element */}\n            <img\n              src={splashImage || '/elegant-floral-wedding-background-with-soft-cream-.jpg'}\n              srcSet={\n                `${(splashImage || '/elegant-floral-wedding-background-with-soft-cream-.jpg')} 800w, ` +\n                `${(splashImage || '/elegant-floral-wedding-background-with-soft-cream-.jpg')} 1200w, ` +\n                `${(splashImage || '/elegant-floral-wedding-background-with-soft-cream-.jpg')} 1600w, ` +\n                `${(splashImage || '/elegant-floral-wedding-background-with-soft-cream-.jpg')} 2400w`\n              }\n              sizes=\"100vw\"\n              alt=\"\"\n              className=\"w-full h-full object-cover block z-0\"\n              style={{ objectPosition: 'center center' }}\n              decoding=\"async\"\n              loading=\"eager\"\n            />\n            <div\n              className=\"absolute inset-0 z-10\"\n              style={(() => {\n                const opacity = typeof overlayOpacity === 'number' ? overlayOpacity : 0.8\n                if ((overlayMode || 'light') === 'custom' && overlayColor) {\n                  // custom solid color overlay\n                  return { backgroundColor: overlayColor, opacity }\n                }\n                if ((overlayMode || 'light') === 'dark') {\n                  // darker translucent overlay\n                  return { background: `linear-gradient(to bottom, rgba(0,0,0,${opacity}) 0%, rgba(0,0,0,${Math.max(0.6, opacity)}) 100%)` }\n                }\n                // default: soft cream gradient\n                return { background: 'linear-gradient(to bottom, #FAF8F5 0%, #FAF8F5 100%)', opacity }\n              })()}\n            />\n          </div>\n\n          {/* Content */}\n          <motion.div\n            initial={{ opacity: 0, y: 30 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.3, duration: 0.8 }}\n            className=\"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 z-20 flex flex-col items-center text-center px-6 w-full max-w-[92vw] sm:max-w-2xl\"\n          >\n            {/* Wedding invitation text */}\n            <motion.p\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{ delay: 0.5 }}\n              className=\"text-sm tracking-[0.3em] text-gold uppercase mb-4\"\n            >\n              The Wedding Of\n            </motion.p>\n\n            {/* Couple names */}\n            <motion.div\n              initial={{ opacity: 0, scale: 0.9 }}\n              animate={{ opacity: 1, scale: 1 }}\n              transition={{ delay: 0.7, duration: 0.6 }}\n              className=\"mb-6\"\n            >\n              <h1 className=\"font-serif text-2xl sm:text-3xl md:text-5xl lg:text-6xl text-gold-gradient font-medium leading-tight break-words whitespace-normal\">{groomName}</h1>\n              <p className=\"font-serif text-lg sm:text-xl md:text-2xl text-gold my-2\">&</p>\n              <h1 className=\"font-serif text-2xl sm:text-3xl md:text-5xl lg:text-6xl text-gold-gradient font-medium leading-tight break-words whitespace-normal\">{brideName}</h1>\n            </motion.div>\n\n            {/* Divider */}\n            <motion.div\n              initial={{ scaleX: 0 }}\n              animate={{ scaleX: 1 }}\n              transition={{ delay: 1, duration: 0.6 }}\n              className=\"w-32 h-[1px] bg-gradient-to-r from-transparent via-gold to-transparent mb-8\"\n            />\n\n            {/* Guest greeting */}\n            {guestName && (\n              <motion.div\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                transition={{ delay: 1.2 }}\n                className=\"glass rounded-2xl px-6 py-4 mb-8\"\n              >\n                <p className=\"text-sm text-muted-foreground mb-1\">Kepada Yth.</p>\n                <p className=\"font-serif text-xl text-foreground\">{guestName}</p>\n              </motion.div>\n            )}\n\n            {/* If guestName exists show Open button; otherwise show admin login + guest code input */}\n            {guestName ? (\n              <motion.button\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 1.5 }}\n                whileHover={{ scale: 1.05 }}\n                whileTap={{ scale: 0.95 }}\n                onClick={() => {\n                  setIsVisible(false)\n                  onOpen()\n                }}\n                className=\"glass-gold px-8 py-4 rounded-full flex items-center gap-3 group\"\n              >\n                <svg\n                  className=\"w-5 h-5 text-gold group-hover:animate-bounce\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M3 19v-8.93a2 2 0 01.89-1.664l7-4.666a2 2 0 012.22 0l7 4.666A2 2 0 0121 10.07V19M3 19a2 2 0 002 2h14a2 2 0 002-2M3 19l6.75-4.5M21 19l-6.75-4.5M3 10l6.75 4.5M21 10l-6.75 4.5m0 0l-1.14.76a2 2 0 01-2.22 0l-1.14-.76\"\n                  />\n                </svg>\n                <span className=\"text-gold font-medium\">Buka Undangan</span>\n              </motion.button>\n            ) : (\n              <motion.div\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 1.5 }}\n                className=\"flex flex-col items-center gap-3\"\n              >\n                <div className=\"flex gap-2\">\n                  <a href=\"/admin/login\" className=\"glass-gold px-6 py-3 rounded-full flex items-center gap-2 text-gold font-medium\">\n                    Admin Login\n                  </a>\n                </div>\n\n                <div className=\"glass rounded-xl px-4 py-3 flex items-center gap-2\">\n                  <input\n                    value={guestCode}\n                    onChange={(e) => setGuestCode(e.target.value)}\n                    placeholder=\"Masukkan kode/slug tamu\"\n                    className=\"bg-white/50 px-3 py-2 rounded-md\"\n                  />\n                  <button\n                    onClick={() => {\n                      const v = (guestCode || '').trim()\n                      if (!v) return alert('Masukkan kode atau slug tamu')\n                      // navigate to home with ?to=slug so server fetches guest\n                      window.location.href = `/?to=${encodeURIComponent(v)}`\n                    }}\n                    className=\"bg-gold hover:bg-gold/90 text-white px-4 py-2 rounded-md\"\n                  >\n                    Cek Undangan\n                  </button>\n                </div>\n              </motion.div>\n            )}\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 370, "column": 0}, "map": {"version":3,"sources":["file:///Users/chiio/VSCode/wedd-inv/components/invitation/hero-section.tsx"],"sourcesContent":["\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport type { WeddingSettings } from \"@/lib/types\"\n\ninterface HeroSectionProps {\n  settings: WeddingSettings\n}\n\nexport function HeroSection({ settings }: HeroSectionProps) {\n  const weddingDate = new Date(settings.wedding_date)\n  const formattedDate = weddingDate.toLocaleDateString(\"id-ID\", {\n    weekday: \"long\",\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\",\n  })\n\n  return (\n    <section className=\"relative min-h-screen flex items-center justify-center overflow-hidden\">\n      {/* Background */}\n      <div\n        className=\"absolute inset-0 bg-cover bg-center\"\n        style={{\n          backgroundImage: settings.hero_image ? `url('${settings.hero_image}')` : `url('/romantic-couple-wedding-photo-with-soft-lighting-e.jpg')`,\n        }}\n      >\n        <div className=\"absolute inset-0 bg-gradient-to-b from-background/30 via-background/50 to-background\" />\n      </div>\n\n      {/* Content */}\n      <div className=\"relative z-10 text-center px-6 py-20 max-w-3xl mx-auto\">\n        <motion.p\n          initial={{ opacity: 0, y: 20 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          viewport={{ once: true }}\n          className=\"text-sm tracking-[0.3em] text-black uppercase mb-6\"\n        >\n          We Are Getting Married\n        </motion.p>\n\n        <motion.div\n          initial={{ opacity: 0, scale: 0.9 }}\n          whileInView={{ opacity: 1, scale: 1 }}\n          viewport={{ once: true }}\n          transition={{ delay: 0.2 }}\n          className=\"mb-8\"\n        >\n          <h1 className=\"font-serif text-3xl sm:text-4xl md:text-6xl lg:text-7xl text-black font-medium mb-2 leading-tight break-words whitespace-normal\">{settings.groom_name}</h1>\n          <p className=\"font-serif text-xl sm:text-2xl md:text-3xl text-gold my-4\">&</p>\n          <h1 className=\"font-serif text-3xl sm:text-4xl md:text-6xl lg:text-7xl text-black font-medium leading-tight break-words whitespace-normal\">{settings.bride_name}</h1>\n        </motion.div>\n\n        <motion.div\n          initial={{ scaleX: 0 }}\n          whileInView={{ scaleX: 1 }}\n          viewport={{ once: true }}\n          transition={{ delay: 0.4 }}\n          className=\"w-40 h-[1px] bg-gradient-to-r from-transparent via-gold to-transparent mx-auto mb-8\"\n        />\n\n        <motion.p\n          initial={{ opacity: 0 }}\n          whileInView={{ opacity: 1 }}\n          viewport={{ once: true }}\n          transition={{ delay: 0.6 }}\n          className=\"font-serif text-xl md:text-2xl text-foreground/80\"\n        >\n          {formattedDate}\n        </motion.p>\n\n        {/* Scroll indicator */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          whileInView={{ opacity: 1 }}\n          viewport={{ once: true }}\n          transition={{ delay: 1 }}\n          className=\"absolute bottom-10 left-1/2 -translate-x-1/2\"\n        >\n          <div className=\"flex flex-col items-center gap-2\">\n            <span className=\"text-xs text-muted-foreground\">Scroll Down</span>\n            <motion.div animate={{ y: [0, 8, 0] }} transition={{ duration: 1.5, repeat: Number.POSITIVE_INFINITY }}>\n              <svg className=\"w-5 h-5 text-gold\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 14l-7 7m0 0l-7-7m7 7V3\" />\n              </svg>\n            </motion.div>\n          </div>\n        </motion.div>\n      </div>\n    </section>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASO,SAAS,YAAY,EAAE,QAAQ,EAAoB;IACxD,MAAM,cAAc,IAAI,KAAK,SAAS,YAAY;IAClD,MAAM,gBAAgB,YAAY,kBAAkB,CAAC,SAAS;QAC5D,SAAS;QACT,MAAM;QACN,OAAO;QACP,KAAK;IACP;IAEA,qBACE,qVAAC;QAAQ,WAAU;;0BAEjB,qVAAC;gBACC,WAAU;gBACV,OAAO;oBACL,iBAAiB,SAAS,UAAU,GAAG,CAAC,KAAK,EAAE,SAAS,UAAU,CAAC,EAAE,CAAC,GAAG,CAAC,8DAA8D,CAAC;gBAC3I;0BAEA,cAAA,qVAAC;oBAAI,WAAU;;;;;;;;;;;0BAIjB,qVAAC;gBAAI,WAAU;;kCACb,qVAAC,+ZAAM,CAAC,CAAC;wBACP,SAAS;4BAAE,SAAS;4BAAG,GAAG;wBAAG;wBAC7B,aAAa;4BAAE,SAAS;4BAAG,GAAG;wBAAE;wBAChC,UAAU;4BAAE,MAAM;wBAAK;wBACvB,WAAU;kCACX;;;;;;kCAID,qVAAC,+ZAAM,CAAC,GAAG;wBACT,SAAS;4BAAE,SAAS;4BAAG,OAAO;wBAAI;wBAClC,aAAa;4BAAE,SAAS;4BAAG,OAAO;wBAAE;wBACpC,UAAU;4BAAE,MAAM;wBAAK;wBACvB,YAAY;4BAAE,OAAO;wBAAI;wBACzB,WAAU;;0CAEV,qVAAC;gCAAG,WAAU;0CAAmI,SAAS,UAAU;;;;;;0CACpK,qVAAC;gCAAE,WAAU;0CAA4D;;;;;;0CACzE,qVAAC;gCAAG,WAAU;0CAA8H,SAAS,UAAU;;;;;;;;;;;;kCAGjK,qVAAC,+ZAAM,CAAC,GAAG;wBACT,SAAS;4BAAE,QAAQ;wBAAE;wBACrB,aAAa;4BAAE,QAAQ;wBAAE;wBACzB,UAAU;4BAAE,MAAM;wBAAK;wBACvB,YAAY;4BAAE,OAAO;wBAAI;wBACzB,WAAU;;;;;;kCAGZ,qVAAC,+ZAAM,CAAC,CAAC;wBACP,SAAS;4BAAE,SAAS;wBAAE;wBACtB,aAAa;4BAAE,SAAS;wBAAE;wBAC1B,UAAU;4BAAE,MAAM;wBAAK;wBACvB,YAAY;4BAAE,OAAO;wBAAI;wBACzB,WAAU;kCAET;;;;;;kCAIH,qVAAC,+ZAAM,CAAC,GAAG;wBACT,SAAS;4BAAE,SAAS;wBAAE;wBACtB,aAAa;4BAAE,SAAS;wBAAE;wBAC1B,UAAU;4BAAE,MAAM;wBAAK;wBACvB,YAAY;4BAAE,OAAO;wBAAE;wBACvB,WAAU;kCAEV,cAAA,qVAAC;4BAAI,WAAU;;8CACb,qVAAC;oCAAK,WAAU;8CAAgC;;;;;;8CAChD,qVAAC,+ZAAM,CAAC,GAAG;oCAAC,SAAS;wCAAE,GAAG;4CAAC;4CAAG;4CAAG;yCAAE;oCAAC;oCAAG,YAAY;wCAAE,UAAU;wCAAK,QAAQ,OAAO,iBAAiB;oCAAC;8CACnG,cAAA,qVAAC;wCAAI,WAAU;wCAAoB,MAAK;wCAAO,QAAO;wCAAe,SAAQ;kDAC3E,cAAA,qVAAC;4CAAK,eAAc;4CAAQ,gBAAe;4CAAQ,aAAa;4CAAG,GAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQrF;KAlFgB"}},
    {"offset": {"line": 611, "column": 0}, "map": {"version":3,"sources":["file:///Users/chiio/VSCode/wedd-inv/components/invitation/quote-section.tsx"],"sourcesContent":["\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport type { WeddingSettings } from \"@/lib/types\"\n\ninterface QuoteSectionProps {\n  settings: WeddingSettings\n}\n\nexport function QuoteSection({ settings }: QuoteSectionProps) {\n  return (\n    <section className=\"py-20 px-6\">\n      <div className=\"max-w-2xl mx-auto text-center\">\n        <motion.div\n          initial={{ opacity: 0, y: 30 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          viewport={{ once: true }}\n          className=\"glass rounded-3xl p-8 md:p-12\"\n        >\n          <svg className=\"w-10 h-10 text-gold/50 mx-auto mb-6\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path d=\"M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z\" />\n          </svg>\n\n          <p className=\"font-serif text-lg md:text-xl text-foreground/80 italic leading-relaxed mb-6\">\n            {settings.quote}\n          </p>\n\n          <div className=\"w-16 h-[1px] bg-gradient-to-r from-transparent via-gold to-transparent mx-auto mb-4\" />\n\n          <p className=\"text-sm text-gold font-medium\">{settings.quote_source}</p>\n        </motion.div>\n      </div>\n    </section>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASO,SAAS,aAAa,EAAE,QAAQ,EAAqB;IAC1D,qBACE,qVAAC;QAAQ,WAAU;kBACjB,cAAA,qVAAC;YAAI,WAAU;sBACb,cAAA,qVAAC,+ZAAM,CAAC,GAAG;gBACT,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAG;gBAC7B,aAAa;oBAAE,SAAS;oBAAG,GAAG;gBAAE;gBAChC,UAAU;oBAAE,MAAM;gBAAK;gBACvB,WAAU;;kCAEV,qVAAC;wBAAI,WAAU;wBAAsC,MAAK;wBAAe,SAAQ;kCAC/E,cAAA,qVAAC;4BAAK,GAAE;;;;;;;;;;;kCAGV,qVAAC;wBAAE,WAAU;kCACV,SAAS,KAAK;;;;;;kCAGjB,qVAAC;wBAAI,WAAU;;;;;;kCAEf,qVAAC;wBAAE,WAAU;kCAAiC,SAAS,YAAY;;;;;;;;;;;;;;;;;;;;;;AAK7E;KAzBgB"}},
    {"offset": {"line": 705, "column": 0}, "map": {"version":3,"sources":["file:///Users/chiio/VSCode/wedd-inv/components/invitation/couple-section.tsx"],"sourcesContent":["\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport type { WeddingSettings } from \"@/lib/types\"\n\ninterface CoupleSectionProps {\n  settings: WeddingSettings\n}\n\nexport function CoupleSection({ settings }: CoupleSectionProps) {\n  \n  return (\n    <section className=\"py-20 px-6\">\n      <div className=\"max-w-4xl mx-auto\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          viewport={{ once: true }}\n          className=\"text-center mb-12\"\n        >\n          <p className=\"text-xl md:text-2xl text-gold mb-2 font-[var(--font-amiri)]\" lang=\"ar\" dir=\"rtl\">بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ</p>\n          <h2 className=\"font-serif text-3xl md:text-4xl text-foreground\">Mempelai</h2>\n        </motion.div>\n\n        <div className=\"grid md:grid-cols-2 gap-8\">\n          {/* Groom */}\n          <motion.div\n            initial={{ opacity: 0, x: -30 }}\n            whileInView={{ opacity: 1, x: 0 }}\n            viewport={{ once: true }}\n            className=\"glass rounded-3xl p-8 text-center\"\n          >\n            <div className=\"w-40 h-40 mx-auto mb-6 rounded-full overflow-hidden border-4 border-gold/30 bg-muted flex items-center justify-center\">\n              {settings.groom_photo ? (\n                // eslint-disable-next-line @next/next/no-img-element\n                <img src={settings.groom_photo} alt={settings.groom_name} className=\"w-full h-full object-cover\" />\n              ) : (\n                <div className=\"w-full h-full\" aria-hidden />\n              )}\n            </div>\n            <h3 className=\"font-serif text-2xl text-gold-gradient mb-2\">{settings.groom_name}</h3>\n            <p className=\"text-muted-foreground mb-4\">Putra dari</p>\n            <p className=\"text-foreground\">Bapak {settings.groom_father}</p>\n            <p className=\"text-foreground\">& Ibu {settings.groom_mother}</p>\n          </motion.div>\n\n          {/* Bride */}\n          <motion.div\n            initial={{ opacity: 0, x: 30 }}\n            whileInView={{ opacity: 1, x: 0 }}\n            viewport={{ once: true }}\n            className=\"glass rounded-3xl p-8 text-center\"\n          >\n            <div className=\"w-40 h-40 mx-auto mb-6 rounded-full overflow-hidden border-4 border-gold/30 bg-muted flex items-center justify-center\">\n              {settings.bride_photo ? (\n                // eslint-disable-next-line @next/next/no-img-element\n                <img src={settings.bride_photo} alt={settings.bride_name} className=\"w-full h-full object-cover\" />\n              ) : (\n                <div className=\"w-full h-full\" aria-hidden />\n              )}\n            </div>\n            <h3 className=\"font-serif text-2xl text-gold-gradient mb-2\">{settings.bride_name}</h3>\n            <p className=\"text-muted-foreground mb-4\">Putri dari</p>\n            <p className=\"text-foreground\">Bapak {settings.bride_father}</p>\n            <p className=\"text-foreground\">& Ibu {settings.bride_mother}</p>\n          </motion.div>\n        </div>\n      </div>\n    </section>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASO,SAAS,cAAc,EAAE,QAAQ,EAAsB;IAE5D,qBACE,qVAAC;QAAQ,WAAU;kBACjB,cAAA,qVAAC;YAAI,WAAU;;8BACb,qVAAC,+ZAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,SAAS;wBAAG,GAAG;oBAAG;oBAC7B,aAAa;wBAAE,SAAS;wBAAG,GAAG;oBAAE;oBAChC,UAAU;wBAAE,MAAM;oBAAK;oBACvB,WAAU;;sCAEV,qVAAC;4BAAE,WAAU;4BAA8D,MAAK;4BAAK,KAAI;sCAAM;;;;;;sCAC/F,qVAAC;4BAAG,WAAU;sCAAkD;;;;;;;;;;;;8BAGlE,qVAAC;oBAAI,WAAU;;sCAEb,qVAAC,+ZAAM,CAAC,GAAG;4BACT,SAAS;gCAAE,SAAS;gCAAG,GAAG,CAAC;4BAAG;4BAC9B,aAAa;gCAAE,SAAS;gCAAG,GAAG;4BAAE;4BAChC,UAAU;gCAAE,MAAM;4BAAK;4BACvB,WAAU;;8CAEV,qVAAC;oCAAI,WAAU;8CACZ,SAAS,WAAW,GACnB,qDAAqD;kDACrD,qVAAC;wCAAI,KAAK,SAAS,WAAW;wCAAE,KAAK,SAAS,UAAU;wCAAE,WAAU;;;;;6DAEpE,qVAAC;wCAAI,WAAU;wCAAgB,aAAW;;;;;;;;;;;8CAG9C,qVAAC;oCAAG,WAAU;8CAA+C,SAAS,UAAU;;;;;;8CAChF,qVAAC;oCAAE,WAAU;8CAA6B;;;;;;8CAC1C,qVAAC;oCAAE,WAAU;;wCAAkB;wCAAO,SAAS,YAAY;;;;;;;8CAC3D,qVAAC;oCAAE,WAAU;;wCAAkB;wCAAO,SAAS,YAAY;;;;;;;;;;;;;sCAI7D,qVAAC,+ZAAM,CAAC,GAAG;4BACT,SAAS;gCAAE,SAAS;gCAAG,GAAG;4BAAG;4BAC7B,aAAa;gCAAE,SAAS;gCAAG,GAAG;4BAAE;4BAChC,UAAU;gCAAE,MAAM;4BAAK;4BACvB,WAAU;;8CAEV,qVAAC;oCAAI,WAAU;8CACZ,SAAS,WAAW,GACnB,qDAAqD;kDACrD,qVAAC;wCAAI,KAAK,SAAS,WAAW;wCAAE,KAAK,SAAS,UAAU;wCAAE,WAAU;;;;;6DAEpE,qVAAC;wCAAI,WAAU;wCAAgB,aAAW;;;;;;;;;;;8CAG9C,qVAAC;oCAAG,WAAU;8CAA+C,SAAS,UAAU;;;;;;8CAChF,qVAAC;oCAAE,WAAU;8CAA6B;;;;;;8CAC1C,qVAAC;oCAAE,WAAU;;wCAAkB;wCAAO,SAAS,YAAY;;;;;;;8CAC3D,qVAAC;oCAAE,WAAU;;wCAAkB;wCAAO,SAAS,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMvE;KA7DgB"}},
    {"offset": {"line": 953, "column": 0}, "map": {"version":3,"sources":["file:///Users/chiio/VSCode/wedd-inv/components/invitation/countdown-section.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { motion } from \"framer-motion\"\n\ninterface CountdownSectionProps {\n  weddingDate: string\n  backgroundImage?: string | null\n}\n\ninterface TimeLeft {\n  days: number\n  hours: number\n  minutes: number\n  seconds: number\n}\n\nexport function CountdownSection({ weddingDate, backgroundImage }: CountdownSectionProps) {\n  const [timeLeft, setTimeLeft] = useState<TimeLeft>({ days: 0, hours: 0, minutes: 0, seconds: 0 })\n\n  useEffect(() => {\n    const calculateTimeLeft = () => {\n      const difference = new Date(weddingDate).getTime() - new Date().getTime()\n\n      if (difference > 0) {\n        setTimeLeft({\n          days: Math.floor(difference / (1000 * 60 * 60 * 24)),\n          hours: Math.floor((difference / (1000 * 60 * 60)) % 24),\n          minutes: Math.floor((difference / 1000 / 60) % 60),\n          seconds: Math.floor((difference / 1000) % 60),\n        })\n      }\n    }\n\n    calculateTimeLeft()\n    const timer = setInterval(calculateTimeLeft, 1000)\n    return () => clearInterval(timer)\n  }, [weddingDate])\n\n  const timeBlocks = [\n    { value: timeLeft.days, label: \"Hari\" },\n    { value: timeLeft.hours, label: \"Jam\" },\n    { value: timeLeft.minutes, label: \"Menit\" },\n    { value: timeLeft.seconds, label: \"Detik\" },\n  ]\n\n  const bgUrl = backgroundImage && backgroundImage.length > 0 ? backgroundImage : '/soft-floral-pattern-cream-gold-wedding-background.jpg'\n\n  return (\n    <section className=\"py-20 px-6 relative overflow-hidden\">\n      <div\n        className=\"absolute inset-0 bg-cover bg-center bg-fixed\"\n        style={{\n          backgroundImage: `url('${bgUrl}')`,\n        }}\n      >\n        <div className=\"absolute inset-0 bg-background/80\" />\n      </div>\n\n      <div className=\"relative z-10 max-w-4xl mx-auto text-center\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          viewport={{ once: true }}\n          className=\"mb-10\"\n        >\n          <p className=\"text-sm tracking-[0.2em] text-gold uppercase mb-2\">Save The Date</p>\n          <h2 className=\"font-serif text-3xl md:text-4xl text-foreground\">Menghitung Hari</h2>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 30 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          viewport={{ once: true }}\n          className=\"grid grid-cols-4 gap-3 md:gap-6 max-w-xl mx-auto\"\n        >\n          {timeBlocks.map((block, index) => (\n            <div key={block.label} className=\"glass rounded-2xl p-4 md:p-6\">\n              <motion.span\n                key={block.value}\n                initial={{ scale: 1.2, opacity: 0 }}\n                animate={{ scale: 1, opacity: 1 }}\n                className=\"block font-serif text-3xl md:text-5xl text-gold-gradient font-medium\"\n              >\n                {String(block.value).padStart(2, \"0\")}\n              </motion.span>\n              <span className=\"text-xs md:text-sm text-muted-foreground mt-2 block\">{block.label}</span>\n            </div>\n          ))}\n        </motion.div>\n      </div>\n    </section>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAiBO,SAAS,iBAAiB,EAAE,WAAW,EAAE,eAAe,EAAyB;;IACtF,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iUAAQ,EAAW;QAAE,MAAM;QAAG,OAAO;QAAG,SAAS;QAAG,SAAS;IAAE;IAE/F,IAAA,kUAAS;sCAAC;YACR,MAAM;gEAAoB;oBACxB,MAAM,aAAa,IAAI,KAAK,aAAa,OAAO,KAAK,IAAI,OAAO,OAAO;oBAEvE,IAAI,aAAa,GAAG;wBAClB,YAAY;4BACV,MAAM,KAAK,KAAK,CAAC,aAAa,CAAC,OAAO,KAAK,KAAK,EAAE;4BAClD,OAAO,KAAK,KAAK,CAAC,AAAC,aAAa,CAAC,OAAO,KAAK,EAAE,IAAK;4BACpD,SAAS,KAAK,KAAK,CAAC,AAAC,aAAa,OAAO,KAAM;4BAC/C,SAAS,KAAK,KAAK,CAAC,AAAC,aAAa,OAAQ;wBAC5C;oBACF;gBACF;;YAEA;YACA,MAAM,QAAQ,YAAY,mBAAmB;YAC7C;8CAAO,IAAM,cAAc;;QAC7B;qCAAG;QAAC;KAAY;IAEhB,MAAM,aAAa;QACjB;YAAE,OAAO,SAAS,IAAI;YAAE,OAAO;QAAO;QACtC;YAAE,OAAO,SAAS,KAAK;YAAE,OAAO;QAAM;QACtC;YAAE,OAAO,SAAS,OAAO;YAAE,OAAO;QAAQ;QAC1C;YAAE,OAAO,SAAS,OAAO;YAAE,OAAO;QAAQ;KAC3C;IAED,MAAM,QAAQ,mBAAmB,gBAAgB,MAAM,GAAG,IAAI,kBAAkB;IAEhF,qBACE,qVAAC;QAAQ,WAAU;;0BACjB,qVAAC;gBACC,WAAU;gBACV,OAAO;oBACL,iBAAiB,CAAC,KAAK,EAAE,MAAM,EAAE,CAAC;gBACpC;0BAEA,cAAA,qVAAC;oBAAI,WAAU;;;;;;;;;;;0BAGjB,qVAAC;gBAAI,WAAU;;kCACb,qVAAC,+ZAAM,CAAC,GAAG;wBACT,SAAS;4BAAE,SAAS;4BAAG,GAAG;wBAAG;wBAC7B,aAAa;4BAAE,SAAS;4BAAG,GAAG;wBAAE;wBAChC,UAAU;4BAAE,MAAM;wBAAK;wBACvB,WAAU;;0CAEV,qVAAC;gCAAE,WAAU;0CAAoD;;;;;;0CACjE,qVAAC;gCAAG,WAAU;0CAAkD;;;;;;;;;;;;kCAGlE,qVAAC,+ZAAM,CAAC,GAAG;wBACT,SAAS;4BAAE,SAAS;4BAAG,GAAG;wBAAG;wBAC7B,aAAa;4BAAE,SAAS;4BAAG,GAAG;wBAAE;wBAChC,UAAU;4BAAE,MAAM;wBAAK;wBACvB,WAAU;kCAET,WAAW,GAAG,CAAC,CAAC,OAAO,sBACtB,qVAAC;gCAAsB,WAAU;;kDAC/B,qVAAC,+ZAAM,CAAC,IAAI;wCAEV,SAAS;4CAAE,OAAO;4CAAK,SAAS;wCAAE;wCAClC,SAAS;4CAAE,OAAO;4CAAG,SAAS;wCAAE;wCAChC,WAAU;kDAET,OAAO,MAAM,KAAK,EAAE,QAAQ,CAAC,GAAG;uCAL5B,MAAM,KAAK;;;;;kDAOlB,qVAAC;wCAAK,WAAU;kDAAuD,MAAM,KAAK;;;;;;;+BAT1E,MAAM,KAAK;;;;;;;;;;;;;;;;;;;;;;AAgBjC;GA5EgB;KAAA"}},
    {"offset": {"line": 1150, "column": 0}, "map": {"version":3,"sources":["file:///Users/chiio/VSCode/wedd-inv/components/invitation/event-section.tsx"],"sourcesContent":["\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport type { WeddingSettings } from \"@/lib/types\"\nimport { Calendar, Clock, MapPin, HeartHandshake, Flower2 } from \"lucide-react\"\n\ninterface EventSectionProps {\n  settings: WeddingSettings\n}\n\nexport function EventSection({ settings }: EventSectionProps) {\n  const weddingDate = new Date(settings.wedding_date)\n  const formattedDate = weddingDate.toLocaleDateString(\"id-ID\", {\n    weekday: \"long\",\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\",\n  })\n\n  return (\n    <section className=\"py-20 px-6\">\n      <div className=\"max-w-4xl mx-auto\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          viewport={{ once: true }}\n          className=\"text-center mb-12\"\n        >\n          <p className=\"text-sm tracking-[0.2em] text-gold uppercase mb-2\">Wedding Event</p>\n          <h2 className=\"font-serif text-3xl md:text-4xl text-foreground\">Acara Pernikahan</h2>\n        </motion.div>\n\n        <div className=\"grid md:grid-cols-2 gap-8\">\n          {/* Akad */}\n          <motion.div\n            initial={{ opacity: 0, y: 30 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            className=\"glass rounded-3xl p-8 text-center\"\n          >\n            <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-gold/10 flex items-center justify-center\">\n              <HeartHandshake className=\"w-6 h-6 text-gold\" />\n            </div>\n            <h3 className=\"font-serif text-2xl text-foreground mb-6\">Akad Nikah</h3>\n\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-center gap-3 text-muted-foreground\">\n                <Calendar className=\"w-5 h-5 text-gold\" />\n                <span>{formattedDate}</span>\n              </div>\n              <div className=\"flex items-center justify-center gap-3 text-muted-foreground\">\n                <Clock className=\"w-5 h-5 text-gold\" />\n                <span>{settings.akad_time} WIB - Selesai</span>\n              </div>\n              <div className=\"flex items-start justify-center gap-3 text-muted-foreground\">\n                <MapPin className=\"w-5 h-5 text-gold flex-shrink-0 mt-0.5\" />\n                <div className=\"text-left\">\n                  <p className=\"font-medium text-foreground\">{settings.akad_location}</p>\n                  <p className=\"text-sm\">{settings.akad_address}</p>\n                </div>\n              </div>\n            </div>\n          </motion.div>\n\n          {/* Resepsi */}\n          <motion.div\n            initial={{ opacity: 0, y: 30 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            transition={{ delay: 0.2 }}\n            className=\"glass rounded-3xl p-8 text-center\"\n          >\n            <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-gold/10 flex items-center justify-center\">\n              <Flower2 className=\"w-6 h-6 text-gold\" />\n            </div>\n            <h3 className=\"font-serif text-2xl text-foreground mb-6\">Resepsi</h3>\n\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-center gap-3 text-muted-foreground\">\n                <Calendar className=\"w-5 h-5 text-gold\" />\n                <span>{formattedDate}</span>\n              </div>\n              <div className=\"flex items-center justify-center gap-3 text-muted-foreground\">\n                <Clock className=\"w-5 h-5 text-gold\" />\n                <span>{settings.reception_time} WIB - Selesai</span>\n              </div>\n              <div className=\"flex items-start justify-center gap-3 text-muted-foreground\">\n                <MapPin className=\"w-5 h-5 text-gold flex-shrink-0 mt-0.5\" />\n                <div className=\"text-left\">\n                  <p className=\"font-medium text-foreground\">{settings.reception_location}</p>\n                  <p className=\"text-sm\">{settings.reception_address}</p>\n                </div>\n              </div>\n            </div>\n          </motion.div>\n        </div>\n\n        {/* Google Maps */}\n        <motion.div\n          initial={{ opacity: 0, y: 30 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          viewport={{ once: true }}\n          className=\"mt-8 glass rounded-3xl overflow-hidden\"\n        >\n          <iframe\n            src={`https://www.google.com/maps/embed/v1/place?key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8&q=${settings.venue_lat},${settings.venue_lng}&zoom=15`}\n            width=\"100%\"\n            height=\"300\"\n            style={{ border: 0 }}\n            allowFullScreen\n            loading=\"lazy\"\n            referrerPolicy=\"no-referrer-when-downgrade\"\n            title=\"Lokasi Venue\"\n          />\n          <div className=\"p-4 text-center\">\n            <a\n              href={`https://www.google.com/maps/dir/?api=1&destination=${settings.venue_lat},${settings.venue_lng}`}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"inline-flex items-center gap-2 px-6 py-3 glass-gold rounded-full text-gold font-medium hover:opacity-90 transition-opacity\"\n            >\n              <MapPin className=\"w-5 h-5\" />\n              Buka di Google Maps\n            </a>\n          </div>\n        </motion.div>\n      </div>\n    </section>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1593, "column": 0}, "map": {"version":3,"sources":["file:///Users/chiio/VSCode/wedd-inv/components/invitation/gallery-section.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useMemo } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport type { GalleryItem } from \"@/lib/types\"\nimport { X, ChevronLeft, ChevronRight } from \"lucide-react\"\n\ninterface GallerySectionProps {\n  images: GalleryItem[]\n}\n\nexport function GallerySection({ images }: GallerySectionProps) {\n  const [selectedIndex, setSelectedIndex] = useState<number | null>(null)\n  // shuffle and pick images for display on the invitation\n  const displayedImages = useMemo(() => {\n    const src = images && images.length > 0 ? images.slice() : []\n    // Fisher-Yates shuffle\n    for (let i = src.length - 1; i > 0; i -= 1) {\n      const j = Math.floor(Math.random() * (i + 1))\n      const tmp = src[i]\n      src[i] = src[j]\n      src[j] = tmp\n    }\n    return src.slice(0, 9) // Take 9 images\n  }, [images])\n\n  const defaultImages: GalleryItem[] =\n    displayedImages.length > 0\n      ? displayedImages\n      : [\n          { id: \"1\", image_url: \"/romantic-couple-prewedding-photo-outdoor-nature.jpg\", caption: \"Our Journey\", sort_order: 0, created_at: \"\" },\n          { id: \"2\", image_url: \"/elegant-couple-engagement-photo-studio.jpg\", caption: \"Engagement\", sort_order: 1, created_at: \"\" },\n          { id: \"3\", image_url: \"/couple-holding-hands-sunset-romantic.jpg\", caption: \"Together\", sort_order: 2, created_at: \"\" },\n          { id: \"4\", image_url: \"/couple-laughing-happy-candid-moment.jpg\", caption: \"Joy\", sort_order: 3, created_at: \"\" },\n          { id: \"5\", image_url: \"/couple-traditional-indonesian-wedding-attire.jpg\", caption: \"Traditional\", sort_order: 4, created_at: \"\" },\n          { id: \"6\", image_url: \"/couple-looking-at-each-other-romantic-gaze.jpg\", caption: \"Love\", sort_order: 5, created_at: \"\" },\n        ]\n\n  const openLightbox = (index: number) => setSelectedIndex(index)\n  const closeLightbox = () => setSelectedIndex(null)\n  const goNext = () => setSelectedIndex((prev) => (prev !== null ? (prev + 1) % defaultImages.length : 0))\n  const goPrev = () =>\n    setSelectedIndex((prev) => (prev !== null ? (prev - 1 + defaultImages.length) % defaultImages.length : 0))\n\n  return (\n    <section className=\"py-20 px-6\">\n      <div className=\"max-w-6xl mx-auto\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          viewport={{ once: true }}\n          className=\"text-center mb-12\"\n        >\n          <p className=\"text-sm tracking-[0.2em] text-gold uppercase mb-2\">Our Gallery</p>\n          <h2 className=\"font-serif text-3xl md:text-4xl text-foreground\">Galeri Foto</h2>\n        </motion.div>\n\n        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n          {defaultImages.slice(0, 8).map((image, index) => (\n            <motion.div\n              key={image.id}\n              initial={{ opacity: 0, scale: 0.9 }}\n              whileInView={{ opacity: 1, scale: 1 }}\n              viewport={{ once: true }}\n              transition={{ delay: index * 0.1 }}\n              className=\"relative aspect-square cursor-pointer group overflow-hidden rounded-2xl\"\n              onClick={() => openLightbox(index)}\n            >\n              <img\n                src={image.image_url || \"/placeholder.svg\"}\n                alt={image.caption || `Gallery ${index + 1}`}\n                className=\"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110\"\n              />\n              <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-4\">\n                <p className=\"text-white font-medium\">{image.caption}</p>\n              </div>\n            </motion.div>\n          ))}\n          {/* Show 9th image only on tablet/desktop */}\n          {defaultImages[8] && (\n            <motion.div\n              key={defaultImages[8].id}\n              initial={{ opacity: 0, scale: 0.9 }}\n              whileInView={{ opacity: 1, scale: 1 }}\n              viewport={{ once: true }}\n              transition={{ delay: 8 * 0.1 }}\n              className=\"hidden md:block relative aspect-square cursor-pointer group overflow-hidden rounded-2xl\"\n              onClick={() => openLightbox(8)}\n            >\n              <img\n                src={defaultImages[8].image_url || \"/placeholder.svg\"}\n                alt={defaultImages[8].caption || \"Gallery 9\"}\n                className=\"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110\"\n              />\n              <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-4\">\n                <p className=\"text-white font-medium\">{defaultImages[8].caption}</p>\n              </div>\n            </motion.div>\n          )}\n        </div>\n\n        {/* Lightbox */}\n        <AnimatePresence>\n          {selectedIndex !== null && (\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4\"\n              onClick={closeLightbox}\n            >\n              <button\n                onClick={closeLightbox}\n                className=\"absolute top-4 right-4 p-2 text-white/80 hover:text-white transition-colors\"\n              >\n                <X className=\"w-8 h-8\" />\n              </button>\n\n              <button\n                onClick={(e) => {\n                  e.stopPropagation()\n                  goPrev()\n                }}\n                className=\"absolute left-4 p-2 text-white/80 hover:text-white transition-colors\"\n              >\n                <ChevronLeft className=\"w-8 h-8\" />\n              </button>\n\n              <motion.img\n                key={selectedIndex}\n                initial={{ opacity: 0, scale: 0.9 }}\n                animate={{ opacity: 1, scale: 1 }}\n                exit={{ opacity: 0, scale: 0.9 }}\n                src={defaultImages[selectedIndex].image_url}\n                alt={defaultImages[selectedIndex].caption || \"\"}\n                className=\"max-w-full max-h-[85vh] object-contain rounded-lg\"\n                onClick={(e) => e.stopPropagation()}\n              />\n\n              <button\n                onClick={(e) => {\n                  e.stopPropagation()\n                  goNext()\n                }}\n                className=\"absolute right-4 p-2 text-white/80 hover:text-white transition-colors\"\n              >\n                <ChevronRight className=\"w-8 h-8\" />\n              </button>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </section>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1945, "column": 0}, "map": {"version":3,"sources":["file:///Users/chiio/VSCode/wedd-inv/lib/actions.ts"],"sourcesContent":["\"use server\"\n\nimport { createClient } from \"@/lib/supabase/server\"\nimport { createClient as createSupabaseClient } from \"@supabase/supabase-js\"\nimport { revalidatePath } from \"next/cache\"\nimport { redirect } from \"next/navigation\"\nimport type { Comment, Guest, WeddingSettings, GalleryItem } from \"@/lib/types\"\n\n// ============ Auth Actions ============\n\nexport async function loginAdmin(email: string, password: string) {\n  const supabase = await createClient()\n\n  const { error } = await supabase.auth.signInWithPassword({\n    email,\n    password,\n  })\n\n  if (error) {\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/admin\")\n  return { success: true }\n}\n\nexport async function logoutAdmin() {\n  const supabase = await createClient()\n  await supabase.auth.signOut()\n  revalidatePath(\"/admin\")\n  redirect(\"/admin/login\")\n}\n\n// Change admin password (server action) — uses server session from cookies\nexport async function changeAdminPassword(newPassword: string) {\n  const supabase = await createClient()\n\n  const { error } = await supabase.auth.updateUser({ password: newPassword })\n\n  if (error) {\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/admin\")\n  return { success: true }\n}\n\n// ============ Comments Actions ============\n\nexport async function getComments(): Promise<Comment[]> {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"comments\")\n    .select(\"*\")\n    .eq(\"is_approved\", true)\n    .order(\"created_at\", { ascending: false })\n\n  if (error) {\n    console.error(\"Error fetching comments:\", error)\n    return []\n  }\n  return data || []\n}\n\nexport async function submitComment(formData: { guest_name: string; message: string }) {\n  const supabase = await createClient()\n\n  const { error } = await supabase.from(\"comments\").insert({\n    guest_name: formData.guest_name,\n    message: formData.message,\n    is_approved: true,\n  })\n\n  if (error) {\n    console.error(\"Error submitting comment:\", error)\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/\")\n  return { success: true }\n}\n\n// ============ RSVP Actions ============\n\nexport async function updateRSVP(guestId: string, attendance: string, guestCount: number) {\n  const supabase = await createClient()\n\n  const { error } = await supabase\n    .from(\"guests\")\n    .update({\n      attendance_status: attendance,\n      guest_count: guestCount,\n      updated_at: new Date().toISOString(),\n    })\n    .eq(\"id\", guestId)\n\n  if (error) {\n    console.error(\"Error updating RSVP:\", error)\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/\")\n  return { success: true }\n}\n\nexport async function getGuestBySlug(slug: string): Promise<Guest | null> {\n  const supabase = await createClient()\n  const { data, error } = await supabase.from(\"guests\").select(\"*\").eq(\"slug\", slug).single()\n\n  if (error) {\n    console.error(\"Error fetching guest:\", error)\n    return null\n  }\n  return data\n}\n\n// ============ Wedding Settings Actions ============\n\nexport async function getWeddingSettings(): Promise<WeddingSettings | null> {\n  const supabase = await createClient()\n  const { data, error } = await supabase.from(\"wedding_settings\").select(\"*\").single()\n\n  if (error) {\n    console.error(\"Error fetching settings:\", error)\n    return null\n  }\n  return data\n}\n\nexport async function updateWeddingSettings(settingsId: string, settings: Partial<WeddingSettings>) {\n  // Prefer service-role client for writes when available to avoid RLS/anon issues\n  let supabase = await createClient()\n  if (process.env.SUPABASE_SERVICE_ROLE_KEY && process.env.SUPABASE_URL) {\n    supabase = createSupabaseClient(process.env.SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY, {\n      auth: { persistSession: false },\n    }) as any\n  }\n\n  const { data, error } = await supabase\n    .from(\"wedding_settings\")\n    .update({ ...settings, updated_at: new Date().toISOString() })\n    .eq(\"id\", settingsId)\n    .select()\n    .single()\n\n  if (error) {\n    return { success: false, error: error.message, data: null }\n  }\n\n  revalidatePath(\"/\")\n  revalidatePath(\"/admin\")\n  return { success: true, data }\n}\n\n// ============ Gallery Actions ============\n\nexport async function getGalleryItems(): Promise<GalleryItem[]> {\n  const supabase = await createClient()\n  const { data, error } = await supabase.from(\"gallery\").select(\"*\").order(\"sort_order\", { ascending: true })\n\n  if (error) {\n    console.error(\"Error fetching gallery:\", error)\n    return []\n  }\n  return data || []\n}\n\nexport async function addGalleryItem(imageUrl: string, caption?: string) {\n  const supabase = await createClient()\n\n  // Get max sort order\n  const { data: maxOrder } = await supabase\n    .from(\"gallery\")\n    .select(\"sort_order\")\n    .order(\"sort_order\", { ascending: false })\n    .limit(1)\n    .single()\n\n  const { data, error } = await supabase\n    .from(\"gallery\")\n    .insert({\n      image_url: imageUrl,\n      caption,\n      sort_order: (maxOrder?.sort_order || 0) + 1,\n    })\n    .select()\n    .single()\n\n  if (error) {\n    return { success: false, error: error.message, data: null }\n  }\n\n  revalidatePath(\"/\")\n  revalidatePath(\"/admin\")\n  return { success: true, data }\n}\n\nexport async function deleteGalleryItem(id: string) {\n  const supabase = await createClient()\n\n  const { error } = await supabase.from(\"gallery\").delete().eq(\"id\", id)\n\n  if (error) {\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/\")\n  revalidatePath(\"/admin\")\n  return { success: true }\n}\n\nexport async function updateGalleryItem(id: string, updates: Partial<{ image_url: string; caption: string }>) {\n  const supabase = await createClient()\n\n  const payload = { ...updates, updated_at: new Date().toISOString() }\n\n  const { data, error } = await supabase.from(\"gallery\").update(payload).eq(\"id\", id).select().single()\n\n  if (error) {\n    console.error(\"updateGalleryItem: supabase update error\", { error, id, payload })\n    return { success: false, error: error.message || JSON.stringify(error), data: null }\n  }\n\n  revalidatePath(\"/\")\n  revalidatePath(\"/admin\")\n  return { success: true, data }\n}\n\n// ============ Guests Management Actions ============\n\nexport async function getGuests(): Promise<Guest[]> {\n  const supabase = await createClient()\n  const { data, error } = await supabase.from(\"guests\").select(\"*\").order(\"created_at\", { ascending: false })\n\n  if (error) {\n    console.error(\"Error fetching guests:\", error)\n    return []\n  }\n  return data || []\n}\n\nexport async function addGuest(guestData: {\n  name: string\n  phone?: string\n  address?: string\n  guest_count?: number\n}) {\n  const supabase = await createClient()\n\n  const slug =\n    guestData.name\n      .toLowerCase()\n      .replace(/[^a-z0-9]+/g, \"-\")\n      .replace(/^-|-$/g, \"\") +\n    \"-\" +\n    Math.random().toString(36).substr(2, 6)\n\n  const payload = {\n    name: guestData.name,\n    slug,\n    unique_slug: slug,\n    phone: guestData.phone,\n    address: guestData.address,\n    attendance_status: \"pending\",\n    guest_count: guestData.guest_count || 1,\n  }\n\n  const { data, error } = await supabase.from(\"guests\").insert(payload).select().single()\n\n  if (error) {\n    // Log full error and payload to help debug PostgREST 400 issues\n    console.error(\"addGuest: supabase insert error\", { error, payload })\n    return { success: false, error: error.message || JSON.stringify(error), data: null }\n  }\n\n  revalidatePath(\"/admin\")\n  return { success: true, data }\n}\n\nexport async function updateGuest(id: string, updates: Partial<{ name: string; phone: string; address: string; guest_count: number; attendance_status: string }>) {\n  const supabase = await createClient()\n\n  const payload = { ...updates, updated_at: new Date().toISOString() }\n\n  const { data, error } = await supabase.from(\"guests\").update(payload).eq(\"id\", id).select().single()\n\n  if (error) {\n    console.error(\"updateGuest: supabase update error\", { error, id, payload })\n    return { success: false, error: error.message || JSON.stringify(error), data: null }\n  }\n\n  revalidatePath(\"/admin\")\n  return { success: true, data }\n}\n\nexport async function deleteGuest(id: string) {\n  const supabase = await createClient()\n\n  const { error } = await supabase.from(\"guests\").delete().eq(\"id\", id)\n\n  if (error) {\n    console.error(\"deleteGuest: supabase delete error\", { error, id })\n    return { success: false, error: error.message || JSON.stringify(error) }\n  }\n\n  revalidatePath(\"/admin\")\n  return { success: true }\n}\n\n// ============ Comments Management Actions ============\n\nexport async function getAllComments(): Promise<Comment[]> {\n  const supabase = await createClient()\n  const { data, error } = await supabase.from(\"comments\").select(\"*\").order(\"created_at\", { ascending: false })\n\n  if (error) {\n    console.error(\"Error fetching all comments:\", error)\n    return []\n  }\n  return data || []\n}\n\nexport async function toggleCommentApproval(id: string, currentStatus: boolean) {\n  const supabase = await createClient()\n\n  const { error } = await supabase.from(\"comments\").update({ is_approved: !currentStatus }).eq(\"id\", id)\n\n  if (error) {\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/\")\n  revalidatePath(\"/admin\")\n  return { success: true, newStatus: !currentStatus }\n}\n\nexport async function deleteComment(id: string) {\n  const supabase = await createClient()\n\n  const { error } = await supabase.from(\"comments\").delete().eq(\"id\", id)\n\n  if (error) {\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/\")\n  revalidatePath(\"/admin\")\n  return { success: true }\n}\n\n// ============ Guests blasting helpers ============\n\nfunction normalizePhoneForWa(phone?: string) {\n  if (!phone) return null\n  const digits = phone.replace(/[^0-9]/g, \"\")\n  if (digits.startsWith(\"0\")) return \"62\" + digits.slice(1)\n  if (digits.startsWith(\"62\")) return digits\n  if (digits.startsWith(\"8\")) return \"62\" + digits\n  return digits\n}\n\nfunction interpolateTemplate(template: string, data: Record<string, string | number | null>) {\n  // Support both {key} and {{key}} placeholders\n  return template.replace(/\\{\\{?\\s*(\\w+)\\s*\\}?\\}/g, (_, key) => {\n    const v = data[key]\n    return v == null ? \"\" : String(v)\n  })\n}\n\nfunction transformFormattingForWhatsApp(text: string) {\n  if (!text) return text\n\n  // HTML-like tags -> WhatsApp formatting\n  // Bold/strong -> *text*\n  text = text.replace(/<\\s*(?:b|strong)>([\\s\\S]*?)<\\s*\\/\\s*(?:b|strong)>/gi, '*$1*')\n\n  // Italic/em -> _text_\n  text = text.replace(/<\\s*(?:i|em)>([\\s\\S]*?)<\\s*\\/\\s*(?:i|em)>/gi, '_$1_')\n\n  // Strikethrough -> ~text~\n  text = text.replace(/<\\s*(?:s|strike|del)>([\\s\\S]*?)<\\s*\\/\\s*(?:s|strike|del)>/gi, '~$1~')\n\n  // Code/pre -> ```text``` (preserve newlines)\n  text = text.replace(/<\\s*(?:pre|code)>([\\s\\S]*?)<\\s*\\/\\s*(?:pre|code)>/gi, '```$1```')\n\n  // Underline is not supported by WhatsApp; map <u> to italic as closest alternative\n  text = text.replace(/<\\s*u>([\\s\\S]*?)<\\s*\\/\\s*u>/gi, '_$1_')\n\n  // Markdown-like shortcuts: **bold** -> *bold*, __underline__ -> _underline_ (note: WhatsApp doesn't support underline)\n  text = text.replace(/\\*\\*(.*?)\\*\\*/g, '*$1*')\n  text = text.replace(/__(.*?)__/g, '_$1_')\n\n  return text\n}\n\nexport async function ensureGuestUniqueCode(id: string) {\n  const supabase = await createClient()\n  const { data: g, error: fetchErr } = await supabase.from(\"guests\").select(\"id,unique_code\").eq(\"id\", id).single()\n  if (fetchErr) {\n    console.error(\"ensureGuestUniqueCode: fetch error\", fetchErr)\n    return null\n  }\n  if (g.unique_code) return g.unique_code\n\n  const code = substringRandomCode()\n  const { error: updErr } = await supabase.from(\"guests\").update({ unique_code: code }).eq(\"id\", id)\n  if (updErr) {\n    console.error(\"ensureGuestUniqueCode: update error\", updErr)\n    return null\n  }\n  return code\n}\n\nfunction substringRandomCode() {\n  return Math.random().toString(36).substr(2, 9)\n}\n\nexport async function generateBlastMessageForGuest(guestId: string) {\n  const supabase = await createClient()\n  const { data: guest, error: gErr } = await supabase.from(\"guests\").select(\"*\").eq(\"id\", guestId).single()\n  if (gErr || !guest) {\n    console.error(\"generateBlastMessageForGuest: guest fetch error\", gErr)\n    return { success: false, error: gErr?.message || \"Guest not found\" }\n  }\n\n  const settings = await getWeddingSettings()\n\n  // Ensure unique code exists\n  if (!guest.unique_code) {\n    const code = Math.random().toString(36).substr(2, 9)\n    await supabase.from(\"guests\").update({ unique_code: code }).eq(\"id\", guestId)\n    guest.unique_code = code\n  }\n\n  const baseUrlRaw = process.env.NEXT_PUBLIC_SITE_URL || process.env.SITE_URL || \"\"\n  const baseUrl = String(baseUrlRaw).replace(/\\/$/, \"\")\n  // Make the link format match the client clipboard link: `${origin}?to=<slug>`\n  const link = `${baseUrl}?to=${encodeURIComponent(guest.unique_slug || guest.slug || guest.id)}`\n\n  const template = settings?.whatsapp_template || \"Halo {name}, Anda diundang. Silakan lihat: {link} (kode: {unique_code})\"\n\n  // Detect whether admin included a {link} placeholder; if not, we'll append the link after formatting\n  const includesLinkPlaceholder = /\\{\\{?\\s*link\\s*\\}?\\}/i.test(template)\n\n  let message = interpolateTemplate(template, {\n    name: guest.name,\n    unique_code: guest.unique_code,\n    link,\n  })\n\n  // Apply WhatsApp formatting conversions (HTML-like tags or markdown shortcuts)\n  message = transformFormattingForWhatsApp(message)\n\n  // If template didn't include link, append it at the end so the invite always contains the URL\n  if (!includesLinkPlaceholder) {\n    message = `${message}\\n\\n${link}`\n  }\n\n  const phone = normalizePhoneForWa(guest.phone)\n  if (!phone) return { success: false, error: \"No phone number\" }\n\n  const waLink = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`\n\n  return { success: true, waLink, message }\n}\n\nexport async function sendWhatsAppViaTwilio(guestId: string) {\n  // Optional: if TWILIO env vars are present, attempt to send via Twilio's API\n  const SID = process.env.TWILIO_ACCOUNT_SID\n  const TOKEN = process.env.TWILIO_AUTH_TOKEN\n  const FROM = process.env.TWILIO_WHATSAPP_FROM // e.g. 'whatsapp:+1415...'\n  if (!SID || !TOKEN || !FROM) {\n    return { success: false, error: \"Twilio credentials not configured\" }\n  }\n\n  const supabase = await createClient()\n  const { data: guest, error: gErr } = await supabase.from(\"guests\").select(\"*\").eq(\"id\", guestId).single()\n  if (gErr || !guest) return { success: false, error: gErr?.message || \"Guest not found\" }\n\n  // ensure unique_code\n  let code = guest.unique_code\n  if (!code) {\n    code = Math.random().toString(36).substr(2, 9)\n    await supabase.from(\"guests\").update({ unique_code: code }).eq(\"id\", guestId)\n  }\n\n  const settings = await getWeddingSettings()\n  const template = settings?.whatsapp_template || \"Halo {name}, Anda diundang. Silakan lihat: {link} (kode: {unique_code})\"\n  const baseUrlRaw = process.env.NEXT_PUBLIC_SITE_URL || process.env.SITE_URL || \"\"\n  const baseUrl = String(baseUrlRaw).replace(/\\/$/, \"\")\n  const link = `${baseUrl}?to=${encodeURIComponent(guest.unique_slug || guest.slug || guest.id)}`\n  const message = interpolateTemplate(template, { name: guest.name, unique_code: code, link })\n\n  const phone = normalizePhoneForWa(guest.phone)\n  if (!phone) return { success: false, error: \"No phone number\" }\n\n  const url = `https://api.twilio.com/2010-04-01/Accounts/${SID}/Messages.json`\n  const payload = new URLSearchParams()\n  payload.append(\"To\", `whatsapp:+${phone}`)\n  payload.append(\"From\", FROM)\n  payload.append(\"Body\", message)\n\n  try {\n    const res = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Authorization: `Basic ${Buffer.from(`${SID}:${TOKEN}`).toString(\"base64\")}`,\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n      },\n      body: payload.toString(),\n    })\n    const json = await res.json()\n    if (!res.ok) {\n      console.error(\"sendWhatsAppViaTwilio: twilio error\", json)\n      return { success: false, error: json }\n    }\n\n    // update guest last_blasted_at / blast_status\n    await supabase.from(\"guests\").update({ last_blasted_at: new Date().toISOString(), blast_status: \"sent\" }).eq(\"id\", guestId)\n\n    return { success: true, data: json }\n  } catch (err) {\n    console.error(\"sendWhatsAppViaTwilio: exception\", err)\n    return { success: false, error: err }\n  }\n}\n\n"],"names":[],"mappings":";;;;;;;IAoFsB,aAAA,WAAA,GAAA,IAAA,0YAAA,EAAA,8CAAA,+XAAA,EAAA,KAAA,GAAA,qYAAA,EAAA"}},
    {"offset": {"line": 1960, "column": 0}, "map": {"version":3,"sources":["file:///Users/chiio/VSCode/wedd-inv/components/invitation/rsvp-section.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useTransition } from \"react\"\nimport { motion } from \"framer-motion\"\nimport type { Guest } from \"@/lib/types\"\nimport { Check, X, Users } from \"lucide-react\"\nimport { updateRSVP } from \"@/lib/actions\"\n\ninterface RSVPSectionProps {\n  guest: Guest | null\n}\n\nexport function RSVPSection({ guest }: RSVPSectionProps) {\n  const [attendance, setAttendance] = useState<string>(guest?.attendance_status || \"pending\")\n  const [guestCount, setGuestCount] = useState<number>(guest?.guest_count || 1)\n  const [isPending, startTransition] = useTransition()\n  const [isSubmitted, setIsSubmitted] = useState(false)\n\n  const handleSubmit = async () => {\n    if (!guest) return\n\n    startTransition(async () => {\n      const result = await updateRSVP(guest.id, attendance, guestCount)\n      if (result.success) {\n        setIsSubmitted(true)\n      }\n    })\n  }\n\n  return (\n    <section className=\"py-20 px-6 relative overflow-hidden\">\n      <div\n        className=\"absolute inset-0 bg-cover bg-center\"\n        style={{\n          backgroundImage: `url('/elegant-cream-gold-floral-pattern-subtle-backgroun.jpg')`,\n        }}\n      >\n        <div className=\"absolute inset-0 bg-background/85\" />\n      </div>\n\n      <div className=\"relative z-10 max-w-xl mx-auto\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          viewport={{ once: true }}\n          className=\"text-center mb-12\"\n        >\n          <p className=\"text-sm tracking-[0.2em] text-gold uppercase mb-2\">RSVP</p>\n          <h2 className=\"font-serif text-3xl md:text-4xl text-foreground\">Konfirmasi Kehadiran</h2>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 30 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          viewport={{ once: true }}\n          className=\"glass rounded-3xl p-8\"\n        >\n          {isSubmitted ? (\n            <div className=\"text-center py-8\">\n              <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-green-500/20 flex items-center justify-center\">\n                <Check className=\"w-8 h-8 text-green-500\" />\n              </div>\n              <h3 className=\"font-serif text-xl text-foreground mb-2\">Terima Kasih!</h3>\n              <p className=\"text-muted-foreground\">Konfirmasi kehadiran Anda telah kami terima.</p>\n            </div>\n          ) : (\n            <div className=\"space-y-6\">\n              {guest && (\n                <div className=\"text-center mb-6\">\n                  <p className=\"text-muted-foreground\">Halo,</p>\n                  <p className=\"font-serif text-xl text-foreground\">{guest.name}</p>\n                </div>\n              )}\n\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-3\">Apakah Anda akan hadir?</label>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setAttendance(\"attending\")}\n                    className={`p-4 rounded-xl border-2 transition-all flex flex-col items-center gap-2 ${\n                      attendance === \"attending\" ? \"border-gold bg-gold/10\" : \"border-border hover:border-gold/50\"\n                    }`}\n                  >\n                    <Check\n                      className={`w-6 h-6 ${attendance === \"attending\" ? \"text-gold\" : \"text-muted-foreground\"}`}\n                    />\n                    <span className={attendance === \"attending\" ? \"text-gold font-medium\" : \"text-muted-foreground\"}>\n                      Ya, Saya Hadir\n                    </span>\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={() => setAttendance(\"not_attending\")}\n                    className={`p-4 rounded-xl border-2 transition-all flex flex-col items-center gap-2 ${\n                      attendance === \"not_attending\" ? \"border-gold bg-gold/10\" : \"border-border hover:border-gold/50\"\n                    }`}\n                  >\n                    <X\n                      className={`w-6 h-6 ${attendance === \"not_attending\" ? \"text-gold\" : \"text-muted-foreground\"}`}\n                    />\n                    <span\n                      className={attendance === \"not_attending\" ? \"text-gold font-medium\" : \"text-muted-foreground\"}\n                    >\n                      Maaf, Tidak Bisa\n                    </span>\n                  </button>\n                </div>\n              </div>\n\n              {attendance === \"attending\" && (\n                <motion.div\n                  initial={{ opacity: 0, height: 0 }}\n                  animate={{ opacity: 1, height: \"auto\" }}\n                  exit={{ opacity: 0, height: 0 }}\n                >\n                  <label className=\"block text-sm font-medium text-foreground mb-3\">Jumlah Tamu</label>\n                  <div className=\"flex items-center justify-center gap-4\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setGuestCount(Math.max(1, guestCount - 1))}\n                      className=\"w-12 h-12 rounded-full glass flex items-center justify-center text-foreground hover:bg-gold/10 transition-colors\"\n                    >\n                      -\n                    </button>\n                    <div className=\"flex items-center gap-2\">\n                      <Users className=\"w-5 h-5 text-gold\" />\n                      <span className=\"font-serif text-2xl text-foreground w-8 text-center\">{guestCount}</span>\n                    </div>\n                    <button\n                      type=\"button\"\n                      onClick={() => setGuestCount(Math.min(5, guestCount + 1))}\n                      className=\"w-12 h-12 rounded-full glass flex items-center justify-center text-foreground hover:bg-gold/10 transition-colors\"\n                    >\n                      +\n                    </button>\n                  </div>\n                </motion.div>\n              )}\n\n              <button\n                onClick={handleSubmit}\n                disabled={isPending || attendance === \"pending\"}\n                className=\"w-full py-4 rounded-xl bg-gold text-white font-medium hover:bg-gold/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {isPending ? \"Mengirim...\" : \"Konfirmasi\"}\n              </button>\n            </div>\n          )}\n        </motion.div>\n      </div>\n    </section>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2338, "column": 0}, "map": {"version":3,"sources":["file:///Users/chiio/VSCode/wedd-inv/lib/actions.ts"],"sourcesContent":["\"use server\"\n\nimport { createClient } from \"@/lib/supabase/server\"\nimport { createClient as createSupabaseClient } from \"@supabase/supabase-js\"\nimport { revalidatePath } from \"next/cache\"\nimport { redirect } from \"next/navigation\"\nimport type { Comment, Guest, WeddingSettings, GalleryItem } from \"@/lib/types\"\n\n// ============ Auth Actions ============\n\nexport async function loginAdmin(email: string, password: string) {\n  const supabase = await createClient()\n\n  const { error } = await supabase.auth.signInWithPassword({\n    email,\n    password,\n  })\n\n  if (error) {\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/admin\")\n  return { success: true }\n}\n\nexport async function logoutAdmin() {\n  const supabase = await createClient()\n  await supabase.auth.signOut()\n  revalidatePath(\"/admin\")\n  redirect(\"/admin/login\")\n}\n\n// Change admin password (server action) — uses server session from cookies\nexport async function changeAdminPassword(newPassword: string) {\n  const supabase = await createClient()\n\n  const { error } = await supabase.auth.updateUser({ password: newPassword })\n\n  if (error) {\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/admin\")\n  return { success: true }\n}\n\n// ============ Comments Actions ============\n\nexport async function getComments(): Promise<Comment[]> {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"comments\")\n    .select(\"*\")\n    .eq(\"is_approved\", true)\n    .order(\"created_at\", { ascending: false })\n\n  if (error) {\n    console.error(\"Error fetching comments:\", error)\n    return []\n  }\n  return data || []\n}\n\nexport async function submitComment(formData: { guest_name: string; message: string }) {\n  const supabase = await createClient()\n\n  const { error } = await supabase.from(\"comments\").insert({\n    guest_name: formData.guest_name,\n    message: formData.message,\n    is_approved: true,\n  })\n\n  if (error) {\n    console.error(\"Error submitting comment:\", error)\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/\")\n  return { success: true }\n}\n\n// ============ RSVP Actions ============\n\nexport async function updateRSVP(guestId: string, attendance: string, guestCount: number) {\n  const supabase = await createClient()\n\n  const { error } = await supabase\n    .from(\"guests\")\n    .update({\n      attendance_status: attendance,\n      guest_count: guestCount,\n      updated_at: new Date().toISOString(),\n    })\n    .eq(\"id\", guestId)\n\n  if (error) {\n    console.error(\"Error updating RSVP:\", error)\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/\")\n  return { success: true }\n}\n\nexport async function getGuestBySlug(slug: string): Promise<Guest | null> {\n  const supabase = await createClient()\n  const { data, error } = await supabase.from(\"guests\").select(\"*\").eq(\"slug\", slug).single()\n\n  if (error) {\n    console.error(\"Error fetching guest:\", error)\n    return null\n  }\n  return data\n}\n\n// ============ Wedding Settings Actions ============\n\nexport async function getWeddingSettings(): Promise<WeddingSettings | null> {\n  const supabase = await createClient()\n  const { data, error } = await supabase.from(\"wedding_settings\").select(\"*\").single()\n\n  if (error) {\n    console.error(\"Error fetching settings:\", error)\n    return null\n  }\n  return data\n}\n\nexport async function updateWeddingSettings(settingsId: string, settings: Partial<WeddingSettings>) {\n  // Prefer service-role client for writes when available to avoid RLS/anon issues\n  let supabase = await createClient()\n  if (process.env.SUPABASE_SERVICE_ROLE_KEY && process.env.SUPABASE_URL) {\n    supabase = createSupabaseClient(process.env.SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY, {\n      auth: { persistSession: false },\n    }) as any\n  }\n\n  const { data, error } = await supabase\n    .from(\"wedding_settings\")\n    .update({ ...settings, updated_at: new Date().toISOString() })\n    .eq(\"id\", settingsId)\n    .select()\n    .single()\n\n  if (error) {\n    return { success: false, error: error.message, data: null }\n  }\n\n  revalidatePath(\"/\")\n  revalidatePath(\"/admin\")\n  return { success: true, data }\n}\n\n// ============ Gallery Actions ============\n\nexport async function getGalleryItems(): Promise<GalleryItem[]> {\n  const supabase = await createClient()\n  const { data, error } = await supabase.from(\"gallery\").select(\"*\").order(\"sort_order\", { ascending: true })\n\n  if (error) {\n    console.error(\"Error fetching gallery:\", error)\n    return []\n  }\n  return data || []\n}\n\nexport async function addGalleryItem(imageUrl: string, caption?: string) {\n  const supabase = await createClient()\n\n  // Get max sort order\n  const { data: maxOrder } = await supabase\n    .from(\"gallery\")\n    .select(\"sort_order\")\n    .order(\"sort_order\", { ascending: false })\n    .limit(1)\n    .single()\n\n  const { data, error } = await supabase\n    .from(\"gallery\")\n    .insert({\n      image_url: imageUrl,\n      caption,\n      sort_order: (maxOrder?.sort_order || 0) + 1,\n    })\n    .select()\n    .single()\n\n  if (error) {\n    return { success: false, error: error.message, data: null }\n  }\n\n  revalidatePath(\"/\")\n  revalidatePath(\"/admin\")\n  return { success: true, data }\n}\n\nexport async function deleteGalleryItem(id: string) {\n  const supabase = await createClient()\n\n  const { error } = await supabase.from(\"gallery\").delete().eq(\"id\", id)\n\n  if (error) {\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/\")\n  revalidatePath(\"/admin\")\n  return { success: true }\n}\n\nexport async function updateGalleryItem(id: string, updates: Partial<{ image_url: string; caption: string }>) {\n  const supabase = await createClient()\n\n  const payload = { ...updates, updated_at: new Date().toISOString() }\n\n  const { data, error } = await supabase.from(\"gallery\").update(payload).eq(\"id\", id).select().single()\n\n  if (error) {\n    console.error(\"updateGalleryItem: supabase update error\", { error, id, payload })\n    return { success: false, error: error.message || JSON.stringify(error), data: null }\n  }\n\n  revalidatePath(\"/\")\n  revalidatePath(\"/admin\")\n  return { success: true, data }\n}\n\n// ============ Guests Management Actions ============\n\nexport async function getGuests(): Promise<Guest[]> {\n  const supabase = await createClient()\n  const { data, error } = await supabase.from(\"guests\").select(\"*\").order(\"created_at\", { ascending: false })\n\n  if (error) {\n    console.error(\"Error fetching guests:\", error)\n    return []\n  }\n  return data || []\n}\n\nexport async function addGuest(guestData: {\n  name: string\n  phone?: string\n  address?: string\n  guest_count?: number\n}) {\n  const supabase = await createClient()\n\n  const slug =\n    guestData.name\n      .toLowerCase()\n      .replace(/[^a-z0-9]+/g, \"-\")\n      .replace(/^-|-$/g, \"\") +\n    \"-\" +\n    Math.random().toString(36).substr(2, 6)\n\n  const payload = {\n    name: guestData.name,\n    slug,\n    unique_slug: slug,\n    phone: guestData.phone,\n    address: guestData.address,\n    attendance_status: \"pending\",\n    guest_count: guestData.guest_count || 1,\n  }\n\n  const { data, error } = await supabase.from(\"guests\").insert(payload).select().single()\n\n  if (error) {\n    // Log full error and payload to help debug PostgREST 400 issues\n    console.error(\"addGuest: supabase insert error\", { error, payload })\n    return { success: false, error: error.message || JSON.stringify(error), data: null }\n  }\n\n  revalidatePath(\"/admin\")\n  return { success: true, data }\n}\n\nexport async function updateGuest(id: string, updates: Partial<{ name: string; phone: string; address: string; guest_count: number; attendance_status: string }>) {\n  const supabase = await createClient()\n\n  const payload = { ...updates, updated_at: new Date().toISOString() }\n\n  const { data, error } = await supabase.from(\"guests\").update(payload).eq(\"id\", id).select().single()\n\n  if (error) {\n    console.error(\"updateGuest: supabase update error\", { error, id, payload })\n    return { success: false, error: error.message || JSON.stringify(error), data: null }\n  }\n\n  revalidatePath(\"/admin\")\n  return { success: true, data }\n}\n\nexport async function deleteGuest(id: string) {\n  const supabase = await createClient()\n\n  const { error } = await supabase.from(\"guests\").delete().eq(\"id\", id)\n\n  if (error) {\n    console.error(\"deleteGuest: supabase delete error\", { error, id })\n    return { success: false, error: error.message || JSON.stringify(error) }\n  }\n\n  revalidatePath(\"/admin\")\n  return { success: true }\n}\n\n// ============ Comments Management Actions ============\n\nexport async function getAllComments(): Promise<Comment[]> {\n  const supabase = await createClient()\n  const { data, error } = await supabase.from(\"comments\").select(\"*\").order(\"created_at\", { ascending: false })\n\n  if (error) {\n    console.error(\"Error fetching all comments:\", error)\n    return []\n  }\n  return data || []\n}\n\nexport async function toggleCommentApproval(id: string, currentStatus: boolean) {\n  const supabase = await createClient()\n\n  const { error } = await supabase.from(\"comments\").update({ is_approved: !currentStatus }).eq(\"id\", id)\n\n  if (error) {\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/\")\n  revalidatePath(\"/admin\")\n  return { success: true, newStatus: !currentStatus }\n}\n\nexport async function deleteComment(id: string) {\n  const supabase = await createClient()\n\n  const { error } = await supabase.from(\"comments\").delete().eq(\"id\", id)\n\n  if (error) {\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/\")\n  revalidatePath(\"/admin\")\n  return { success: true }\n}\n\n// ============ Guests blasting helpers ============\n\nfunction normalizePhoneForWa(phone?: string) {\n  if (!phone) return null\n  const digits = phone.replace(/[^0-9]/g, \"\")\n  if (digits.startsWith(\"0\")) return \"62\" + digits.slice(1)\n  if (digits.startsWith(\"62\")) return digits\n  if (digits.startsWith(\"8\")) return \"62\" + digits\n  return digits\n}\n\nfunction interpolateTemplate(template: string, data: Record<string, string | number | null>) {\n  // Support both {key} and {{key}} placeholders\n  return template.replace(/\\{\\{?\\s*(\\w+)\\s*\\}?\\}/g, (_, key) => {\n    const v = data[key]\n    return v == null ? \"\" : String(v)\n  })\n}\n\nfunction transformFormattingForWhatsApp(text: string) {\n  if (!text) return text\n\n  // HTML-like tags -> WhatsApp formatting\n  // Bold/strong -> *text*\n  text = text.replace(/<\\s*(?:b|strong)>([\\s\\S]*?)<\\s*\\/\\s*(?:b|strong)>/gi, '*$1*')\n\n  // Italic/em -> _text_\n  text = text.replace(/<\\s*(?:i|em)>([\\s\\S]*?)<\\s*\\/\\s*(?:i|em)>/gi, '_$1_')\n\n  // Strikethrough -> ~text~\n  text = text.replace(/<\\s*(?:s|strike|del)>([\\s\\S]*?)<\\s*\\/\\s*(?:s|strike|del)>/gi, '~$1~')\n\n  // Code/pre -> ```text``` (preserve newlines)\n  text = text.replace(/<\\s*(?:pre|code)>([\\s\\S]*?)<\\s*\\/\\s*(?:pre|code)>/gi, '```$1```')\n\n  // Underline is not supported by WhatsApp; map <u> to italic as closest alternative\n  text = text.replace(/<\\s*u>([\\s\\S]*?)<\\s*\\/\\s*u>/gi, '_$1_')\n\n  // Markdown-like shortcuts: **bold** -> *bold*, __underline__ -> _underline_ (note: WhatsApp doesn't support underline)\n  text = text.replace(/\\*\\*(.*?)\\*\\*/g, '*$1*')\n  text = text.replace(/__(.*?)__/g, '_$1_')\n\n  return text\n}\n\nexport async function ensureGuestUniqueCode(id: string) {\n  const supabase = await createClient()\n  const { data: g, error: fetchErr } = await supabase.from(\"guests\").select(\"id,unique_code\").eq(\"id\", id).single()\n  if (fetchErr) {\n    console.error(\"ensureGuestUniqueCode: fetch error\", fetchErr)\n    return null\n  }\n  if (g.unique_code) return g.unique_code\n\n  const code = substringRandomCode()\n  const { error: updErr } = await supabase.from(\"guests\").update({ unique_code: code }).eq(\"id\", id)\n  if (updErr) {\n    console.error(\"ensureGuestUniqueCode: update error\", updErr)\n    return null\n  }\n  return code\n}\n\nfunction substringRandomCode() {\n  return Math.random().toString(36).substr(2, 9)\n}\n\nexport async function generateBlastMessageForGuest(guestId: string) {\n  const supabase = await createClient()\n  const { data: guest, error: gErr } = await supabase.from(\"guests\").select(\"*\").eq(\"id\", guestId).single()\n  if (gErr || !guest) {\n    console.error(\"generateBlastMessageForGuest: guest fetch error\", gErr)\n    return { success: false, error: gErr?.message || \"Guest not found\" }\n  }\n\n  const settings = await getWeddingSettings()\n\n  // Ensure unique code exists\n  if (!guest.unique_code) {\n    const code = Math.random().toString(36).substr(2, 9)\n    await supabase.from(\"guests\").update({ unique_code: code }).eq(\"id\", guestId)\n    guest.unique_code = code\n  }\n\n  const baseUrlRaw = process.env.NEXT_PUBLIC_SITE_URL || process.env.SITE_URL || \"\"\n  const baseUrl = String(baseUrlRaw).replace(/\\/$/, \"\")\n  // Make the link format match the client clipboard link: `${origin}?to=<slug>`\n  const link = `${baseUrl}?to=${encodeURIComponent(guest.unique_slug || guest.slug || guest.id)}`\n\n  const template = settings?.whatsapp_template || \"Halo {name}, Anda diundang. Silakan lihat: {link} (kode: {unique_code})\"\n\n  // Detect whether admin included a {link} placeholder; if not, we'll append the link after formatting\n  const includesLinkPlaceholder = /\\{\\{?\\s*link\\s*\\}?\\}/i.test(template)\n\n  let message = interpolateTemplate(template, {\n    name: guest.name,\n    unique_code: guest.unique_code,\n    link,\n  })\n\n  // Apply WhatsApp formatting conversions (HTML-like tags or markdown shortcuts)\n  message = transformFormattingForWhatsApp(message)\n\n  // If template didn't include link, append it at the end so the invite always contains the URL\n  if (!includesLinkPlaceholder) {\n    message = `${message}\\n\\n${link}`\n  }\n\n  const phone = normalizePhoneForWa(guest.phone)\n  if (!phone) return { success: false, error: \"No phone number\" }\n\n  const waLink = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`\n\n  return { success: true, waLink, message }\n}\n\nexport async function sendWhatsAppViaTwilio(guestId: string) {\n  // Optional: if TWILIO env vars are present, attempt to send via Twilio's API\n  const SID = process.env.TWILIO_ACCOUNT_SID\n  const TOKEN = process.env.TWILIO_AUTH_TOKEN\n  const FROM = process.env.TWILIO_WHATSAPP_FROM // e.g. 'whatsapp:+1415...'\n  if (!SID || !TOKEN || !FROM) {\n    return { success: false, error: \"Twilio credentials not configured\" }\n  }\n\n  const supabase = await createClient()\n  const { data: guest, error: gErr } = await supabase.from(\"guests\").select(\"*\").eq(\"id\", guestId).single()\n  if (gErr || !guest) return { success: false, error: gErr?.message || \"Guest not found\" }\n\n  // ensure unique_code\n  let code = guest.unique_code\n  if (!code) {\n    code = Math.random().toString(36).substr(2, 9)\n    await supabase.from(\"guests\").update({ unique_code: code }).eq(\"id\", guestId)\n  }\n\n  const settings = await getWeddingSettings()\n  const template = settings?.whatsapp_template || \"Halo {name}, Anda diundang. Silakan lihat: {link} (kode: {unique_code})\"\n  const baseUrlRaw = process.env.NEXT_PUBLIC_SITE_URL || process.env.SITE_URL || \"\"\n  const baseUrl = String(baseUrlRaw).replace(/\\/$/, \"\")\n  const link = `${baseUrl}?to=${encodeURIComponent(guest.unique_slug || guest.slug || guest.id)}`\n  const message = interpolateTemplate(template, { name: guest.name, unique_code: code, link })\n\n  const phone = normalizePhoneForWa(guest.phone)\n  if (!phone) return { success: false, error: \"No phone number\" }\n\n  const url = `https://api.twilio.com/2010-04-01/Accounts/${SID}/Messages.json`\n  const payload = new URLSearchParams()\n  payload.append(\"To\", `whatsapp:+${phone}`)\n  payload.append(\"From\", FROM)\n  payload.append(\"Body\", message)\n\n  try {\n    const res = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Authorization: `Basic ${Buffer.from(`${SID}:${TOKEN}`).toString(\"base64\")}`,\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n      },\n      body: payload.toString(),\n    })\n    const json = await res.json()\n    if (!res.ok) {\n      console.error(\"sendWhatsAppViaTwilio: twilio error\", json)\n      return { success: false, error: json }\n    }\n\n    // update guest last_blasted_at / blast_status\n    await supabase.from(\"guests\").update({ last_blasted_at: new Date().toISOString(), blast_status: \"sent\" }).eq(\"id\", guestId)\n\n    return { success: true, data: json }\n  } catch (err) {\n    console.error(\"sendWhatsAppViaTwilio: exception\", err)\n    return { success: false, error: err }\n  }\n}\n\n"],"names":[],"mappings":";;;;;;;IAgEsB,gBAAA,WAAA,GAAA,IAAA,0YAAA,EAAA,8CAAA,+XAAA,EAAA,KAAA,GAAA,qYAAA,EAAA"}},
    {"offset": {"line": 2353, "column": 0}, "map": {"version":3,"sources":["file:///Users/chiio/VSCode/wedd-inv/lib/actions.ts"],"sourcesContent":["\"use server\"\n\nimport { createClient } from \"@/lib/supabase/server\"\nimport { createClient as createSupabaseClient } from \"@supabase/supabase-js\"\nimport { revalidatePath } from \"next/cache\"\nimport { redirect } from \"next/navigation\"\nimport type { Comment, Guest, WeddingSettings, GalleryItem } from \"@/lib/types\"\n\n// ============ Auth Actions ============\n\nexport async function loginAdmin(email: string, password: string) {\n  const supabase = await createClient()\n\n  const { error } = await supabase.auth.signInWithPassword({\n    email,\n    password,\n  })\n\n  if (error) {\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/admin\")\n  return { success: true }\n}\n\nexport async function logoutAdmin() {\n  const supabase = await createClient()\n  await supabase.auth.signOut()\n  revalidatePath(\"/admin\")\n  redirect(\"/admin/login\")\n}\n\n// Change admin password (server action) — uses server session from cookies\nexport async function changeAdminPassword(newPassword: string) {\n  const supabase = await createClient()\n\n  const { error } = await supabase.auth.updateUser({ password: newPassword })\n\n  if (error) {\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/admin\")\n  return { success: true }\n}\n\n// ============ Comments Actions ============\n\nexport async function getComments(): Promise<Comment[]> {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"comments\")\n    .select(\"*\")\n    .eq(\"is_approved\", true)\n    .order(\"created_at\", { ascending: false })\n\n  if (error) {\n    console.error(\"Error fetching comments:\", error)\n    return []\n  }\n  return data || []\n}\n\nexport async function submitComment(formData: { guest_name: string; message: string }) {\n  const supabase = await createClient()\n\n  const { error } = await supabase.from(\"comments\").insert({\n    guest_name: formData.guest_name,\n    message: formData.message,\n    is_approved: true,\n  })\n\n  if (error) {\n    console.error(\"Error submitting comment:\", error)\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/\")\n  return { success: true }\n}\n\n// ============ RSVP Actions ============\n\nexport async function updateRSVP(guestId: string, attendance: string, guestCount: number) {\n  const supabase = await createClient()\n\n  const { error } = await supabase\n    .from(\"guests\")\n    .update({\n      attendance_status: attendance,\n      guest_count: guestCount,\n      updated_at: new Date().toISOString(),\n    })\n    .eq(\"id\", guestId)\n\n  if (error) {\n    console.error(\"Error updating RSVP:\", error)\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/\")\n  return { success: true }\n}\n\nexport async function getGuestBySlug(slug: string): Promise<Guest | null> {\n  const supabase = await createClient()\n  const { data, error } = await supabase.from(\"guests\").select(\"*\").eq(\"slug\", slug).single()\n\n  if (error) {\n    console.error(\"Error fetching guest:\", error)\n    return null\n  }\n  return data\n}\n\n// ============ Wedding Settings Actions ============\n\nexport async function getWeddingSettings(): Promise<WeddingSettings | null> {\n  const supabase = await createClient()\n  const { data, error } = await supabase.from(\"wedding_settings\").select(\"*\").single()\n\n  if (error) {\n    console.error(\"Error fetching settings:\", error)\n    return null\n  }\n  return data\n}\n\nexport async function updateWeddingSettings(settingsId: string, settings: Partial<WeddingSettings>) {\n  // Prefer service-role client for writes when available to avoid RLS/anon issues\n  let supabase = await createClient()\n  if (process.env.SUPABASE_SERVICE_ROLE_KEY && process.env.SUPABASE_URL) {\n    supabase = createSupabaseClient(process.env.SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY, {\n      auth: { persistSession: false },\n    }) as any\n  }\n\n  const { data, error } = await supabase\n    .from(\"wedding_settings\")\n    .update({ ...settings, updated_at: new Date().toISOString() })\n    .eq(\"id\", settingsId)\n    .select()\n    .single()\n\n  if (error) {\n    return { success: false, error: error.message, data: null }\n  }\n\n  revalidatePath(\"/\")\n  revalidatePath(\"/admin\")\n  return { success: true, data }\n}\n\n// ============ Gallery Actions ============\n\nexport async function getGalleryItems(): Promise<GalleryItem[]> {\n  const supabase = await createClient()\n  const { data, error } = await supabase.from(\"gallery\").select(\"*\").order(\"sort_order\", { ascending: true })\n\n  if (error) {\n    console.error(\"Error fetching gallery:\", error)\n    return []\n  }\n  return data || []\n}\n\nexport async function addGalleryItem(imageUrl: string, caption?: string) {\n  const supabase = await createClient()\n\n  // Get max sort order\n  const { data: maxOrder } = await supabase\n    .from(\"gallery\")\n    .select(\"sort_order\")\n    .order(\"sort_order\", { ascending: false })\n    .limit(1)\n    .single()\n\n  const { data, error } = await supabase\n    .from(\"gallery\")\n    .insert({\n      image_url: imageUrl,\n      caption,\n      sort_order: (maxOrder?.sort_order || 0) + 1,\n    })\n    .select()\n    .single()\n\n  if (error) {\n    return { success: false, error: error.message, data: null }\n  }\n\n  revalidatePath(\"/\")\n  revalidatePath(\"/admin\")\n  return { success: true, data }\n}\n\nexport async function deleteGalleryItem(id: string) {\n  const supabase = await createClient()\n\n  const { error } = await supabase.from(\"gallery\").delete().eq(\"id\", id)\n\n  if (error) {\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/\")\n  revalidatePath(\"/admin\")\n  return { success: true }\n}\n\nexport async function updateGalleryItem(id: string, updates: Partial<{ image_url: string; caption: string }>) {\n  const supabase = await createClient()\n\n  const payload = { ...updates, updated_at: new Date().toISOString() }\n\n  const { data, error } = await supabase.from(\"gallery\").update(payload).eq(\"id\", id).select().single()\n\n  if (error) {\n    console.error(\"updateGalleryItem: supabase update error\", { error, id, payload })\n    return { success: false, error: error.message || JSON.stringify(error), data: null }\n  }\n\n  revalidatePath(\"/\")\n  revalidatePath(\"/admin\")\n  return { success: true, data }\n}\n\n// ============ Guests Management Actions ============\n\nexport async function getGuests(): Promise<Guest[]> {\n  const supabase = await createClient()\n  const { data, error } = await supabase.from(\"guests\").select(\"*\").order(\"created_at\", { ascending: false })\n\n  if (error) {\n    console.error(\"Error fetching guests:\", error)\n    return []\n  }\n  return data || []\n}\n\nexport async function addGuest(guestData: {\n  name: string\n  phone?: string\n  address?: string\n  guest_count?: number\n}) {\n  const supabase = await createClient()\n\n  const slug =\n    guestData.name\n      .toLowerCase()\n      .replace(/[^a-z0-9]+/g, \"-\")\n      .replace(/^-|-$/g, \"\") +\n    \"-\" +\n    Math.random().toString(36).substr(2, 6)\n\n  const payload = {\n    name: guestData.name,\n    slug,\n    unique_slug: slug,\n    phone: guestData.phone,\n    address: guestData.address,\n    attendance_status: \"pending\",\n    guest_count: guestData.guest_count || 1,\n  }\n\n  const { data, error } = await supabase.from(\"guests\").insert(payload).select().single()\n\n  if (error) {\n    // Log full error and payload to help debug PostgREST 400 issues\n    console.error(\"addGuest: supabase insert error\", { error, payload })\n    return { success: false, error: error.message || JSON.stringify(error), data: null }\n  }\n\n  revalidatePath(\"/admin\")\n  return { success: true, data }\n}\n\nexport async function updateGuest(id: string, updates: Partial<{ name: string; phone: string; address: string; guest_count: number; attendance_status: string }>) {\n  const supabase = await createClient()\n\n  const payload = { ...updates, updated_at: new Date().toISOString() }\n\n  const { data, error } = await supabase.from(\"guests\").update(payload).eq(\"id\", id).select().single()\n\n  if (error) {\n    console.error(\"updateGuest: supabase update error\", { error, id, payload })\n    return { success: false, error: error.message || JSON.stringify(error), data: null }\n  }\n\n  revalidatePath(\"/admin\")\n  return { success: true, data }\n}\n\nexport async function deleteGuest(id: string) {\n  const supabase = await createClient()\n\n  const { error } = await supabase.from(\"guests\").delete().eq(\"id\", id)\n\n  if (error) {\n    console.error(\"deleteGuest: supabase delete error\", { error, id })\n    return { success: false, error: error.message || JSON.stringify(error) }\n  }\n\n  revalidatePath(\"/admin\")\n  return { success: true }\n}\n\n// ============ Comments Management Actions ============\n\nexport async function getAllComments(): Promise<Comment[]> {\n  const supabase = await createClient()\n  const { data, error } = await supabase.from(\"comments\").select(\"*\").order(\"created_at\", { ascending: false })\n\n  if (error) {\n    console.error(\"Error fetching all comments:\", error)\n    return []\n  }\n  return data || []\n}\n\nexport async function toggleCommentApproval(id: string, currentStatus: boolean) {\n  const supabase = await createClient()\n\n  const { error } = await supabase.from(\"comments\").update({ is_approved: !currentStatus }).eq(\"id\", id)\n\n  if (error) {\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/\")\n  revalidatePath(\"/admin\")\n  return { success: true, newStatus: !currentStatus }\n}\n\nexport async function deleteComment(id: string) {\n  const supabase = await createClient()\n\n  const { error } = await supabase.from(\"comments\").delete().eq(\"id\", id)\n\n  if (error) {\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/\")\n  revalidatePath(\"/admin\")\n  return { success: true }\n}\n\n// ============ Guests blasting helpers ============\n\nfunction normalizePhoneForWa(phone?: string) {\n  if (!phone) return null\n  const digits = phone.replace(/[^0-9]/g, \"\")\n  if (digits.startsWith(\"0\")) return \"62\" + digits.slice(1)\n  if (digits.startsWith(\"62\")) return digits\n  if (digits.startsWith(\"8\")) return \"62\" + digits\n  return digits\n}\n\nfunction interpolateTemplate(template: string, data: Record<string, string | number | null>) {\n  // Support both {key} and {{key}} placeholders\n  return template.replace(/\\{\\{?\\s*(\\w+)\\s*\\}?\\}/g, (_, key) => {\n    const v = data[key]\n    return v == null ? \"\" : String(v)\n  })\n}\n\nfunction transformFormattingForWhatsApp(text: string) {\n  if (!text) return text\n\n  // HTML-like tags -> WhatsApp formatting\n  // Bold/strong -> *text*\n  text = text.replace(/<\\s*(?:b|strong)>([\\s\\S]*?)<\\s*\\/\\s*(?:b|strong)>/gi, '*$1*')\n\n  // Italic/em -> _text_\n  text = text.replace(/<\\s*(?:i|em)>([\\s\\S]*?)<\\s*\\/\\s*(?:i|em)>/gi, '_$1_')\n\n  // Strikethrough -> ~text~\n  text = text.replace(/<\\s*(?:s|strike|del)>([\\s\\S]*?)<\\s*\\/\\s*(?:s|strike|del)>/gi, '~$1~')\n\n  // Code/pre -> ```text``` (preserve newlines)\n  text = text.replace(/<\\s*(?:pre|code)>([\\s\\S]*?)<\\s*\\/\\s*(?:pre|code)>/gi, '```$1```')\n\n  // Underline is not supported by WhatsApp; map <u> to italic as closest alternative\n  text = text.replace(/<\\s*u>([\\s\\S]*?)<\\s*\\/\\s*u>/gi, '_$1_')\n\n  // Markdown-like shortcuts: **bold** -> *bold*, __underline__ -> _underline_ (note: WhatsApp doesn't support underline)\n  text = text.replace(/\\*\\*(.*?)\\*\\*/g, '*$1*')\n  text = text.replace(/__(.*?)__/g, '_$1_')\n\n  return text\n}\n\nexport async function ensureGuestUniqueCode(id: string) {\n  const supabase = await createClient()\n  const { data: g, error: fetchErr } = await supabase.from(\"guests\").select(\"id,unique_code\").eq(\"id\", id).single()\n  if (fetchErr) {\n    console.error(\"ensureGuestUniqueCode: fetch error\", fetchErr)\n    return null\n  }\n  if (g.unique_code) return g.unique_code\n\n  const code = substringRandomCode()\n  const { error: updErr } = await supabase.from(\"guests\").update({ unique_code: code }).eq(\"id\", id)\n  if (updErr) {\n    console.error(\"ensureGuestUniqueCode: update error\", updErr)\n    return null\n  }\n  return code\n}\n\nfunction substringRandomCode() {\n  return Math.random().toString(36).substr(2, 9)\n}\n\nexport async function generateBlastMessageForGuest(guestId: string) {\n  const supabase = await createClient()\n  const { data: guest, error: gErr } = await supabase.from(\"guests\").select(\"*\").eq(\"id\", guestId).single()\n  if (gErr || !guest) {\n    console.error(\"generateBlastMessageForGuest: guest fetch error\", gErr)\n    return { success: false, error: gErr?.message || \"Guest not found\" }\n  }\n\n  const settings = await getWeddingSettings()\n\n  // Ensure unique code exists\n  if (!guest.unique_code) {\n    const code = Math.random().toString(36).substr(2, 9)\n    await supabase.from(\"guests\").update({ unique_code: code }).eq(\"id\", guestId)\n    guest.unique_code = code\n  }\n\n  const baseUrlRaw = process.env.NEXT_PUBLIC_SITE_URL || process.env.SITE_URL || \"\"\n  const baseUrl = String(baseUrlRaw).replace(/\\/$/, \"\")\n  // Make the link format match the client clipboard link: `${origin}?to=<slug>`\n  const link = `${baseUrl}?to=${encodeURIComponent(guest.unique_slug || guest.slug || guest.id)}`\n\n  const template = settings?.whatsapp_template || \"Halo {name}, Anda diundang. Silakan lihat: {link} (kode: {unique_code})\"\n\n  // Detect whether admin included a {link} placeholder; if not, we'll append the link after formatting\n  const includesLinkPlaceholder = /\\{\\{?\\s*link\\s*\\}?\\}/i.test(template)\n\n  let message = interpolateTemplate(template, {\n    name: guest.name,\n    unique_code: guest.unique_code,\n    link,\n  })\n\n  // Apply WhatsApp formatting conversions (HTML-like tags or markdown shortcuts)\n  message = transformFormattingForWhatsApp(message)\n\n  // If template didn't include link, append it at the end so the invite always contains the URL\n  if (!includesLinkPlaceholder) {\n    message = `${message}\\n\\n${link}`\n  }\n\n  const phone = normalizePhoneForWa(guest.phone)\n  if (!phone) return { success: false, error: \"No phone number\" }\n\n  const waLink = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`\n\n  return { success: true, waLink, message }\n}\n\nexport async function sendWhatsAppViaTwilio(guestId: string) {\n  // Optional: if TWILIO env vars are present, attempt to send via Twilio's API\n  const SID = process.env.TWILIO_ACCOUNT_SID\n  const TOKEN = process.env.TWILIO_AUTH_TOKEN\n  const FROM = process.env.TWILIO_WHATSAPP_FROM // e.g. 'whatsapp:+1415...'\n  if (!SID || !TOKEN || !FROM) {\n    return { success: false, error: \"Twilio credentials not configured\" }\n  }\n\n  const supabase = await createClient()\n  const { data: guest, error: gErr } = await supabase.from(\"guests\").select(\"*\").eq(\"id\", guestId).single()\n  if (gErr || !guest) return { success: false, error: gErr?.message || \"Guest not found\" }\n\n  // ensure unique_code\n  let code = guest.unique_code\n  if (!code) {\n    code = Math.random().toString(36).substr(2, 9)\n    await supabase.from(\"guests\").update({ unique_code: code }).eq(\"id\", guestId)\n  }\n\n  const settings = await getWeddingSettings()\n  const template = settings?.whatsapp_template || \"Halo {name}, Anda diundang. Silakan lihat: {link} (kode: {unique_code})\"\n  const baseUrlRaw = process.env.NEXT_PUBLIC_SITE_URL || process.env.SITE_URL || \"\"\n  const baseUrl = String(baseUrlRaw).replace(/\\/$/, \"\")\n  const link = `${baseUrl}?to=${encodeURIComponent(guest.unique_slug || guest.slug || guest.id)}`\n  const message = interpolateTemplate(template, { name: guest.name, unique_code: code, link })\n\n  const phone = normalizePhoneForWa(guest.phone)\n  if (!phone) return { success: false, error: \"No phone number\" }\n\n  const url = `https://api.twilio.com/2010-04-01/Accounts/${SID}/Messages.json`\n  const payload = new URLSearchParams()\n  payload.append(\"To\", `whatsapp:+${phone}`)\n  payload.append(\"From\", FROM)\n  payload.append(\"Body\", message)\n\n  try {\n    const res = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Authorization: `Basic ${Buffer.from(`${SID}:${TOKEN}`).toString(\"base64\")}`,\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n      },\n      body: payload.toString(),\n    })\n    const json = await res.json()\n    if (!res.ok) {\n      console.error(\"sendWhatsAppViaTwilio: twilio error\", json)\n      return { success: false, error: json }\n    }\n\n    // update guest last_blasted_at / blast_status\n    await supabase.from(\"guests\").update({ last_blasted_at: new Date().toISOString(), blast_status: \"sent\" }).eq(\"id\", guestId)\n\n    return { success: true, data: json }\n  } catch (err) {\n    console.error(\"sendWhatsAppViaTwilio: exception\", err)\n    return { success: false, error: err }\n  }\n}\n\n"],"names":[],"mappings":";;;;;;;IAiDsB,cAAA,WAAA,GAAA,IAAA,0YAAA,EAAA,8CAAA,+XAAA,EAAA,KAAA,GAAA,qYAAA,EAAA"}},
    {"offset": {"line": 2368, "column": 0}, "map": {"version":3,"sources":["file:///Users/chiio/VSCode/wedd-inv/components/invitation/comments-section.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState, useRef, useTransition, useEffect } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport type { Comment, Guest } from \"@/lib/types\"\nimport { Send, MessageCircle, RefreshCw } from \"lucide-react\"\nimport { submitComment, getComments } from \"@/lib/actions\"\n\ninterface CommentsSectionProps {\n  initialComments: Comment[]\n  guest?: Guest | null\n}\n\nexport function CommentsSection({ initialComments, guest }: CommentsSectionProps) {\n  const [comments, setComments] = useState<Comment[]>(initialComments)\n  const [name, setName] = useState<string>(guest?.name ?? \"\")\n  const [message, setMessage] = useState(\"\")\n  const [isPending, startTransition] = useTransition()\n  const [isRefreshing, setIsRefreshing] = useState(false)\n  const commentsContainerRef = useRef<HTMLDivElement>(null)\n\n  // If guest prop changes (e.g., when page loads with guest), ensure name is synced\n  useEffect(() => {\n    if (guest?.name) setName(guest.name)\n  }, [guest])\n\n  const handleRefresh = async () => {\n    setIsRefreshing(true)\n    const freshComments = await getComments()\n    setComments(freshComments)\n    setIsRefreshing(false)\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!name.trim() || !message.trim()) return\n\n    startTransition(async () => {\n      const result = await submitComment({\n        guest_name: name.trim(),\n        message: message.trim(),\n      })\n\n      if (result.success) {\n        setName(\"\")\n        setMessage(\"\")\n        // Refresh comments after submission\n        const freshComments = await getComments()\n        setComments(freshComments)\n      }\n    })\n  }\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString(\"id-ID\", {\n      day: \"numeric\",\n      month: \"short\",\n      year: \"numeric\",\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    })\n  }\n\n  return (\n    <section className=\"py-20 px-6\">\n      <div className=\"max-w-2xl mx-auto\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          viewport={{ once: true }}\n          className=\"text-center mb-12\"\n        >\n          <p className=\"text-sm tracking-[0.2em] text-gold uppercase mb-2\">Wishes</p>\n          <h2 className=\"font-serif text-3xl md:text-4xl text-foreground\">Ucapan & Doa</h2>\n        </motion.div>\n\n        {/* Comment Form */}\n        <motion.form\n          initial={{ opacity: 0, y: 30 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          viewport={{ once: true }}\n          onSubmit={handleSubmit}\n          className=\"glass rounded-3xl p-6 mb-8\"\n        >\n          <div className=\"space-y-4\">\n            <div>\n              <input\n                type=\"text\"\n                placeholder=\"Nama Anda\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n                className=\"w-full px-4 py-3 rounded-xl bg-white/50 border border-border focus:border-gold focus:outline-none transition-colors placeholder:text-muted-foreground\"\n                required\n                // If guest is known, prevent editing so name matches guest record\n                readOnly={!!guest}\n              />\n            </div>\n            <div>\n              <textarea\n                placeholder=\"Tulis ucapan dan doa untuk kedua mempelai...\"\n                value={message}\n                onChange={(e) => setMessage(e.target.value)}\n                rows={4}\n                className=\"w-full px-4 py-3 rounded-xl bg-white/50 border border-border focus:border-gold focus:outline-none transition-colors resize-none placeholder:text-muted-foreground\"\n                required\n              />\n            </div>\n            <button\n              type=\"submit\"\n              disabled={isPending}\n              className=\"w-full py-3 rounded-xl bg-gold text-white font-medium hover:bg-gold/90 transition-colors disabled:opacity-50 flex items-center justify-center gap-2\"\n            >\n              <Send className=\"w-4 h-4\" />\n              {isPending ? \"Mengirim...\" : \"Kirim Ucapan\"}\n            </button>\n          </div>\n        </motion.form>\n\n        {/* Comments List */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          whileInView={{ opacity: 1 }}\n          viewport={{ once: true }}\n          className=\"glass rounded-3xl p-6\"\n        >\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"flex items-center gap-2\">\n              <MessageCircle className=\"w-5 h-5 text-gold\" />\n              <span className=\"text-sm text-muted-foreground\">{comments.length} ucapan</span>\n            </div>\n            <button\n              onClick={handleRefresh}\n              disabled={isRefreshing}\n              className=\"p-2 rounded-full hover:bg-gold/10 transition-colors\"\n              title=\"Refresh ucapan\"\n            >\n              <RefreshCw className={`w-4 h-4 text-gold ${isRefreshing ? \"animate-spin\" : \"\"}`} />\n            </button>\n          </div>\n\n          <div ref={commentsContainerRef} className=\"space-y-4 max-h-96 overflow-y-auto pr-2\">\n            <AnimatePresence>\n              {comments.map((comment, index) => (\n                <motion.div\n                  key={comment.id}\n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  exit={{ opacity: 0, y: -20 }}\n                  transition={{ delay: index * 0.05 }}\n                  className=\"p-4 rounded-xl bg-white/50\"\n                >\n                  <div className=\"flex items-start justify-between mb-2\">\n                    <h4 className=\"font-medium text-foreground\">{comment.guest_name}</h4>\n                    <span className=\"text-xs text-muted-foreground\">{formatDate(comment.created_at)}</span>\n                  </div>\n                  <p className=\"text-muted-foreground text-sm leading-relaxed\">{comment.message}</p>\n                </motion.div>\n              ))}\n            </AnimatePresence>\n\n            {comments.length === 0 && (\n              <div className=\"text-center py-8 text-muted-foreground\">Belum ada ucapan. Jadilah yang pertama!</div>\n            )}\n          </div>\n        </motion.div>\n      </div>\n    </section>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2741, "column": 0}, "map": {"version":3,"sources":["file:///Users/chiio/VSCode/wedd-inv/components/invitation/footer-section.tsx"],"sourcesContent":["\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport type { WeddingSettings } from \"@/lib/types\"\nimport { Heart } from \"lucide-react\"\n\ninterface FooterSectionProps {\n  settings: WeddingSettings\n}\n\nexport function FooterSection({ settings }: FooterSectionProps) {\n  return (\n    <footer className=\"py-16 px-6 relative overflow-hidden\">\n      <div\n        className=\"absolute inset-0 bg-cover bg-center\"\n        style={{\n          backgroundImage: `url('/elegant-gold-cream-floral-pattern-wedding-footer.jpg')`,\n        }}\n      >\n        <div className=\"absolute inset-0 bg-gradient-to-t from-background via-background/95 to-background/80\" />\n      </div>\n\n      <div className=\"relative z-10 max-w-2xl mx-auto text-center\">\n        <motion.div initial={{ opacity: 0, y: 20 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }}>\n          <p className=\"text-muted-foreground mb-6 leading-relaxed\">\n            Merupakan suatu kehormatan dan kebahagiaan bagi kami apabila Bapak/Ibu/Saudara/i berkenan hadir untuk\n            memberikan doa restu kepada kedua mempelai.\n          </p>\n\n          <p className=\"text-muted-foreground mb-8\">Atas kehadiran dan doa restunya kami ucapkan terima kasih.</p>\n\n          <div className=\"mb-8\">\n            <p className=\"text-sm text-gold mb-2\">Wassalamualaikum Wr. Wb.</p>\n            <p className=\"font-serif text-2xl text-gold-gradient\">\n              {settings.groom_name} & {settings.bride_name}\n            </p>\n          </div>\n\n          <div className=\"flex items-center justify-center gap-2 text-muted-foreground text-sm\">\n            <span>Made with</span>\n            <Heart className=\"w-4 h-4 text-red-400 fill-red-400\" />\n            <span>for our special day</span>\n          </div>\n        </motion.div>\n      </div>\n    </footer>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAJA;;;;AAUO,SAAS,cAAc,EAAE,QAAQ,EAAsB;IAC5D,qBACE,qVAAC;QAAO,WAAU;;0BAChB,qVAAC;gBACC,WAAU;gBACV,OAAO;oBACL,iBAAiB,CAAC,4DAA4D,CAAC;gBACjF;0BAEA,cAAA,qVAAC;oBAAI,WAAU;;;;;;;;;;;0BAGjB,qVAAC;gBAAI,WAAU;0BACb,cAAA,qVAAC,+ZAAM,CAAC,GAAG;oBAAC,SAAS;wBAAE,SAAS;wBAAG,GAAG;oBAAG;oBAAG,aAAa;wBAAE,SAAS;wBAAG,GAAG;oBAAE;oBAAG,UAAU;wBAAE,MAAM;oBAAK;;sCACpG,qVAAC;4BAAE,WAAU;sCAA6C;;;;;;sCAK1D,qVAAC;4BAAE,WAAU;sCAA6B;;;;;;sCAE1C,qVAAC;4BAAI,WAAU;;8CACb,qVAAC;oCAAE,WAAU;8CAAyB;;;;;;8CACtC,qVAAC;oCAAE,WAAU;;wCACV,SAAS,UAAU;wCAAC;wCAAI,SAAS,UAAU;;;;;;;;;;;;;sCAIhD,qVAAC;4BAAI,WAAU;;8CACb,qVAAC;8CAAK;;;;;;8CACN,qVAAC,6TAAK;oCAAC,WAAU;;;;;;8CACjB,qVAAC;8CAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMlB;KArCgB"}},
    {"offset": {"line": 2891, "column": 0}, "map": {"version":3,"sources":["file:///Users/chiio/VSCode/wedd-inv/components/invitation/music-player.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useRef, useEffect } from \"react\"\nimport { motion } from \"framer-motion\"\nimport { Music, Play } from \"lucide-react\"\n\ninterface MusicPlayerProps {\n  musicUrl?: string | null\n}\n\nexport function MusicPlayer({ musicUrl }: MusicPlayerProps) {\n  const [isPlaying, setIsPlaying] = useState(false)\n  const audioRef = useRef<HTMLAudioElement>(null)\n\n  const togglePlay = () => {\n    if (audioRef.current) {\n      if (isPlaying) {\n        audioRef.current.pause()\n      } else {\n        audioRef.current.play()\n      }\n      setIsPlaying(!isPlaying)\n    }\n  }\n\n  // Auto-play when component mounts (after splash screen)\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (audioRef.current) {\n        audioRef.current\n          .play()\n          .then(() => {\n            setIsPlaying(true)\n          })\n          .catch(() => {\n            // Autoplay blocked by browser\n            setIsPlaying(false)\n          })\n      }\n    }, 1000)\n\n    return () => clearTimeout(timer)\n  }, [])\n\n  return (\n    <>\n      <audio ref={audioRef} loop src={musicUrl || \"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3\"} />\n      <motion.button\n        initial={{ scale: 0 }}\n        animate={{ scale: 1 }}\n        transition={{ delay: 1, type: \"spring\" }}\n        onClick={togglePlay}\n        className=\"fixed bottom-6 right-6 z-40 w-14 h-14 rounded-full glass-gold flex items-center justify-center shadow-lg\"\n        aria-label={isPlaying ? \"Pause music\" : \"Play music\"}\n      >\n        {isPlaying ? (\n          <div className=\"relative\">\n            <Music className=\"w-6 h-6 text-gold animate-pulse\" />\n            <motion.div\n              animate={{ scale: [1, 1.2, 1] }}\n              transition={{ duration: 1, repeat: Number.POSITIVE_INFINITY }}\n              className=\"absolute inset-0 rounded-full border-2 border-gold/30\"\n            />\n          </div>\n        ) : (\n          <Play className=\"w-6 h-6 text-gold ml-1\" />\n        )}\n      </motion.button>\n    </>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;;;AAJA;;;;AAUO,SAAS,YAAY,EAAE,QAAQ,EAAoB;;IACxD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iUAAQ,EAAC;IAC3C,MAAM,WAAW,IAAA,+TAAM,EAAmB;IAE1C,MAAM,aAAa;QACjB,IAAI,SAAS,OAAO,EAAE;YACpB,IAAI,WAAW;gBACb,SAAS,OAAO,CAAC,KAAK;YACxB,OAAO;gBACL,SAAS,OAAO,CAAC,IAAI;YACvB;YACA,aAAa,CAAC;QAChB;IACF;IAEA,wDAAwD;IACxD,IAAA,kUAAS;iCAAC;YACR,MAAM,QAAQ;+CAAW;oBACvB,IAAI,SAAS,OAAO,EAAE;wBACpB,SAAS,OAAO,CACb,IAAI,GACJ,IAAI;2DAAC;gCACJ,aAAa;4BACf;0DACC,KAAK;2DAAC;gCACL,8BAA8B;gCAC9B,aAAa;4BACf;;oBACJ;gBACF;8CAAG;YAEH;yCAAO,IAAM,aAAa;;QAC5B;gCAAG,EAAE;IAEL,qBACE;;0BACE,qVAAC;gBAAM,KAAK;gBAAU,IAAI;gBAAC,KAAK,YAAY;;;;;;0BAC5C,qVAAC,+ZAAM,CAAC,MAAM;gBACZ,SAAS;oBAAE,OAAO;gBAAE;gBACpB,SAAS;oBAAE,OAAO;gBAAE;gBACpB,YAAY;oBAAE,OAAO;oBAAG,MAAM;gBAAS;gBACvC,SAAS;gBACT,WAAU;gBACV,cAAY,YAAY,gBAAgB;0BAEvC,0BACC,qVAAC;oBAAI,WAAU;;sCACb,qVAAC,6TAAK;4BAAC,WAAU;;;;;;sCACjB,qVAAC,+ZAAM,CAAC,GAAG;4BACT,SAAS;gCAAE,OAAO;oCAAC;oCAAG;oCAAK;iCAAE;4BAAC;4BAC9B,YAAY;gCAAE,UAAU;gCAAG,QAAQ,OAAO,iBAAiB;4BAAC;4BAC5D,WAAU;;;;;;;;;;;yCAId,qVAAC,0TAAI;oBAAC,WAAU;;;;;;;;;;;;;AAK1B;GA5DgB;KAAA"}},
    {"offset": {"line": 3028, "column": 0}, "map": {"version":3,"sources":["file:///Users/chiio/VSCode/wedd-inv/components/wedding-invitation.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { SplashScreen } from \"@/components/splash-screen\"\nimport { HeroSection } from \"@/components/invitation/hero-section\"\nimport { QuoteSection } from \"@/components/invitation/quote-section\"\nimport { CoupleSection } from \"@/components/invitation/couple-section\"\nimport { CountdownSection } from \"@/components/invitation/countdown-section\"\nimport { EventSection } from \"@/components/invitation/event-section\"\nimport { GallerySection } from \"@/components/invitation/gallery-section\"\nimport { RSVPSection } from \"@/components/invitation/rsvp-section\"\nimport { CommentsSection } from \"@/components/invitation/comments-section\"\nimport { FooterSection } from \"@/components/invitation/footer-section\"\nimport { MusicPlayer } from \"@/components/invitation/music-player\"\nimport type { WeddingSettings, GalleryItem, Comment, Guest } from \"@/lib/types\"\n\ninterface WeddingInvitationProps {\n  settings: WeddingSettings\n  gallery: GalleryItem[]\n  comments: Comment[]\n  guest: Guest | null\n}\n\nexport function WeddingInvitation({ settings, gallery, comments, guest }: WeddingInvitationProps) {\n  const [isOpened, setIsOpened] = useState(false)\n\n  return (\n    <main\n      className=\"min-h-screen bg-background select-none\"\n      onContextMenu={(e) => e.preventDefault()}\n      onMouseDown={(e) => {\n        // allow interaction with inputs and buttons — only block text selection\n        const tag = (e.target as HTMLElement)?.tagName?.toLowerCase()\n        if (tag === 'input' || tag === 'textarea' || tag === 'button' || (e.target as HTMLElement)?.closest?.('.editor')) return\n        e.preventDefault()\n      }}\n    >\n      <SplashScreen\n        groomName={settings.groom_name}\n        brideName={settings.bride_name}\n        guestName={guest?.name}\n        onOpen={() => setIsOpened(true)}\n        splashImage={settings.splash_image}\n        overlayOpacity={settings.splash_overlay_opacity}\n        overlayMode={settings.splash_overlay_mode}\n        overlayColor={settings.splash_overlay_color}\n      />\n\n      {isOpened && (\n        <>\n          <MusicPlayer musicUrl={settings.music_url} />\n          <HeroSection settings={settings} />\n          <QuoteSection settings={settings} />\n          <CoupleSection settings={settings} />\n          <CountdownSection weddingDate={settings.wedding_date} backgroundImage={settings.background_image || undefined} />\n          <EventSection settings={settings} />\n          <GallerySection images={gallery} />\n          <RSVPSection guest={guest} />\n          <CommentsSection initialComments={comments} guest={guest} />\n          <FooterSection settings={settings} />\n        </>\n      )}\n    </main>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAbA;;;;;;;;;;;;;AAuBO,SAAS,kBAAkB,EAAE,QAAQ,EAAE,OAAO,EAAE,QAAQ,EAAE,KAAK,EAA0B;;IAC9F,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iUAAQ,EAAC;IAEzC,qBACE,qVAAC;QACC,WAAU;QACV,eAAe,CAAC,IAAM,EAAE,cAAc;QACtC,aAAa,CAAC;YACZ,wEAAwE;YACxE,MAAM,MAAO,EAAE,MAAM,EAAkB,SAAS;YAChD,IAAI,QAAQ,WAAW,QAAQ,cAAc,QAAQ,YAAa,EAAE,MAAM,EAAkB,UAAU,YAAY;YAClH,EAAE,cAAc;QAClB;;0BAEA,qVAAC,2KAAY;gBACX,WAAW,SAAS,UAAU;gBAC9B,WAAW,SAAS,UAAU;gBAC9B,WAAW,OAAO;gBAClB,QAAQ,IAAM,YAAY;gBAC1B,aAAa,SAAS,YAAY;gBAClC,gBAAgB,SAAS,sBAAsB;gBAC/C,aAAa,SAAS,mBAAmB;gBACzC,cAAc,SAAS,oBAAoB;;;;;;YAG5C,0BACC;;kCACE,qVAAC,uLAAW;wBAAC,UAAU,SAAS,SAAS;;;;;;kCACzC,qVAAC,uLAAW;wBAAC,UAAU;;;;;;kCACvB,qVAAC,yLAAY;wBAAC,UAAU;;;;;;kCACxB,qVAAC,2LAAa;wBAAC,UAAU;;;;;;kCACzB,qVAAC,iMAAgB;wBAAC,aAAa,SAAS,YAAY;wBAAE,iBAAiB,SAAS,gBAAgB,IAAI;;;;;;kCACpG,qVAAC,yLAAY;wBAAC,UAAU;;;;;;kCACxB,qVAAC,6LAAc;wBAAC,QAAQ;;;;;;kCACxB,qVAAC,uLAAW;wBAAC,OAAO;;;;;;kCACpB,qVAAC,+LAAe;wBAAC,iBAAiB;wBAAU,OAAO;;;;;;kCACnD,qVAAC,2LAAa;wBAAC,UAAU;;;;;;;;;;;;;;AAKnC;GAzCgB;KAAA"}}]
}